GAMS Rev 235  WEX-VS8 23.5.1 x86/MS Windows             09/18/18 15:11:22 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  *$setglobal filelocation  C:\dairyclimatemodel_4.30
   2  *$setglobal filelocation   C:\Users\James\Documents\GitHub\smallholder_dai
      ry_ghg_model\smallholder_dairy_ghg_model\new\dairyclimatemodel
   3   
   4   
   5   
   8   
   9  *$LIBINCLUDE GNUPLTXY credit Y-AXIS X-AXIS
  10   
  11   
      This file is used to run the global model. It includes all the necessary m
      odules and specifies the model definition (i.e. what modules to include de
      pending on the settings).
      The model solve statment is embedded in a loop which is used to run the mo
      del sequentially over a multi-year period. After each instance of the solv
      e statement, the variables get saved
      and re-defined as intializing parameters in the next instance of the model
      . Then all the results get exported to excel files.
       
  18   
  19   
  20   
  21   
  22   
      ***************************
      Dairy climate model
      ***************************
  28   
  29   
  30  * Set Declarations
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel\set_definitions.gms
  32  Sets
  33   
  34  *-- household sets
  35  hh households          /hh2/
  36   
  37  * -- household members
  38  hhold_member /total,over_65,under_15,adult/
  39   
  40  *-- time sets
  41  m twelve months                                  /m01*m12/
  42  year years                                       /1*20,y01*y12/
  43  y(year) years in model horizon                   /y01/
  44  y2(year) years in current run or recursive steps /1/
  45   
  46  laterm(m) /m02*m12/
  47  firsty(y2) /1/
  48  firstm(m)  /m01/
  49  *lasty(y2)  /2/
  50  lastm(m)   /m12/
  51   
  52  *scenarios
  53  scen 'Model scenarios' /Base/
  54  *, Scen1, Scen2, Scen3, Scen4/
  55   
  56  good /food, nonfood/
  57   
  58  *- nutrients for human consumption
  59  nut /kcal/
  60   
  61  *-- types of animals
  62  type             /dairy/
  63   
  64  * animal products
  65  outputs /meat,milk/
  66   
  67  *-- intensity sets
  68  inten intensity level for feeding  /ext,med,int/
  69  *ext,med,int/
  70  minten level for maintenance       /ext/
  71   
  72   
  73  *- nutrient sets
  74  anut /netenergy,grossenergy,crudeprotein,metabolisableprotein,drymatter,di
      gestibility,N,ADF/
  75   
  76  *-- animal activity related sets
  77  breed /local,improved/
  78   
  79   
  80  aaact  animal activity /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,adul
      tf_loc,reprod_loc,youngf_imp,youngm_imp,weanerf_imp,weanerm_imp,adultf_imp
      ,reprod_imp/
  81  aaact_loc(aaact)       /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,adul
      tf_loc,reprod_loc/
  82  aaact_imp(aaact)       /youngf_imp,youngm_imp,weanerf_imp,weanerm_imp,adul
      tf_imp,reprod_imp/
  83  young(aaact)           /youngm_loc,youngf_loc,youngm_imp,youngf_imp/
  84  young_imp(aaact)       /youngm_imp,youngf_imp/
  85  young_loc(aaact)       /youngm_loc,youngf_loc/
  86  weaner(aaact)          /weanerm_loc,weanerf_loc,weanerm_imp,weanerf_imp/
  87  weaner_loc(aaact)      /weanerm_imp,weanerf_imp/
  88  weaner_imp(aaact)      /weanerm_loc,weanerf_loc/
  89  adult(aaact)           /adultf_loc,reprod_loc,adultf_imp,reprod_imp/
  90  adult_loc(aaact)       /adultf_loc,reprod_loc/
  91  adult_imp(aaact)       /adultf_imp,reprod_imp/
  92  adultf(aaact)          /adultf_loc,adultf_imp/
  93  adultf_imp(aaact)      /adultf_imp/
  94  adultf_loc(aaact)      /adultf_loc/
  95  cow(aaact)             /adultf_loc,adultf_imp/
  96  male(aaact)            /youngm_loc,weanerm_loc,reprod_loc,youngm_imp,weane
      rm_imp,reprod_imp/
  97  male_loc(aaact)        /youngm_loc,weanerm_loc,reprod_loc/
  98  male_imp(aaact)        /youngm_imp,weanerm_imp,reprod_imp/
  99  reprod(aaact)          /reprod_loc,reprod_imp/
 100  reprod_loc(aaact)      /reprod_loc/
 101  reprod_imp(aaact)      /reprod_imp/
 102  yfemale(aaact)         /youngf_loc,youngf_imp/
 103  yfemale_loc(aaact)     /youngf_loc/
 104  yfemale_imp(aaact)     /youngf_imp/
 105  notadult(aaact)        /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,youn
      gf_imp,youngm_imp,weanerf_imp,weanerm_imp/
 106  notadultf(aaact)       /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,youn
      gf_imp,youngm_imp,weanerf_imp,weanerm_imp,reprod_loc,reprod_imp/
 107  notadult_loc(aaact)    /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc/
 108  notadult_imp(aaact)    /youngf_imp,youngm_imp,weanerf_imp,weanerm_imp/
 109  local(aaact)           /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,adul
      tf_loc,reprod_loc/
 110  improved(aaact)        /youngf_imp,youngm_imp,weanerf_imp,weanerm_imp,adul
      tf_imp,reprod_imp/
 111   
 112   
 113  *-- crop and grazing related sets
 114  c         /beans,maize,sorghum,millet,groundnut,cowpea,banana,napier,pastu
      re/
 115  food(c)   /beans,maize,sorghum,millet,groundnut,cowpea/
 116  fodder(c) /napier,pasture/
 117  silage(c) /maize/
 118  cash(c)   /banana/
 119  non_fodder(c) /beans,maize,sorghum,millet,groundnut,cowpea,banana/
 120  crop_not_pasture(c) /beans,maize,sorghum,millet,groundnut,cowpea,banana,na
      pier/
 121   
 122   
 123  *feed sets
 124  feed       'feed sources'          /maize_residue,cpea_residue,grnut_resid
      ue,bean_residue,sorgh_residue,millet_residue,banana_residue,maize_silage,s
      unflower_seed_cake,cotton_seed_cake,maize_bran,grass,grass_hay,napier/
 125  feed_off_farm(feed)                /sunflower_seed_cake,cotton_seed_cake,m
      aize_bran/
 126  feed_on_farm(feed)                 /maize_residue,cpea_residue,grnut_resid
      ue,bean_residue,sorgh_residue,millet_residue,grass,grass_hay,napier,maize_
      silage/
 127  residues(feed)                     /maize_residue,bean_residue,grnut_resid
      ue,sorgh_residue,cpea_residue,millet_residue,banana_residue/
 128  grazed(feed)                       /grass/
 129  ration(feed)                       /maize_residue,bean_residue,cpea_residu
      e,grnut_residue,sorgh_residue,millet_residue,maize_silage,grass_hay,napier
      ,sunflower_seed_cake,cotton_seed_cake,maize_bran/
 130  feed_on_farm_non_fodder(feed)      /maize_residue,cpea_residue,grnut_resid
      ue,bean_residue,sorgh_residue,millet_residue,banana_residue/
 131   
 132  **-- Mappings
 133  crop_silage(c,feed)      /maize.maize_silage/
 134  crop_residue(c,residues) /maize.maize_residue,beans.bean_residue,groundnut
      .grnut_residue,sorghum.sorgh_residue,millet.millet_residue/
 135  fodder_feed(fodder,feed) /napier.napier,pasture.grass_hay/
 136  feedbuy_ration(ration,feed_off_farm) /sunflower_seed_cake.sunflower_seed_c
      ake,cotton_seed_cake.cotton_seed_cake,maize_bran.maize_bran/
 137  residues_ration(residues,ration) /maize_residue.maize_residue,bean_residue
      .bean_residue,millet_residue.millet_residue,grnut_residue.grnut_residue,so
      rgh_residue.sorgh_residue,cpea_residue.cpea_residue/
 138  breed_aaact(breed,aaact) /local.youngf_loc,local.youngm_loc,local.weanerf_
      loc,local.weanerm_loc,local.adultf_loc,local.reprod_loc, improved.youngf_i
      mp,improved.youngm_imp,improved.weanerf_imp,improved.weanerm_imp,improved.
      adultf_imp,improved.reprod_imp/
 139  residues_non_fodder(residues,non_fodder) /bean_residue.beans,maize_residue
      .maize,sorgh_residue.sorghum,millet_residue.millet,grnut_residue.groundnut
      ,cpea_residue.cowpea,banana_residue.banana/
 140  ;
 141   
 142  alias(good,good2)
 143   
 144   
 145  * Data load in
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel\data\parameters.gms
 147  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 148  * #1 Core model parameters   (all parameters are declared in terms of gene
      ric sets)
 149  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 150   
 151  Parameters
 152  cropnutrientsdata        'Nutrition properties of feeds'
 153  labourdata               'Labour requirements for livestock'
 154  prodparams               'Productivity parameters for livestock'
 155  startfeed                'Starting feed balance'
 156  startlivestock           'Starting livestock quantities'
 157  transferrate             'Transfer rate for feed biomass'
 158  maintenanceExpense       'General expenses on livestock'
 159  mortality                'Mortality rate of livestock'
 160  prices_lives             'Sale and purchase prices of livestock'
 161  prices_milk              'Sale price of milk'
 162  prices_milk_contract     'Sale price of milk under a contract'
 163  prices_meat              'Sale price of meat'
 164  prices_feed              'Feed prices'
 165  offfarm_income           'Annual off farm income (lc/hh/year)'
 166  labour_rate              'Wage rate for hired labour'
 167  arable_land              'Available arable land per household'
 168  hhold_size               'Number of dependents per household'
 169  area_crop                'Area dedicated to a given crop (ha)'
 170  rangeland                'Available rangeland (ha)'
 171  crop_price               'sale prices of crops (lc/Mg)'
 172  crop_labour              'monthly crop labour demand in hours per hectare'
 173  crop_costs               'costs of crop production per ha'
 174  livestock_labour         'labour requirements for livestock'
 175  total_ag_land            'Total agricultural land owned by the household'
 176  crop_yield               'Yields of crops (Mg/ha/year)'
 177  crop_yield_off_farm      'Yields of feed crops grown off farm (Mg/ha/year)
      '
 178  start_cash               'amount of cash available to the household in fir
      st year (lc/hh)'
 179  rangeland_yield          'Yield of rangeland (Mg DM/ha/m)'
 180  harvest_index            'Harvest index for crops (ratio)'
 181  ;
 182   
GDXIN   C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_model\
        dairyclimatemodel\data/household_data.gdx
 185  *household specific params
--- LOAD  offfarm_income = 2:offfarm_income
--- LOAD  total_ag_land = 5:total_ag_land
--- LOAD  hhold_size = 1:hhold_size
--- LOAD  arable_land = 6:arable_land
--- LOAD  start_cash = 3:start_cash
--- LOAD  rangeland = 4:rangeland
--- LOAD  crop_price = 17:crop_price
--- LOAD  area_crop = 7:area_crop
--- LOAD  crop_costs = 19:crop_costs
--- LOAD  crop_yield = 8:crop_yield
--- LOAD  rangeland_yield = 9:rangeland_yield
--- LOAD  startfeed = 13:startfeed
--- LOAD  startlivestock = 14:startlivestock
--- LOAD  maintenanceExpense = 15:maintenanceExpense
--- LOAD  mortality = 16:mortality
 202   
 203   
GDXIN   C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_model\
        dairyclimatemodel\data/model_data.gdx
 206  *general model parameters
 207  *$LOAD crop_price
--- LOAD  prices_lives = 4:prices_lives
--- LOAD  prices_milk = 5:prices_milk
--- LOAD  prices_milk_contract = 6:prices_milk_contract
--- LOAD  prices_meat = 7:prices_meat
--- LOAD  prices_feed = 8:prices_feed
--- LOAD  labour_rate = 10:labour_rate
--- LOAD  cropnutrientsdata = 1:cropnutrientsdata
--- LOAD  crop_labour = 9:crop_labour
--- LOAD  crop_yield_off_farm = 11:crop_yield_off_farm
--- LOAD  labourdata = 2:labourdata
--- LOAD  prodparams = 3:prodparams
--- LOAD  harvest_index = 12:harvest_index
 221   
 222   
 223   
 224   
 225   
 226   
 227   
 228  Parameters
 229   
 230   
 231  * general household parameters
 232    p_hhold_adult_equivalents(hh)      'Amount of household adult equivalent
      s (AE/hh)'
 233    p_cash(hh)                         'Starting cash balance (lc/hh)'
 234    p_offFarmIncome(hh)                'Annual off farm income (lc/hh/yr)'
 235    p_labouravailablehome(hh,y,m)      'Total labour available from the home
       (person-days per month)'
 236    p_arable_land(hh,y)                'Arable land owned by the household (
      ha)'
 237    p_total_land(hh,y)                 'Total land owned by the household (h
      a)'
 238    p_rangeland(hh,y)                  'Total available rangeland (ha)'
 239    p_hhold_members(hh,hhold_member)   'Households dependents (people/hh)'
 240    p_offFarm_wage(hh)                 'Wage rate for off farm employment (l
      c/person/hour)'
 241   
 242  * farm cost parameters
 243    p_cropcosts(hh,c)                        'Costs related to crop producti
      on (lc/ha/year)'
 244    p_maintExpense(hh,aaact,type,minten)     'Annual expenses per head of li
      vestock (lc/hd/yr)'
 245   
 246  * crop parameters
 247    p_harvestindex(food)             'Harvest index of different crops (rati
      o of grain to total biomass)'
 248    p_res_FRAC_soil(hh,food)         'Parameter defining the fraction of tot
      al residues being left on the field (fraction, e.g. 0.4)'
 249    p_yldCrop(hh,c,m)                'Crop yields (kg/ha/year)'
 250    p_transferrate                   'transfer rate of feed biomass'
 251    p_forage_yield(m)                'yield of forage (tons DM/ha/yr)'
 252   
 253   
 254  * household food parameters
 255    p_nutrientrequirement(hh,nut)    'Nutrient requirement of the given nutr
      ient per AE per year (per AE per year)'
 256    p_nutrientproperty(food,nut)     'Nutrient density of the given nutrient
       per unit food (per kg)'
 257    p_FRAC_farmproduce(nut)          'Fraction of a given nutrient coming fr
      om farm produce'
 258   
 259   
 260  * livestock parameters
 261    p_rateFert(aaact,type,inten)              'fertility rate, young born pe
      r female adult per month'
 262    p_mreprodf(aaact,type,inten)              'number of males reproduction 
      animals per female breeder'
 263    p_sexratio(aaact,type,inten)              'birth ratio male and female'
 264    p_survivalrate(aaact,type,inten)          'survival rate,% of livestock 
      that survive each year'
 265    p_grad(aaact,type,inten)                  'months in class, used for liv
      estock dynamics, for example a young animal is in young class for X months
      , the moves to weaner class (aaact)'
 266    p_mort(aaact,type,minten)                 'fraction of animals that die 
      (monthly)'
 267    p_gain(aaact,type,inten)                  'Average daily gain for a give
      n animal (kg/head/day)'
 268    p_milkprod(aaact,type,inten)              'milk produced per adult femal
      e (kg/head/day)'
 269    p_salesw(aaact,type,inten)                'sales weight of a given anima
      l'
 270    p_dress_pct(aaact,type,inten)             'dressing percentage of aninal
       (expressed as fraction)'
 271   
 272  * starting livestock numbers
 273    v0_aactLev(hh,aaact,type,inten,minten)    'parameter used to specify liv
      estock numbers in 1st period of each iteration'
 274   
 275  * starting feed balance
 276    p_s(hh,feed)                              'starting feed balance in kg'
 277   
 278  * labour demand
 279    p_labour_lives(m,inten,aaact,type)             'labour demand for each a
      ctivity in each season and intensification level across households'
 280    p_labourdemcrop(c,m)                            'labour requirements for
       crop activities ()'
 281   
 282   
 283  * prices
 284    p_milkPrice                                     'Price of milk (lc/l)'
 285    p_milkPrice_contract                            'Price of milk under a b
      uyer-agreement (lc/l)'
 286    p_meatPrice                                     'Price of meat (lc/kg)'
 287    p_salesPrice(hh,aaact)                          'Sales price of a given 
      animal (lc/head)'
 288    p_purchPrice(hh,aaact)                          'Purchase price of a giv
      en animal (lc/head)'
 289    p_labourPrice(hh)                               'Hired labour price (lc/
      hour)'
 290    p_feedPrice(feed)                               'Feed prices (for purcha
      sed feeds) in lc per kg'
 291  *  p_buyPrice(aaact,type,inten)                   'buy price of livestock'
 292    p_crop_sell_price(hh,y,c)                        'Sell price of crops (l
      c/kg)'
 293   
 294   
 295  *nutrient properties
 296    p_dryMatter(feed)
 297    p_grossEnergy(feed)
 298    p_netEnergy(feed)
 299    p_digestibleEnergy(feed)
 300    p_crudeProtein(feed)
 301    p_ADF(feed)
 302  ;
 303   
 304  **---- Household parameters
 305   
 306  * quantity of household dependents
 307  p_hhold_members(hh,hhold_member)=hhold_size(hhold_member,hh);
 308   
 309  *- Financial parameters
 310  p_offFarmIncome(hh)=offfarm_income(hh)  ;
 311  p_offFarm_wage(hh)=3000;
 312  p_cropcosts(hh,c)=crop_costs(hh,c) ;
 313  p_cash(hh)  = start_cash(hh)  ;
 314  p_labourPrice(hh)= labour_rate(hh,'lives');
 315  p_maintExpense(hh,aaact,type,minten)= maintenanceExpense(hh,aaact,type,min
      ten);
 316   
 317   
 318   
 319  *- Crop and forage parameters
 320  * rangeland available in hectares
 321  p_rangeland(hh,y)= rangeland('rangeland',hh);
 322   
 323  *arable land available in hectares
 324  p_arable_land(hh,y)=arable_land(hh);
 325   
 326  *total land available in hectares
 327  p_total_land(hh,y)=total_ag_land(hh);
 328   
 329  * crop and forage yields (Mg/ha)
 330  p_yldCrop(hh,c,m)=crop_yield(c,hh,m);
 331  p_forage_yield(m)=rangeland_yield(m);
 332   
 333   
 334  **---- Model parameters
 335   
 336  * fertility (calving) rate of adult females
 337  p_rateFert(aaact,type,inten)=  prodparams (aaact,type,inten,'p_rateFert');
 338  *
 339  p_mreprodf(aaact,type,inten)=  prodparams (aaact,type,inten,'p_mreprodf');
 340  * ratio of male to female reproductive animals (assumed 0.5)
 341  p_sexratio(aaact,type,inten)=  prodparams (aaact,type,inten,'p_sexratio');
 342   
 343  * rate at which animals graduate to new class
 344  p_grad(aaact,type,inten)=prodparams (aaact,type,inten,'graduatetonextclass
      ');
 345  * mortality rate
 346  p_mort(aaact,type,minten)=mortality(aaact,type,minten)/12 ;
 347  p_transferrate=1;
 348  p_gain(aaact,type,inten)=prodparams (aaact,type,inten,'adg');
 349  * milk production (kg)
 350  p_milkprod(adultf,type,inten)=prodparams(adultf,type,inten,'milkprod');
 351   
 352  * sales weight (kg)
 353  p_salesw(aaact,type,inten)=prodparams (aaact,type,inten,'fnweight');
 354   
 355   
 356  * livestock numbers
 357  v0_aactLev(hh,aaact,type,inten,minten)=startlivestock(hh,aaact,type,inten,
      minten,'startvalue');
 358   
 359  * starting feed balance (kg)
 360  p_s(hh,feed)= startfeed(hh,feed, 'p_s');
 361   
 362  * labour requirements
 363  p_labour_lives(m,inten,aaact,'dairy')=labourdata(m,inten,aaact,'dairy');
 364  p_labourdemcrop(c,m)=crop_labour(c,m);
 365   
 366  * prices
 367  p_milkPrice=prices_milk;
 368  p_milkPrice_contract=prices_milk_contract;
 369  p_meatPrice=prices_meat;
 370  p_feedPrice(feed)= 0.75*prices_feed(feed);
 371  p_crop_sell_price(hh,y,c)=crop_price(c,hh)  ;
 372  p_salesPrice(hh,aaact)=prices_lives(aaact,'sell') ;
 373  p_purchPrice(hh,aaact_imp)=0.8*prices_lives(aaact_imp,'buy') ;
 374  p_purchPrice(hh,aaact_loc)=prices_lives(aaact_loc,'buy') ;
 375  p_labourPrice(hh)= labour_rate(hh,'lives');
 376   
 377   
 378  * feed nutrient properties
 379  p_grossEnergy(feed)=cropnutrientsdata('grossenergy',feed) ;
 380  p_dryMatter(feed)=cropnutrientsdata('drymatter',feed) ;
 381  p_netEnergy(feed)=cropnutrientsdata('netenergy',feed) ;
 382  p_digestibleEnergy(feed)=cropnutrientsdata('digestibility',feed)*cropnutri
      entsdata('grossenergy',feed) ;
 383  p_crudeProtein(feed)=cropnutrientsdata('crudeprotein',feed) ;
 384  p_ADF(feed)=cropnutrientsdata('ADF',feed) ; ;
 385   
 386   
 387   
 388  * human nutrition related parameters
 389  p_nutrientrequirement(hh,'kcal')=2500;
 390  p_nutrientproperty(food,'kcal')=5000;
 391  p_FRAC_farmproduce(nut)=0.2;
 392   
 393  **-management or biophysical related parameters
 394  p_harvestindex(food)=harvest_index(food);
 395  p_res_FRAC_soil(hh,food)=0.5;
 396   
 397   
 398  ** -- calculate parameters off of raw data
 399  *calculate monhtly home labour availability based on number of household m
      embers of specific age categories
 400  p_labouravailablehome(hh,y,m) = 4*(2*p_hhold_members(hh,'under_15') + 3.5*
      p_hhold_members(hh,'over_65') + 7*p_hhold_members(hh,'adult