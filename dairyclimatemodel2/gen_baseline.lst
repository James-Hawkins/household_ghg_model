GAMS Rev 235  WEX-VS8 23.5.1 x86/MS Windows             10/04/18 15:32:47 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   2   
   3   
   6   
   7   
   9   
  10   
  11  *$LIBINCLUDE GNUPLTXY credit Y-AXIS X-AXIS
  12   
  13   
      This file is used to run the global model. It includes all the necessary m
      odules and specifies the model definition (i.e. what modules to include de
      pending on the settings).
      The model solve statment is embedded in a loop which is used to run the mo
      del sequentially over a multi-year period. After each instance of the solv
      e statement, the variables get saved
      and re-defined as intializing parameters in the next instance of the model
      . Then all the results get exported to excel files.
       
  20   
  21   
  22   
  23   
  24   
      ***************************
      Dairy climate model
      ***************************
  30   
  31   
  32  * Set Declarations
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\set_definitions.gms
  34  Sets
  35   
  36  *-- household sets
  37  hh households          /hh2/
  38   
  39  * -- household members
  40  hhold_member /total,over_65,under_15,adult/
  41   
  42  *-- time sets
  43  m twelve months                                  /m01*m12/
  44  year years                                       /1*20,y01*y12/
  45  y(year) years in model horizon                   /y01*y02/
  46  y2(year) years in current run or recursive steps /1/
  47   
  48  laterm(m) /m02*m12/
  49  firsty(y2) /1/
  50  firstm(m)  /m01/
  51  *lasty(y2)  /2/
  52  lastm(m)   /m12/
  53   
  54  *scenarios
  55  scen 'Model scenarios' /Base,Scen1/
  56  *, Scen1, Scen2, Scen3, Scen4/
  57   
  58  good /food, nonfood/
  59   
  60  *- nutrients for human consumption
  61  nut /kcal/
  62   
  63  *-- types of animals
  64  type             /dairy/
  65   
  66  * animal products
  67  outputs /meat,milk/
  68   
  69  *-- intensity sets
  70  inten intensity level for feeding  /ext,med,int/
  71  *ext,med,int/
  72  minten level for maintenance       /ext/
  73   
  74   
  75  *- nutrient sets
  76  anut /netenergy,grossenergy,crudeprotein,metabolisableprotein,drymatter,di
      gestibility,N,ADF/
  77   
  78  *-- animal activity related sets
  79  breed /local,improved/
  80   
  81   
  82  aaact  animal activity /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,adul
      tf_loc,reprod_loc,youngf_imp,youngm_imp,weanerf_imp,weanerm_imp,adultf_imp
      ,reprod_imp/
  83  aaact_loc(aaact)       /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,adul
      tf_loc,reprod_loc/
  84  aaact_imp(aaact)       /youngf_imp,youngm_imp,weanerf_imp,weanerm_imp,adul
      tf_imp,reprod_imp/
  85  young(aaact)           /youngm_loc,youngf_loc,youngm_imp,youngf_imp/
  86  young_imp(aaact)       /youngm_imp,youngf_imp/
  87  young_loc(aaact)       /youngm_loc,youngf_loc/
  88  weaner(aaact)          /weanerm_loc,weanerf_loc,weanerm_imp,weanerf_imp/
  89  weaner_loc(aaact)      /weanerm_imp,weanerf_imp/
  90  weaner_imp(aaact)      /weanerm_loc,weanerf_loc/
  91  adult(aaact)           /adultf_loc,reprod_loc,adultf_imp,reprod_imp/
  92  adult_loc(aaact)       /adultf_loc,reprod_loc/
  93  adult_imp(aaact)       /adultf_imp,reprod_imp/
  94  adultf(aaact)          /adultf_loc,adultf_imp/
  95  adultf_imp(aaact)      /adultf_imp/
  96  adultf_loc(aaact)      /adultf_loc/
  97  cow(aaact)             /adultf_loc,adultf_imp/
  98  male(aaact)            /youngm_loc,weanerm_loc,reprod_loc,youngm_imp,weane
      rm_imp,reprod_imp/
  99  male_loc(aaact)        /youngm_loc,weanerm_loc,reprod_loc/
 100  male_imp(aaact)        /youngm_imp,weanerm_imp,reprod_imp/
 101  reprod(aaact)          /reprod_loc,reprod_imp/
 102  reprod_loc(aaact)      /reprod_loc/
 103  reprod_imp(aaact)      /reprod_imp/
 104  yfemale(aaact)         /youngf_loc,youngf_imp/
 105  yfemale_loc(aaact)     /youngf_loc/
 106  yfemale_imp(aaact)     /youngf_imp/
 107  notadult(aaact)        /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,youn
      gf_imp,youngm_imp,weanerf_imp,weanerm_imp/
 108  notadultf(aaact)       /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,youn
      gf_imp,youngm_imp,weanerf_imp,weanerm_imp,reprod_loc,reprod_imp/
 109  notadult_loc(aaact)    /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc/
 110  notadult_imp(aaact)    /youngf_imp,youngm_imp,weanerf_imp,weanerm_imp/
 111  local(aaact)           /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,adul
      tf_loc,reprod_loc/
 112  improved(aaact)        /youngf_imp,youngm_imp,weanerf_imp,weanerm_imp,adul
      tf_imp,reprod_imp/
 113   
 114   
 115  *-- crop and grazing related sets
 116  c         /beans,maize,sorghum,millet,groundnut,cowpea,banana,napier,pastu
      re/
 117  food(c)   /beans,maize,sorghum,millet,groundnut,cowpea/
 118  fodder(c) /napier,pasture/
 119  silage(c) /maize/
 120  cash(c)   /banana/
 121  non_fodder(c) /beans,maize,sorghum,millet,groundnut,cowpea,banana/
 122  crop_not_pasture(c) /beans,maize,sorghum,millet,groundnut,cowpea,banana,na
      pier/
 123   
 124   
 125  *feed sets
 126  feed       'feed sources'          /maize_residue,cpea_residue,grnut_resid
      ue,bean_residue,sorgh_residue,millet_residue,banana_residue,maize_silage,s
      unflower_seed_cake,cotton_seed_cake,maize_bran,grass,grass_hay,napier/
 127  feed_off_farm(feed)                /sunflower_seed_cake,cotton_seed_cake,m
      aize_bran/
 128  feed_on_farm(feed)                 /maize_residue,cpea_residue,grnut_resid
      ue,bean_residue,sorgh_residue,millet_residue,grass,grass_hay,napier,maize_
      silage/
 129  residues(feed)                     /maize_residue,bean_residue,grnut_resid
      ue,sorgh_residue,cpea_residue,millet_residue,banana_residue/
 130  grazed(feed)                       /grass/
 131  ration(feed)                       /maize_residue,bean_residue,cpea_residu
      e,grnut_residue,sorgh_residue,millet_residue,maize_silage,grass_hay,napier
      ,sunflower_seed_cake,cotton_seed_cake,maize_bran/
 132  feed_on_farm_non_fodder(feed)      /maize_residue,cpea_residue,grnut_resid
      ue,bean_residue,sorgh_residue,millet_residue,banana_residue/
 133   
 134  **-- Mappings
 135  crop_silage(c,feed)      /maize.maize_silage/
 136  crop_residue(c,residues) /maize.maize_residue,beans.bean_residue,groundnut
      .grnut_residue,sorghum.sorgh_residue,millet.millet_residue/
 137  fodder_feed(fodder,feed) /napier.napier,pasture.grass_hay/
 138  feedbuy_ration(ration,feed_off_farm) /sunflower_seed_cake.sunflower_seed_c
      ake,cotton_seed_cake.cotton_seed_cake,maize_bran.maize_bran/
 139  residues_ration(residues,ration) /maize_residue.maize_residue,bean_residue
      .bean_residue,millet_residue.millet_residue,grnut_residue.grnut_residue,so
      rgh_residue.sorgh_residue,cpea_residue.cpea_residue/
 140  breed_aaact(breed,aaact) /local.youngf_loc,local.youngm_loc,local.weanerf_
      loc,local.weanerm_loc,local.adultf_loc,local.reprod_loc, improved.youngf_i
      mp,improved.youngm_imp,improved.weanerf_imp,improved.weanerm_imp,improved.
      adultf_imp,improved.reprod_imp/
 141  residues_non_fodder(residues,non_fodder) /bean_residue.beans,maize_residue
      .maize,sorgh_residue.sorghum,millet_residue.millet,grnut_residue.groundnut
      ,cpea_residue.cowpea,banana_residue.banana/
 142  ;
 143   
 144  alias(good,good2)
 145   
 146   
 147  * Data load in
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\data\parameters.gms
 149  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 150  * #1 Core model parameters   (all parameters are declared in terms of gene
      ric sets)
 151  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 152   
 153  Parameters
 154  cropnutrientsdata        'Nutrition properties of feeds'
 155  labourdata               'Labour requirements for livestock'
 156  prodparams               'Productivity parameters for livestock'
 157  startfeed                'Starting feed balance'
 158  startlivestock           'Starting livestock quantities'
 159  transferrate             'Transfer rate for feed biomass'
 160  maintenanceExpense       'General expenses on livestock'
 161  mortality                'Mortality rate of livestock'
 162  prices_lives             'Sale and purchase prices of livestock'
 163  prices_milk              'Sale price of milk'
 164  prices_milk_contract     'Sale price of milk under a contract'
 165  prices_meat              'Sale price of meat'
 166  prices_feed              'Feed prices'
 167  offfarm_income           'Annual off farm income (lc/hh/year)'
 168  labour_rate              'Wage rate for hired labour'
 169  arable_land              'Available arable land per household'
 170  hhold_size               'Number of dependents per household'
 171  area_crop                'Area dedicated to a given crop (ha)'
 172  rangeland                'Available rangeland (ha)'
 173  crop_price               'sale prices of crops (lc/Mg)'
 174  crop_labour              'monthly crop labour demand in hours per hectare'
 175  crop_costs               'costs of crop production per ha'
 176  livestock_labour         'labour requirements for livestock'
 177  total_ag_land            'Total agricultural land owned by the household'
 178  crop_yield               'Yields of crops (Mg/ha/year)'
 179  crop_yield_off_farm      'Yields of feed crops grown off farm (Mg/ha/year)
      '
 180  start_cash               'amount of cash available to the household in fir
      st year (lc/hh)'
 181  rangeland_yield          'Yield of rangeland (Mg DM/ha/m)'
 182  harvest_index            'Harvest index for crops (ratio)'
 183  ;
 184   
GDXIN   C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_model\
        dairyclimatemodel2\data/household_data.gdx
 187  *household specific params
--- LOAD  offfarm_income = 2:offfarm_income
--- LOAD  total_ag_land = 5:total_ag_land
--- LOAD  hhold_size = 1:hhold_size
--- LOAD  arable_land = 6:arable_land
--- LOAD  start_cash = 3:start_cash
--- LOAD  rangeland = 4:rangeland
--- LOAD  crop_price = 17:crop_price
--- LOAD  area_crop = 7:area_crop
--- LOAD  crop_costs = 19:crop_costs
--- LOAD  crop_yield = 8:crop_yield
--- LOAD  rangeland_yield = 9:rangeland_yield
--- LOAD  startfeed = 13:startfeed
--- LOAD  startlivestock = 14:startlivestock
--- LOAD  maintenanceExpense = 15:maintenanceExpense
--- LOAD  mortality = 16:mortality
 204   
 205   
GDXIN   C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_model\
        dairyclimatemodel2\data/model_data.gdx
 208  *general model parameters
 209  *$LOAD crop_price
--- LOAD  prices_lives = 4:prices_lives
--- LOAD  prices_milk = 5:prices_milk
--- LOAD  prices_milk_contract = 6:prices_milk_contract
--- LOAD  prices_meat = 7:prices_meat
--- LOAD  prices_feed = 8:prices_feed
--- LOAD  labour_rate = 10:labour_rate
--- LOAD  cropnutrientsdata = 1:cropnutrientsdata
--- LOAD  crop_labour = 9:crop_labour
--- LOAD  crop_yield_off_farm = 11:crop_yield_off_farm
--- LOAD  labourdata = 2:labourdata
--- LOAD  prodparams = 3:prodparams
--- LOAD  harvest_index = 12:harvest_index
 223   
 224   
 225   
 226   
 227   
 228   
 229   
 230  Parameters
 231   
 232   
 233  * general household parameters
 234    p_hhold_adult_equivalents(hh)      'Amount of household adult equivalent
      s (AE/hh)'
 235    p_cash(hh)                         'Starting cash balance (lc/hh)'
 236    p_offFarmIncome(hh)                'Annual off farm income (lc/hh/yr)'
 237    p_labouravailablehome(hh,y,m)      'Total labour available from the home
       (person-days per month)'
 238    p_arable_land(hh,y)                'Arable land owned by the household (
      ha)'
 239    p_total_land(hh,y)                 'Total land owned by the household (h
      a)'
 240    p_rangeland(hh,y)                  'Total available rangeland (ha)'
 241    p_hhold_members(hh,hhold_member)   'Households dependents (people/hh)'
 242    p_offFarm_wage(hh)                 'Wage rate for off farm employment (l
      c/person/hour)'
 243   
 244  * farm cost parameters
 245    p_cropcosts(hh,c)                        'Costs related to crop producti
      on (lc/ha/year)'
 246    p_maintExpense(hh,aaact,type,minten)     'Annual expenses per head of li
      vestock (lc/hd/yr)'
 247   
 248  * crop parameters
 249    p_harvestindex(food)             'Harvest index of different crops (rati
      o of grain to total biomass)'
 250    p_res_FRAC_soil(hh,food)         'Parameter defining the fraction of tot
      al residues being left on the field (fraction, e.g. 0.4)'
 251    p_yldCrop(hh,c,m)                'Crop yields (kg/ha/year)'
 252    p_transferrate                   'transfer rate of feed biomass'
 253    p_forage_yield(m)                'yield of forage (tons DM/ha/yr)'
 254   
 255   
 256  * household food parameters
 257    p_nutrientrequirement(hh,nut)    'Nutrient requirement of the given nutr
      ient per AE per year (per AE per year)'
 258    p_nutrientproperty(food,nut)     'Nutrient density of the given nutrient
       per unit food (per kg)'
 259    p_FRAC_farmproduce(nut)          'Fraction of a given nutrient coming fr
      om farm produce'
 260   
 261   
 262  * livestock parameters
 263    p_rateFert(aaact,type,inten)              'fertility rate, young born pe
      r female adult per month'
 264    p_mreprodf(aaact,type,inten)              'number of males reproduction 
      animals per female breeder'
 265    p_sexratio(aaact,type,inten)              'birth ratio male and female'
 266    p_survivalrate(aaact,type,inten)          'survival rate,% of livestock 
      that survive each year'
 267    p_grad(aaact,type,inten)                  'months in class, used for liv
      estock dynamics, for example a young animal is in young class for X months
      , the moves to weaner class (aaact)'
 268    p_mort(aaact,type,minten)                 'fraction of animals that die 
      (monthly)'
 269    p_gain(aaact,type,inten)                  'Average daily gain for a give
      n animal (kg/head/day)'
 270    p_milkprod(aaact,type,inten)              'milk produced per adult femal
      e (kg/head/day)'
 271    p_salesw(aaact,type,inten)                'sales weight of a given anima
      l'
 272    p_dress_pct(aaact,type,inten)             'dressing percentage of aninal
       (expressed as fraction)'
 273   
 274  * starting livestock numbers
 275    v0_aactLev(hh,aaact,type,inten,minten)    'parameter used to specify liv
      estock numbers in 1st period of each iteration'
 276   
 277  * starting feed balance
 278    p_s(hh,feed)                              'starting feed balance in kg'
 279   
 280  * labour demand
 281    p_labour_lives(m,inten,aaact,type)             'labour demand for each a
      ctivity in each season and intensification level across households'
 282    p_labourdemcrop(c,m)                            'labour requirements for
       crop activities ()'
 283   
 284   
 285  * prices
 286    p_milkPrice                                     'Price of milk (lc/l)'
 287    p_milkPrice_contract                            'Price of milk under a b
      uyer-agreement (lc/l)'
 288    p_meatPrice                                     'Price of meat (lc/kg)'
 289    p_salesPrice(hh,aaact)                          'Sales price of a given 
      animal (lc/head)'
 290    p_purchPrice(hh,aaact)                          'Purchase price of a giv
      en animal (lc/head)'
 291    p_labourPrice(hh)                               'Hired labour price (lc/
      hour)'
 292    p_feedPrice(feed)                               'Feed prices (for purcha
      sed feeds) in lc per kg'
 293  *  p_buyPrice(aaact,type,inten)                   'buy price of livestock'
 294    p_crop_sell_price(hh,y,c)                        'Sell price of crops (l
      c/kg)'
 295   
 296   
 297  *nutrient properties
 298    p_dryMatter(feed)
 299    p_grossEnergy(feed)
 300    p_netEnergy(feed)
 301    p_digestibleEnergy(feed)
 302    p_crudeProtein(feed)
 303    p_ADF(feed)
 304    p_NDF(feed)
 305  ;
 306   
 307  **---- Household parameters
 308   
 309  * quantity of household dependents
 310  p_hhold_members(hh,hhold_member)=hhold_size(hhold_member,hh);
 311   
 312  *- Financial parameters
 313  p_offFarmIncome(hh)=offfarm_income(hh)  ;
 314  p_offFarm_wage(hh)=3000;
 315  p_cropcosts(hh,c)=crop_costs(hh,c) ;
 316  p_cash(hh)  = start_cash(hh)  ;
 317  p_labourPrice(hh)= labour_rate(hh,'lives');
 318  p_maintExpense(hh,aaact,type,minten)= maintenanceExpense(hh,aaact,type,min
      ten);
 319   
 320   
 321   
 322  *- Crop and forage parameters
 323  * rangeland available in hectares
 324  p_rangeland(hh,y)= rangeland('rangeland',hh);
 325   
 326  *arable land available in hectares
 327  p_arable_land(hh,y)=arable_land(hh);
 328   
 329  *total land available in hectares
 330  p_total_land(hh,y)=total_ag_land(hh);
 331   
 332  * crop and forage yields (Mg/ha)
 333  p_yldCrop(hh,c,m)=crop_yield(c,hh,m);
 334  p_forage_yield(m)=rangeland_yield(m);
 335   
 336   
 337  **---- Model parameters
 338   
 339  * fertility (calving) rate of adult females
 340  p_rateFert(aaact,type,inten)=  prodparams (aaact,type,inten,'p_rateFert');
 341  *
 342  p_mreprodf(aaact,type,inten)=  prodparams (aaact,type,inten,'p_mreprodf');
 343  * ratio of male to female reproductive animals (assumed 0.5)
 344  p_sexratio(aaact,type,inten)=  prodparams (aaact,type,inten,'p_sexratio');
 345   
 346  * rate at which animals graduate to new class
 347  p_grad(aaact,type,inten)=prodparams (aaact,type,inten,'graduatetonextclass
      ');
 348  * mortality rate
 349  p_mort(aaact,type,minten)=mortality(aaact,type,minten)/12 ;
 350  p_transferrate=1;
 351  p_gain(aaact,type,inten)=prodparams (aaact,type,inten,'adg');
 352  * milk production (kg)
 353  p_milkprod(adultf,type,inten)=prodparams(adultf,type,inten,'milkprod');
 354   
 355  * sales weight (kg)
 356  p_salesw(aaact,type,inten)=prodparams (aaact,type,inten,'fnweight');
 357   
 358   
 359  * livestock numbers
 360  v0_aactLev(hh,aaact,type,inten,minten)=startlivestock(hh,aaact,type,inten,
      minten,'startvalue');
 361   
 362  * starting feed balance (kg)
 363  p_s(hh,feed)= startfeed(hh,feed, 'p_s');
 364   
 365  * labour requirements
 366  p_labour_lives(m,inten,aaact,'dairy')=labourdata(m,inten,aaact,'dairy');
 367  p_labourdemcrop(c,m)=crop_labour(c,m);
 368   
 369  * prices
 370  p_milkPrice=prices_milk;
 371  p_milkPrice_contract=prices_milk_contract;
 372  p_meatPrice=prices_meat;
 373  p_feedPrice(feed)= 0.75*prices_feed(feed);
 374  p_crop_sell_price(hh,y,c)=crop_price(c,hh)  ;
 375  p_salesPrice(hh,aaact)=prices_lives(aaact,'sell') ;
 376  p_purchPrice(hh,aaact_imp)=0.8*prices_lives(aaact_imp,'buy') ;
 377  p_purchPrice(hh,aaact_loc)=prices_lives(aaact_loc,'buy') ;
 378  p_labourPrice(hh)= labour_rate(hh,'lives');
 379   
 380   
 381  * feed nutrient properties
 382  p_grossEnergy(feed)=cropnutrientsdata('grossenergy',feed) ;
 383  p_dryMatter(feed)=cropnutrientsdata('drymatter',feed) ;
 384  p_netEnergy(feed)=cropnutrientsdata('netenergy',feed) ;
 385  p_digestibleEnergy(feed)=cropnutrientsdata('digestibility',feed)*cropnutri
      entsdata('grossenergy',feed) ;
 386  p_crudeProtein(feed)=cropnutrientsdata('crudeprotein',feed) ;
 387  p_ADF(feed)=cropnutrientsdata('ADF',feed);
 388  p_NDF(feed)=cropnutrientsdata('NDF',feed)  ;
 389   
 390   
 391   
 392  * human nutrition related parameters
 393  p_nutrientrequirement(hh,'kcal')=2500;
 394  p_nutrientproperty(food,'kcal')=5000;
 395  p_FRAC_farmproduce(nut)=0.2;
 396   
 397  **-management or biophysical related parameters
 398  p_harvestindex(food)=harvest_index(food);
 399  p_res_FRAC_soil(hh,food)=0.5;
 400   
 401   
 402  ** -- calculate parameters off of raw data
 403  *calculate monhtly home labour availability based on number of household m
      embers of specific age categories
 404  p_labouravailablehome(hh,y,m) = 4*(2*p_hhold_members(hh,'under_15') + 3.5*
      p_hhold_members(hh,'over_65') + 7*p_hhold_members(hh,'adult'))   ;
 405   
 406  *convert actual household members to adult equivalents
 407  p_hhold_adult_equivalents(hh)=0.5*p_hhold_members(hh,'under_15') + p_hhold
      _members(hh,'over_65') + p_hhold_members(hh,'adult');
 408   
 409   
 410   
 411   
 412   
 413   
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\data\ghg_parameters.gms
 415  ** -- Greenhouse gas estimation parameters
 416   
 417  Parameters
 418  *data load in
 419  MCF
 420  B0
 421  EF_3
 422  EF_4
 423  EF_5
 424  FRAC_leach
 425  FRAC_vol
 426  soil_N2O_off_farm
 427  soil_N2O
 428  C_storage_land
 429  CO2_Fossil_Fuel
 430  allocation_factor
 431   
 432  *parameters as they appear in the model code
 433  ** manure related parameters
 434  p_MCF(breed)                        'Methane conversion factor'
 435  p_B0                                'Methane producing capacity'
 436  p_EF_3                              'Emission factor for manure nitrous ox
      ide (fraction)'
 437  p_EF_4                              'Emission factor for indirect manure n
      itrous oxide (volatilization) (fraction)'
 438  p_EF_5                              'Emission factor for indirect manure n
      itrous oxide (leaching) (fraction)'
 439  p_FRAC_leach                        'Fraction of manure N that is leached 
      (fraction)'
 440  p_FRAC_vol                          'Fraction of manure N that is volatili
      zed (fraction)'
 441   
 442   
 443  * soil N2O related parameters
 444  p_nitrous_oxide_offfarm(feed)       'Nitrous oxide emissions from feeds pu
      rchased off farm (kg N2O/ha/year)'
 445  p_nitrous_oxide(c)                  'Nitrous oxide emissions from cropland
       and grassland on farm (kg N2O/ha/yr)'
 446  p_alloc_factor(non_fodder)          'Allocation factor for non fodder crop
      s'
 447   
 448  *energy related CO2 emissions
 449  p_fossil_fuel_emissions(feed_off_farm) 'Embodied emissions from feed produ
      ction (kg CO2eq/Mg feed)'
 450   
 451  * LUC related parameters
 452  p_land_C                            'Mean carbon storage content of land (
      Mg C/ha)'
 453  ;
 454   
 455   
GDXIN   C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_model\
        dairyclimatemodel2\data/ghg_params.gdx
--- LOAD  MCF = 1:MCF
--- LOAD  B0 = 2:B0
--- LOAD  EF_3 = 3:EF_3
--- LOAD  EF_4 = 4:EF_4
--- LOAD  EF_5 = 5:EF_5
--- LOAD  FRAC_leach = 6:FRAC_leach
--- LOAD  FRAC_vol = 7:FRAC_vol
--- LOAD  C_storage_land = 10:C_storage_land
--- LOAD  CO2_Fossil_Fuel = 11:CO2_Fossil_Fuel
--- LOAD  allocation_factor = 12:allocation_factor
--- LOAD  soil_N2O_off_farm = 9:soil_N2O_off_farm
--- LOAD  soil_N2O = 8:soil_N2O
 471   
 472   
 473  p_MCF('local')=MCF('local');
 474  p_MCF('improved') = MCF('improved') ;
 475  p_B0 = B0;
 476  p_EF_3=EF_3;
 477  p_EF_4=EF_4;
 478  p_EF_5=EF_5;
 479  p_FRAC_leach =FRAC_leach;
 480  p_FRAC_vol=FRAC_vol;
 481  p_land_C=C_storage_land ;
 482  p_fossil_fuel_emissions(feed_off_farm)=CO2_Fossil_Fuel(feed_off_farm);
 483  p_alloc_factor(non_fodder)=allocation_factor(non_fodder);
 484  p_nitrous_oxide_offfarm(feed_off_farm)=soil_N2O_off_farm(feed_off_farm);
 485  p_nitrous_oxide(c)=soil_N2O(c);
 486   
 487   
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\data\nutr_parameters.gms
 489   
 490  **------------------------ Nutrition and cattle diet related parameters
 491   
 492  Parameters
 493  energyrequirements
 494  proteinrequirements
 495  energy_gain
 496  p_NE_gain(hh,aaact,type,inten,minten,y,m)  'Daily requirement of net energ
      y for gain (MJ/hd/d)'
 497  p_Energy_req(aaact,type,inten,minten)  'energy requirement  (MJ/head/day)'
 498  p_Protein_req(aaact,type,inten,minten)  'protein requirement (kg/head/day)
      '
 499   
 500  ;
 501   
 502   
GDXIN   C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_model\
        dairyclimatemodel2\data/nutrient_requirements.gdx
--- LOAD  energyrequirements = 1:energyrequirements
--- LOAD  proteinrequirements = 2:proteinrequirements
--- LOAD  energy_gain = 3:energy_gain
 509   
 510  p_Energy_req(aaact,'dairy',inten,minten)=energyrequirements('hh1',aaact,'d
      airy',inten,minten,'energyrequirement');
 511  p_Protein_req(aaact,'dairy',inten,minten)=proteinrequirements('hh1',aaact,
      'dairy',inten,minten,'proteinrequirement');
 512   
 513   
 514  * this line converts metabolisable energy requirements for gain to net ene
      rgy required for gain. this procedure needs to be updated
 515  p_NE_gain(hh,aaact,type,inten,minten,y,m)=1.5*energy_gain(hh,aaact,type,in
      ten,minten,'energyrequirement');
 516   
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\data\scenario_parameters.gms
 518  ** Scenario or simulation specific parameters
 519  Scalar
 520  p_r  'rate of return used in the objective function'   /0.04/
 521  ;
 522   
 523  Parameters
 524  * Scenario related parameters
 525    p_r_loan(hh) 'Interest rate on loan'
 526    p_amort_period(hh) 'Amortization period for the loan (years)'
 527   
 528   
 529   
 530   p0_graze_dmd(hh,y)                  'Base level of grazing land (ha/hh)'
 531   p0_feed_crop_land(hh,y2)             'Initial amount of land dedicated to
       feed crops for livestock (ha/hh)'
 532  ;
 533   
 534   
 535  *$call "gdxxrw.exe data/scenario_params.xlsx o=data/scenario_params.gdx in
      dex=index!A3"
 536  *$GDXIN "data/scenario_params.gdx"
 537  *$LOAD
 538   
 539  p_amort_period(hh)=10;
 540  p_r_loan(hh)  =0.15;
 541   
 542   
 543   
 544  p0_feed_crop_land(hh,y2)=0.025;
 545  p0_graze_dmd(hh,y)=4;
 546   
 547   
 548  display
 549  v0_aactLev,
 550  p_B0,
 551  p_FRAC_leach,
 552  p_FRAC_vol,
 553  p_EF_5,
 554  p_EF_4,
 555  p_MCF,p_ADF,p_crudeProtein,
 556  p_Energy_req,
 557  p_digestibleEnergy,
 558  p_grossEnergy,
 559  p_crop_sell_price,
 560  offfarm_income,
 561  p_offFarmIncome,
 562  p_forage_yield,
 563  rangeland_yield,
 564  p_yldCrop,
 565  p_s,
 566  startfeed,
 567  p_netEnergy,
 568  p_dryMatter,
 569  p_transferrate
 570  p_fossil_fuel_emissions,
 571  p_meatPrice,
 572  p_purchPrice,
 573  p_labourPrice;
 574  *$exit
 575   
 576   
 577   
 578  *define scenarios and model versions
 585   
 586   
 587  ** Price scenarios
 588  *p_feedPrice(feed)=(0.75)*prices_feed(feed);
 589  *p_purchPrice(hh,aaact)=0.75*prices_lives(aaact,'buy') ;
 590   
 591  *p_milkPrice('Scen')=  prices_milk;
 592  *p_feedPrice(feed,'Scen3')=prices_feed(feed)*(0.75);
 593  *p_purchPrice(hh,aaact,'Scen4')=prices_lives(hh,aaact,'buy')*(0.75);
 594   
 595   
 596  * Crop module
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\crop_module.gms
      This module includes all equations relating to the crop enterprise, includ
      ing crop areas, crop production, labour requirements for cropping activiti
      es, and accounting equations for
      different crop products (e.g. maize as silage vs. grain, residues)
       
 603   
 604   
 605  Parameters
 606  p_yldCrop(hh,c,m)                  'Crop yield (kg/ha/month)'
 607  p_arable_land(hh,y)                'Arable land per household (ha)'
 608  p_total_land(hh,y)                 'Total land per household (ha)'
 609  p_labourdemcrop(c,m)               'Total labour requirements for crop act
      ivties (person-days/household/month)'
 610  p_crop_sell_price(hh,y,c)          'Selling price of crops (TSh/kg)'
 611  p_cropcosts(hh,c)                  'Costs of crop production (TSh/ha/year)
      '
 612  p_yield_feed_crop(feed_off_farm)   'Yield of feed crops produced off farm 
      (kg/ha)'
 613  ;
 614  p_yield_feed_crop(feed_off_farm)=crop_yield_off_farm(feed_off_farm,'yield'
      );
 615   
 616  Variables
 617  v_prdCrop(hh,y,c,m)                     'Crop production (Mg/m)'
 618  v_crop_sales_cash(hh,y,cash)            'Cash crops (Mg)'
 619  v_crop_food(hh,y,food)                  'Food crops produced (Mg)'
 620  v_crp_feed(hh,y,feed,m)                 'Fodder crops produced (Mg)'
 621  v_crp_cons(hh,y,food,m)                 'kg of food crop consumed per mont
      h by the household (kg/hh/year)'
 622  v_totallabourdemcrop(hh,y,m)            'Monthly labour demand for croppin
      g activities (person-days per month)'
 623  v_residuesfieldm(hh,residues,y,m)       'Residues left on field (kg)'
 624  v_residues(hh,y,residues,m)             'Residues produced (kg/year)'
 625  v_residuesfeedm(hh,residues,year,m)     'residues of feed coming from on f
      arm production'
 626  v_feed_crop_land(hh,y)                  'Total land for feed crops (ha/hh/
      year)'
 627  v_feed_crop_land_off_farm(hh,y)         'Total land for feed crops produce
      d off farm (ha/year)'
 628  v_feed_crop_land_on_farm(hh,y)          'Total land for feeds crops produc
      ed on farm (ha/year)'
 629  ;
 630   
 631  Nonnegative Variables
 632  v_areaCrop(hh,y,c)            'Area dedicated to crop c (ha/hh/year)'
 633  ;
 634   
 635  ** Variable bounds
 636  v_areaCrop.lo(hh,y,c)=0;
 637   
 638  Equations
 639  e_arable_land                     'Arable land constraint (for crops, excl
      uding pasture)'
 640  e_total_land_holdings             'Total land constraint (for all crops pl
      us pasture)'
 641  e_crp_prd                         'Define crop production (Mg/ha/yr) based
       on area and yield'
 642  e_crp_fate_food_byprd             'Define the quantity of residues produce
      d (Mg)'
 643  e_food_silage                     'Define amount of maize being used as ma
      ize silage'
 644  e_residues_prod                   'Accounting equation for the fate of res
      idues'
 645  e_residues_field                  'Define quantity of residues left on fie
      ld (Mg)'
 646  e_labourdemand                    'Define the labour required for cropping
       activities (person-days per household per month)'
 647  ;
 648   
 649   
 650  e_arable_land(hh,y)..                            Sum(crop_not_pasture(c),v
      _areaCrop(hh,y,c)) =e=   p_arable_land(hh,y)    ;
 651   
 652  e_total_land_holdings(hh,y)..                    Sum(c,v_areaCrop(hh,y,c))
              =l= p_total_land(hh,y) ;
 653   
 654  e_crp_prd(hh,y,c,m)..                            v_areaCrop(hh,y,c)*p_yldC
      rop(hh,c,m)/1000     =e=  v_prdCrop(hh,y,c,m)  ;
 655   
 656  e_crp_fate_food_byprd(hh,y,residues,m)..         v_residues(hh,y,residues,
      m) =e= Sum(crop_residue(food,residues), (v_prdCrop(hh,y,food,m)/p_harvesti
      ndex(food)) - v_prdCrop(hh,y,food,m) )/12;
 657   
 658  e_food_silage(hh,y,m)..                          v_prdCrop(hh,y,'maize',m)
       =e=   v_crp_cons(hh,y,'maize',m) + Sum(crop_silage('maize','maize_silage'
      ),v_crp_feed(hh,y,'maize_silage',m));
 659   
 660  e_residues_prod(hh,y,residues,m)..               v_residues(hh,y,residues,
      m) =e=   v_residuesfeedm(hh,residues,y,m) + v_residuesfieldm(hh,residues,y
      ,m);
 661   
 662  e_residues_field(hh,y,residues,m)..              v_residuesfieldm(hh,resid
      ues,y,m) =e=   Sum(crop_residue(food,residues), v_residues(hh,y,residues,m
      )*p_res_FRAC_soil(hh,food));
 663   
 664  e_labourdemand(hh,y,m)..                         Sum((c),v_areaCrop(hh,y,c
      )*p_labourdemcrop(c,m))    =e= v_totallabourdemcrop(hh,y,m);
 665   
 666   
 667   
 668   
 669  Model cropMod
 670  /
 671  e_arable_land
 672  e_total_land_holdings
 673  e_crp_prd
 674  e_crp_fate_food_byprd
 675  e_food_silage
 676  e_residues_prod
 677  e_residues_field
 678  e_labourdemand
 679  /
 680   
 681   
 682  * Livestock module
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\livestock_module.gms
 684   
      This module includes all the livestock related equations, including milk a
      nd meat production based on the quantity of adult females and animals bein
      g culled, feed intake,
      feed balance equations, specification of minimum energy and protein requir
      ements, livestock labour, livestock nutrient and dry matter intake, and li
      vestock related land use
      (e.g. rangeland requirements). Different levels of livestock productivity 
      in this module are handled using the 'intensity' index. A given animal can
       be classifed as intensive,
      medium, or extensive, each one with corresponding values for milk yield (i
      n the case of an adult female), and daily live weight gain (in the case of
       a growing animal).
      Depending on what intensity level an animal is categorized as, the daily r
      equirement for energy and protein is specifed in accordance with this anim
      al's required nutrient intake.
       
       
 695   
 696   
 697   
 698  Variables
 699    v_dmd(hh,y,m,aaact,type,inten,minten)                     'Monthly mean 
      dry matter digestibility (g/100 g DM)'
 700    v_ADF(hh,y,m,aaact,type,inten,minten)                     'Acid detergen
      t fibre intake (g/100g DM)'
 701    v_NDF(hh,y,m,aaact,type,inten,minten)                     'Neutral deter
      gent fibre intake (g/100g DM)'
 702    v_diet_N(hh,y,m,aaact,type,inten,minten)                  'Dietary N int
      ake (g/100g DM)'
 703    v_prodQmilk(hh,aaact,type,inten,year,m)                   'Milk produced
       (kg/month/animal)'
 704    v_prodQmeat(hh,aaact,type,inten,year,m)                   'Meat produced
       (kg/month/animal)'
 705  ;
 706   
 707   
 708  Nonnegative variables
 709    v_totallabourdemlive(hh,year,m)                           'Person-days o
      f labour/month/herd'
 710    v_grossEnergy(hh,aaact,type,inten,minten,year,m)          'Gross energy 
      intake per animal per day (MJ/hd/d)'
 711    v_netEnergy(hh,aaact,type,inten,minten,year,m)            'Net energy re
      quirement (MJ/hd/d)'
 712    v_digestibleEnergy(hh,aaact,type,inten,minten,y,m)        'Digestible en
      ergy intake per animal per day (MJ/hd/d)'
 713   
 714    v_dryMatterIntake(hh,y,m,aaact,type,inten)           'Dry matter intake 
      (kg/hd/d)'
 715    v_graze_dmd(hh,y)                                    'Estimated demand f
      or grazing land (ha/hh/yr)'
 716    v_pasture_land(hh,y)                                 'Amount of land ded
      icated to pasture production (ha/hh/yr)'
 717    v_feedbalance(hh,feed,year,m)                        'kg feed carried ov
      er to next month'
 718    v_feedbuy(hh,feed_off_farm,y,m)                      'kg of a feed purch
      ased in a given month (kg/hh/month)'
 719    v_fdcons(hh,aaact,type,inten,y,m,feed)               'Amount of a specif
      ic feed consumed per animal per day (kg as fed)'
 720    v_feedons(hh,feed,year,m)                            'Total kg of a feed
       consumed per month (for all cattle) (as fed) (kg/hh/month)'
 721   
 722    v_aactLev(hh,aaact,type,inten,minten,year,m)          'Livestock activit
      y level (head)'
 723    v_aactLevsell(hh,aaact,type,inten,minten,year,m)      'Sell livestock (h
      ead)'
 724    v_aactLevbuy(hh,aaact,type,inten,minten,year,m)       'Buy livestock (he
      ad)'
 725  ;
 726   
 727  *fix starting values for livestock numbers in first month and first year
 728  v_aactLev.fx(hh,aaact,type,inten,minten,'y01','m01')=v0_aactLev(hh,aaact,t
      ype,inten,minten);
 729   
 730  v_aactLevbuy.fx(hh,young,type,inten,minten,y,m)=0    ;
 731  v_aactLevsell.fx(hh,young,type,inten,minten,y,m)=0  ;
 732  v_aactLevbuy.fx(hh,weaner,type,inten,minten,y,lastm)=0    ;
 733  v_aactLevsell.fx(hh,weaner,type,inten,minten,y,lastm)=0  ;
 734   
 735  *v_aactLevbuy.lo(hh,weaner,type,inten,minten,y,m)=    ;
 736  *v_aactLevsell.lo(hh,weaner,type,inten,minten,y,m)=0  ;
 737   
 738   
 739  *v_aactLevbuy.fx(hh,aaact,type,inten,minten,y,lastm)=0;
 740  *v_aactLevsell.fx(hh,aaact,type,inten,minten,y,lastm)=0;
 741   
 742   
 743   
 744   
 745  *v_fdcons.fx(hh,aaact_imp,type,inten,y,m,grazed)=0;
 746   
 747   
 748   
 749   
 750   
 751  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 752  * #3 Equations  (all variables are declared in terms of sets specifically 
      defined to this model scenario)
 753  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 754  Equations
 755  *-- production equations
 756     e_milkproduction   'milk produced from all animals in a given month (kg
      /hh/month)'
 757     e_meatproduction   'meat produced from slaughtered animals in a given m
      onth (kg/hh/month)'
 758   
 759  *-- Feed balance equations
 760     e_feedbal           'livestock feed balance accounting equation (kg per
       month)'
 761     e_feedons           'total amount of a feed consumed per month (from al
      l animals)'
 762     e_feed_purchased    'total amount of feeds purchased per month (kg/mont
      h/hhold)'
 763   
 764  *-- Labor equation
 765     e_laborAA           'labor use for livestock activities (person-days/hh
      /month)'
 766   
 767  *-- Rangeland requirement and availability
 768     e_grazing_demand             'Demand for grazing land by cattle (ha/hh/
      year)'
 769     e_rangeland                  'Availability of rangeland for grazing (ha
      /hh/year)'
 770     e_pasture                    'Land dedicated to pasture production (ha/
      hh/year)'
 771   
 772   
 773  *-- Feed and nutrition equations
 774     e_feed_intake                 'Feed intake equation (as fed)'
 775     e_dryMatterIntake             'Dry matter intake equation (from Goopy e
      t al. 2018)'
 776     e_dry_matter_digestibility    'Dry matter digestibility (from Oddy et a
      l. 1983)'
 777     e_energySource                'Specify required energy intake'
 778     e_grossEnergy                 'Calculate gross energy intake'
 779     e_netenergy                   'Calculate net energy'
 780     e_digestibleEnergy            'Calculate digestible energy'
 781     e_diet_N                      'Calculate diet N intake'
 782     e_diet_ADF                    'Calculate diet ADF intake'
 783     e_diet_NDF                    'Calculate diet NDF intake'
 784     e_min_protein                 'Minimum protein intake'
 785  ;
 786   
 787   
 788  e_milkproduction(hh,aaact,type,inten,y,m)..   v_prodQmilk(hh,aaact,type,in
      ten,y,m) =e= p_milkprod(aaact,type,inten)*30*Sum(minten,v_aactLev(hh,aaact
      ,type,inten,minten,y,m));
 789   
 790  e_meatproduction(hh,aaact,type,inten,y,m)..    v_prodQmeat(hh,aaact,type,i
      nten,y,m)  =e= 0.6*p_salesw(aaact,type,inten)*Sum(minten,v_aactLevsell(hh,
      aaact,type,inten,minten,y,m));
 791  *p_dress_pct(aaact,type,inten)*
 792  e_laborAA(hh,y,m)..            sum((aaact,inten,type,minten),v_aactLev(hh,
      aaact,type,inten,minten,y,m)*p_labour_lives(m,inten,aaact,type))   =e= v_t
      otallabourdemlive(hh,y,m);
 793   
 794  e_feedons(hh,feed,y,m)..                            v_feedons(hh,feed,y,m)
       =e= 30*sum((aaact,type,inten,minten),v_aactLev(hh,aaact,type,inten,minten
      ,y,m)*v_fdcons(hh,aaact,type,inten,y,m,feed));
 795   
 796  e_feed_purchased(hh,feed_off_farm,y,m)..            v_feedbuy(hh,feed_off_
      farm,y,m) =e= v_feedons(hh,feed_off_farm,y,m);
 797   
 798  e_feedbal(hh,ration,y,m).. v_feedbalance(hh,ration,y,m-1)*(p_transferrate)
      $(ord (m) gt 1) + v_feedbalance(hh,ration,y-1,'m12')*(p_transferrate)$((or
      d (y) gt 1) and (ord(m) eq 1)) + p_s(hh,ration)$((ord(m) eq 1) and (ord(y)
       eq 1)) + Sum(residues_ration(residues,ration),v_residuesfeedm(hh,residues
      ,y,m))*1000 + v_crp_feed(hh,y,'maize_silage',m)*1000 +  Sum((fodder_feed(f
      odder,ration)),v_prdCrop(hh,y,fodder,m))*1000 + Sum((feedbuy_ration(ration
      ,feed_off_farm)),v_feedbuy(hh,feed_off_farm,y,m))
 799  - v_feedons(hh,ration,y,m) =e=  v_feedbalance(hh,ration,y,m);
 800   
 801  e_grazing_demand(hh,y)..                           v_graze_dmd(hh,y) =e= (
      1/1000)*Sum((aaact,type,inten,minten,m),30*(v_aactLev(hh,aaact,type,inten,
      minten,y,m)*p_dryMatter('grass')*v_fdcons(hh,aaact,type,inten,y,m,'grass')
      ))/sum(m,p_forage_yield(m)) ;
 802   
 803  e_rangeland(hh,y)..                                v_graze_dmd(hh,y) =l= p
      _rangeland(hh,y);
 804   
 805  e_pasture(hh,y)..                                 v_pasture_land(hh,y) =e=
       (1/1000)*Sum((aaact,type,inten,minten,m),30*(v_aactLev(hh,aaact,type,inte
      n,minten,y,m)*p_dryMatter('grass_hay')*v_fdcons(hh,aaact,type,inten,y,m,'g
      rass_hay')))/(12*p_forage_yield('m01')) ;
 806   
 807  e_dryMatterIntake(hh,y,m,aaact,type,inten)..      v_dryMatterIntake(hh,y,m
      ,aaact,type,inten)   =e=  Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed
      )*p_dryMatter(feed));
 808   
 809  e_energySource(hh,y,m,aaact,type,inten)$(ord(m) gt 1)..          p_Energy_
      req(aaact,type,inten,'ext')*(1/0.9)   =e= Sum((feed),v_fdcons(hh,aaact,typ
      e,inten,y,m,feed)*p_dryMatter(feed))*18.1*v_dmd(hh,y,m,aaact,type,inten,'e
      xt')/100;
 810   
 811  e_dry_matter_digestibility(hh,y,m,aaact,type,inten,minten)..            v_
      dmd(hh,y,m,aaact,type,inten,minten) =e= 83.58 - 0.824*v_ADF(hh,y,m,aaact,t
      ype,inten,minten) + 2.626*v_diet_N(hh,y,m,aaact,type,inten,minten) ;
 812   
 813  e_min_protein(hh,y,m,aaact,'dairy',inten,minten)$(ord(m) gt 1)..          
       Sum((feed),v_fdcons(hh,aaact,'dairy',inten,y,m,feed)*p_dryMatter(feed)*p_
      crudeProtein(feed))*0.9     =g= .1* p_Protein_req(aaact,'dairy',inten,mint
      en);  !! protein requirments need to be updated
 814   
 815  e_grossEnergy(hh,y,m,aaact,type,minten,inten)..            v_grossEnergy(h
      h,aaact,type,inten,minten,y,m)   =e= Sum((feed),v_fdcons(hh,aaact,type,int
      en,y,m,feed)*p_dryMatter(feed)*p_grossEnergy(feed));
 816   
 817  e_digestibleEnergy(hh,y,m,aaact,type,minten,inten)..       v_digestibleEne
      rgy(hh,aaact,type,inten,minten,y,m) =e= Sum((feed),v_fdcons(hh,aaact,type,
      inten,y,m,feed)*p_dryMatter(feed)*p_digestibleEnergy(feed)); ;
 818   
 819  e_diet_ADF(hh,y,m,aaact,type,inten,minten)..       v_ADF(hh,y,m,aaact,type
      ,inten,minten)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryMatt
      er(feed)) =e=   100*Sum(feed,v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryM
      atter(feed)*p_ADF(feed)) ;
 820   
 821  e_diet_NDF(hh,y,m,aaact,type,inten,minten)..       v_NDF(hh,y,m,aaact,type
      ,inten,minten)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryMatt
      er(feed)) =e=   100*Sum(feed,v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryM
      atter(feed)*p_NDF(feed)) ;
 822   
 823  e_diet_N(hh,y,m,aaact,type,inten,minten)..          v_diet_N(hh,y,m,aaact,
      type,inten,minten)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dry
      Matter(feed)) =e=  100*Sum(feed,v_fdcons(hh,aaact,type,inten,y,m,feed)*p_d
      ryMatter(feed)*p_crudeProtein(feed)/6.25)  ;
 824   
 825   
 826  option limrow=0; option limcol=0;
 827   
 828   
 829   
 830  Model livesmod
 831   
 832  /
 833     e_milkproduction
 834     e_meatproduction
 835     e_feedbal
 836     e_feedons
 837     e_feed_purchased
 838     e_laborAA
 839     e_pasture
 840  e_rangeland
 841     e_dry_matter_digestibility
 842     e_grossEnergy
 843     e_digestibleEnergy
 844     e_diet_N
 845     e_diet_ADF
 846     e_diet_NDF
 847     e_dryMatterIntake
 848     e_grazing_demand
 849     e_energySource
 850     e_min_protein
 851  /
 852   
 853   
 854   
 855  * Livestock demographic module
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\demographic_module.gms
      This module calculates herd demographics throughout the model time period.
       
 861   
 862  Equations
 863  *-- Herd dynamics equations
 864     E_youngm_loc        'young balance each month excluding jan each year'
 865     E_youngy_loc        'from dec y-1 to jan y if y>1'
 866     E_youngm_loc2       'young balance each month excluding jan each year'
 867     E_fweanerm_loc      'female weaner balance each month excluding jan eac
      h year'
 868     E_fweanerm_loc2     'female weaner balance each month excluding jan eac
      h year'
 869     E_fweanery_loc      'from dec y-1 to jan y if y>1'
 870     E_mweanerm_loc      'male weaner balance each month excluding jan each 
      year'
 871     E_mweanerm_loc2     'male weaner balance each month excluding jan each 
      year'
 872     E_mweanery_loc      'from dec y-1 to jan y if y>1'
 873     E_adultfm_loc       'breeder balance each month excluding jan each year
      '
 874     E_adultfm_loc2      'breeder balance each month excluding jan each year
      '
 875     E_adultfy_loc       'breeder balance from dec y-1 to jan y if y>1'
 876     E_adultfy_loc2      'cow balanace when y > 1 and m > 1'
 877     E_adultfsold_loc    'must sell adults once reach end of productive life
      '
 878     E_adultfsold_loc2   'must sell adults once reach end of productive life
      '
 879     E_adultfsold_loc3   'must sell adults once reach end of productive life
      '
 880     E_reprod_loc1       'bull balance when y = 1 and m = 2'
 881     E_reprod_loc2       'bull balance when m > 2'
 882     E_reprod_loc3       'bull balance when y > 1 and m = 1'
 883   
 884   
 885     E_youngm_imp        'young balance each month excluding jan each year'
 886     E_youngm_imp2       'young balance each month excluding jan each year'
 887     E_youngy_imp        'from dec y-1 to jan y if y>1'
 888     E_fweanerm_imp      'female weaner balance each month excluding jan eac
      h year'
 889     E_fweanerm_imp2     'female weaner balance each month excluding jan eac
      h year'
 890     E_fweanery_imp      'from dec y-1 to jan y if y>1'
 891     E_mweanerm_imp      'male weaner balance each month excluding jan each 
      year'
 892     E_mweanerm_imp2     'male weaner balance each month excluding jan each 
      year'
 893     E_mweanery_imp      'from dec y-1 to jan y if y>1'
 894     E_adultfm_imp       'breeder balance each month excluding jan each year
      '
 895     E_adultfm_imp2      'breeder balance each month excluding jan each year
      '
 896     E_adultfy_imp       'breeder balance from dec y-1 to jan y if y>1'
 897     E_adultfy_imp2      'cow balanace when y > 1 and m > 1'
 898     E_adultfsold_imp    'must sell adults once reach end of productive life
      '
 899     E_adultfsold_imp2   'must sell adults once reach end of productive life
      '
 900     E_adultfsold_imp3   'must sell adults once reach end of productive life
      '
 901     E_reprod_imp1       'bull balance when y = 1 and m = 2'
 902     E_reprod_imp2       'bull balance when m > 2'
 903     E_reprod_imp3       'bull balance when y > 1 and m = 1'
 904   
 905     e_reprod           'minimum number of reproductive animals'
 906  ;
 907   
 908  ** YOUNG
 909  E_youngm_loc(hh,young_loc,type,y,m)$(ord(m) eq 2 and ord(y) eq 1)..
 910  Sum((inten,minten),v_aactLev(hh,young_loc,type,inten,minten,y,m))=e=
 911  Sum((inten,minten),
 912  v0_aactLev(hh,'adultf_loc',type,inten,minten)*p_rateFert('adultf_loc',type
      ,inten)*p_sexratio(young_loc,type,inten)+
 913  v0_aactLev(hh,young_loc,type,inten,minten)*(1-p_grad(young_loc,type,inten)
      )*(1-p_mort(young_loc,type,minten))
 914  )
 915  ;
 916   
 917  E_youngm_imp(hh,young_imp,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
 918  Sum((inten,minten),v_aactLev(hh,young_imp,type,inten,minten,y,m))=e=
 919  Sum((inten,minten),
 920  v0_aactLev(hh,'adultf_imp',type,inten,minten)*p_rateFert('adultf_imp',type
      ,inten)*p_sexratio(young_imp,type,inten)+
 921  v0_aactLev(hh,young_imp,type,inten,minten)*(1-p_grad(young_imp,type,inten)
      )*(1-p_mort(young_imp,type,minten))
 922  )
 923  ;
 924   
 925  E_youngm_loc2(hh,young_loc,type,y,m)$(ord(m) gt 2 )..
 926  Sum((inten,minten),v_aactLev(hh,young_loc,type,inten,minten,y,m))=e=
 927  Sum((inten,minten),
 928  v_aactLev(hh,'adultf_loc',type,inten,minten,y,m-1)*p_rateFert('adultf_loc'
      ,type,inten)*p_sexratio(young_loc,type,inten)+
 929  v_aactLev(hh,young_loc,type,inten,minten,y,m-1)*(1-p_grad(young_loc,type,i
      nten))*(1-p_mort(young_loc,type,minten))
 930  )
 931  ;
 932   
 933  E_youngm_imp2(hh,young_imp,type,y,m)$(ord(m) gt 2 )..
 934  Sum((inten,minten),v_aactLev(hh,young_imp,type,inten,minten,y,m))=e=
 935  Sum((inten,minten),
 936  v_aactLev(hh,'adultf_imp',type,inten,minten,y,m-1)*p_rateFert('adultf_imp'
      ,type,inten)*p_sexratio(young_imp,type,inten)+
 937  v_aactLev(hh,young_imp,type,inten,minten,y,m-1)*(1-p_grad(young_imp,type,i
      nten))*(1-p_mort(young_imp,type,minten))
 938  )
 939  ;
 940   
 941  E_youngy_loc(hh,young_loc,type,y,'m01')$(ord(y) gt 2 )..
 942  sum((inten,minten),v_aactLev(hh,young_loc,type,inten,minten,y,'m01'))=e=
 943  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y-1,'m12')*
      p_rateFert('adultf_loc',type,inten)*p_sexratio(young_loc,type,inten)
 944  + v_aactLev(hh,young_loc,type,inten,minten,y-1,'m12')*(1-p_grad(young_loc,
      type,inten))
 945  );
 946   
 947  E_youngy_imp(hh,young_imp,type,y,'m01')$(ord(y) gt 2)..
 948  sum((inten,minten),v_aactLev(hh,young_imp,type,inten,minten,y,'m01'))=e=
 949  sum((inten,minten),
 950  v_aactLev(hh,'adultf_imp',type,inten,minten,y-1,'m12')*p_rateFert('adultf_
      imp',type,inten)*p_sexratio(young_imp,type,inten)+
 951  v_aactLev(hh,young_imp,type,inten,minten,y-1,'m12')*(1-p_grad(young_imp,ty
      pe,inten))*(1-p_mort(young_imp,type,minten))
 952  );
 953  ;
 954   
 955  ** WEANERS
 956   
 957  E_fweanerm_loc(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
 958  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m))=e=
 959  Sum((inten,minten),
 960  v0_aactLev(hh,'youngf_loc',type,inten,minten)*p_grad('youngf_loc',type,int
      en)
 961  +v0_aactLev(hh,'weanerf_loc',type,inten,minten)*(1-p_grad('weanerf_loc',ty
      pe,inten))*(1-p_mort('weanerf_loc',type,minten))
 962  +v_aactLevbuy(hh,'weanerf_loc',type,inten,minten,y,m-1)
 963  -v_aactLevsell(hh,'weanerf_loc',type,inten,minten,y,m-1)) ;
 964   
 965  E_fweanerm_imp(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
 966  *and sum(minten,v0_aactLev(hh,'weanerm_imp',type,inten,minten))
 967  sum((inten,minten),v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m))=e=
 968  sum((inten,minten),
 969  v0_aactLev(hh,'youngf_imp',type,inten,minten)*p_grad('youngf_imp',type,int
      en)
 970  +v0_aactLev(hh,'weanerf_imp',type,inten,minten)*(1-p_grad('weanerf_imp',ty
      pe,inten))*(1-p_mort('weanerf_imp',type,minten))
 971  +v_aactLevbuy(hh,'weanerf_imp',type,inten,minten,y,m-1)
 972  -v_aactLevsell(hh,'weanerf_imp',type,inten,minten,y,m-1))
 973  ;
 974   
 975  E_fweanerm_loc2(hh,type,y,m)$(ord(m) gt 2 )..
 976  *and sum(minten,v0_aactLev(hh,'weanerf_loc',type,inten,minten))
 977  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m))=e=
 978  sum((inten,minten),
 979  v_aactLev(hh,'youngf_loc',type,inten,minten,y,m-1)*p_grad('youngf_loc',typ
      e,inten)
 980  +v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m-1)*(1-p_grad('weanerf_lo
      c',type,inten))*(1-p_mort('weanerf_loc',type,minten))
 981  +v_aactLevbuy(hh,'weanerf_loc',type,inten,minten,y,m-1)
 982  -v_aactLevsell(hh,'weanerf_loc',type,inten,minten,y,m-1));
 983   
 984  E_fweanerm_imp2(hh,type,y,m)$(ord(m) gt 2 )..
 985  *and sum(minten,v0_aactLev(hh,'weanerf_imp',type,inten,minten))
 986  sum((inten,minten),v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m))=e=
 987  sum((inten,minten),
 988  v_aactLev(hh,'youngf_imp',type,inten,minten,y,m-1)*p_grad('youngf_imp',typ
      e,inten)
 989  +v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m-1)*(1-p_grad('weanerf_im
      p',type,inten))*(1-p_mort('weanerf_imp',type,minten))
 990  +v_aactLevbuy(hh,'weanerf_imp',type,inten,minten,y,m-1)
 991  -v_aactLevsell(hh,'weanerf_imp',type,inten,minten,y,m-1)
 992  );
 993   
 994  E_mweanerm_loc(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
 995  *and sum(minten,v0_aactLev(hh,'weanerm_loc',type,inten,minten))
 996  sum((inten,minten),v_aactLev(hh,'weanerm_loc',type,inten,minten,y,m))=e=
 997  sum((inten,minten),
 998  v0_aactLev(hh,'youngm_loc',type,inten,minten)*p_grad('youngm_loc',type,int
      en)*(1-p_mort('weanerm_loc',type,minten))
 999  +v0_aactLev(hh,'weanerm_loc',type,inten,minten)*(1-p_grad('weanerm_loc',ty
      pe,inten))
1000  +v_aactLevbuy(hh,'weanerm_loc',type,inten,minten,y,m-1)
1001  -v_aactLevsell(hh,'weanerm_loc',type,inten,minten,y,m-1));
1002   
1003  E_mweanerm_imp(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1004  * and sum(minten,v0_aactLev(hh,'weanerm_imp',type,inten,minten))
1005  sum((inten,minten),v_aactLev(hh,'weanerm_imp',type,inten,minten,y,m))=e=
1006  Sum((inten,minten),
1007  v0_aactLev(hh,'youngm_imp',type,inten,minten)*p_grad('youngm_imp',type,int
      en)*(1-p_mort('weanerm_imp',type,minten))
1008  +v0_aactLev(hh,'weanerm_imp',type,inten,minten)*(1-p_grad('weanerm_imp',ty
      pe,inten))
1009  +v_aactLevbuy(hh,'weanerm_imp',type,inten,minten,y,m-1)
1010  -v_aactLevsell(hh,'weanerm_imp',type,inten,minten,y,m-1));
1011   
1012  E_mweanerm_loc2(hh,type,y,m)$(ord(m) gt 2 )..
1013  *and sum(minten,v0_aactLev(hh,'weanerm_loc',type,inten,minten))
1014  sum((inten,minten),v_aactLev(hh,'weanerm_loc',type,inten,minten,y,m))=e=
1015  sum((inten,minten),
1016  v_aactLev(hh,'youngm_loc',type,inten,minten,y,m-1)*p_grad('youngm_loc',typ
      e,inten)*(1-p_mort('weanerm_loc',type,minten))
1017  +v_aactLev(hh,'weanerm_loc',type,inten,minten,y,m-1)*(1-p_grad('weanerm_lo
      c',type,inten))
1018  +v_aactLevbuy(hh,'weanerm_loc',type,inten,minten,y,m-1)
1019  -v_aactLevsell(hh,'weanerm_loc',type,inten,minten,y,m-1));
1020   
1021  E_mweanerm_imp2(hh,type,y,m)$(ord(m) gt 2 )..
1022  *and sum(minten,v0_aactLev(hh,'weanerm_imp',type,inten,minten))
1023  sum((inten,minten),v_aactLev(hh,'weanerm_imp',type,inten,minten,y,m))=e=
1024  sum((inten,minten),
1025  v_aactLev(hh,'youngm_imp',type,inten,minten,y,m-1)*p_grad('youngm_imp',typ
      e,inten)*(1-p_mort('weanerm_imp',type,minten))
1026  +v_aactLev(hh,'weanerm_imp',type,inten,minten,y,m-1)*(1-p_grad('weanerm_im
      p',type,inten))
1027  +v_aactLevbuy(hh,'weanerm_imp',type,inten,minten,y,m-1)
1028  -v_aactLevsell(hh,'weanerm_imp',type,inten,minten,y,m-1));
1029   
1030  E_fweanery_loc(hh,type,y,'m01')$(ord(y) gt 1 )..
1031  *and sum(minten,v0_aactLev(hh,'weanerf_loc',type,inten,minten))
1032  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y,'m01'))=
      e=
1033  sum((inten,minten),
1034  v_aactLev(hh,'youngf_loc',type,inten,minten,y-1,'m12')*p_grad('youngf_loc'
      ,type,inten)*(1-p_mort('weanerf_loc',type,minten))
1035  +v_aactLev(hh,'weanerf_loc',type,inten,minten,y-1,'m12')*(1-p_grad('weaner
      f_loc',type,inten))
1036  +v_aactLevbuy(hh,'weanerf_loc',type,inten,minten,y-1,'m12')
1037  -v_aactLevsell(hh,'weanerf_loc',type,inten,minten,y-1,'m12')
1038  );
1039   
1040  E_fweanery_imp(hh,type,y,'m01')$(ord(y) gt 1 )..
1041  *and sum(minten,v0_aactLev(hh,'weanerf_imp',type,inten,minten))
1042  sum((inten,minten),v_aactLev(hh,'weanerf_imp',type,inten,minten,y,'m01'))=
      e=
1043  sum((inten,minten),v_aactLev(hh,'youngf_imp',type,inten,minten,y-1,'m12')*
      p_grad('youngf_imp',type,inten)*(1-p_mort('weanerf_imp',type,minten))
1044  +v_aactLev(hh,'weanerf_imp',type,inten,minten,y-1,'m12')*(1-p_grad('weaner
      f_imp',type,inten))
1045  +v_aactLevbuy(hh,'weanerf_imp',type,inten,minten,y-1,'m12')
1046  -v_aactLevsell(hh,'weanerf_imp',type,inten,minten,y-1,'m12'));
1047   
1048  E_mweanery_loc(hh,type,y,'m01')$(ord(y) gt 1 )..
1049  *and sum(minten,v0_aactLev(hh,'weanerm_loc',type,inten,minten))
1050  sum((inten,minten),
1051  v_aactLev(hh,'weanerm_loc',type,inten,minten,y,'m01'))=e=
1052  sum((inten,minten),
1053  v_aactLev(hh,'youngm_loc',type,inten,minten,y-1,'m12')*p_grad('youngm_loc'
      ,type,inten)*(1-p_mort('weanerm_loc',type,minten))
1054  +v_aactLev(hh,'weanerm_loc',type,inten,minten,y-1,'m12')*(1-p_grad('weaner
      m_loc',type,inten))
1055  +v_aactLevbuy(hh,'weanerm_loc',type,inten,minten,y-1,'m12')
1056  -v_aactLevsell(hh,'weanerm_loc',type,inten,minten,y-1,'m12')
1057  );
1058   
1059  E_mweanery_imp(hh,type,y,'m01')$(ord(y) gt 1 )..
1060  *and sum(minten,v0_aactLev(hh,'weanerm_imp',type,inten,minten))
1061  sum((inten,minten),v_aactLev(hh,'weanerm_imp',type,inten,minten,y,'m01'))=
      e=
1062  sum((inten,minten),
1063  v_aactLev(hh,'youngm_imp',type,inten,minten,y-1,'m12')*p_grad('youngm_imp'
      ,type,inten)*(1-p_mort('weanerm_imp',type,minten))
1064  +v_aactLev(hh,'weanerm_imp',type,inten,minten,y-1,'m12')*(1-p_grad('weaner
      m_imp',type,inten))*(1-p_mort('weanerm_imp',type,minten))
1065  +v_aactLevbuy(hh,'weanerm_imp',type,inten,minten,y-1,'m12')
1066  -v_aactLevsell(hh,'weanerm_imp',type,inten,minten,y-1,'m12'));
1067   
1068  ** ADULTS
1069  * y = 1 and m = 2
1070  E_adultfm_loc(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1071  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1072  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y,m))=e=
1073  sum((inten,minten),
1074  v0_aactLev(hh,'weanerf_loc',type,inten,minten)*p_grad('weanerf_loc',type,i
      nten)*(1-p_mort('weanerf_loc',type,minten))
1075  +v0_aactLev(hh,'adultf_loc',type,inten,minten)*(1-p_grad('adultf_loc',type
      ,inten))*(1-p_mort('adultf_loc',type,minten))
1076  +v_aactLevbuy(hh,'adultf_loc',type,inten,minten,y,m-1)
1077  -v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m-1))
1078  ;
1079   
1080  E_adultfm_imp(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1081  * and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1082  sum((inten,minten),v_aactLev(hh,'adultf_imp',type,inten,minten,y,m))=e=
1083  sum((inten,minten),
1084  v0_aactLev(hh,'weanerf_imp',type,inten,minten)*p_grad('weanerf_imp',type,i
      nten) *(1-p_mort('weanerf_imp',type,minten))
1085  +v0_aactLev(hh,'adultf_imp',type,inten,minten)*(1-p_grad('adultf_imp',type
      ,inten))*(1-p_mort('adultf_imp',type,minten))
1086  +v_aactLevbuy(hh,'adultf_imp',type,inten,minten,y,m-1)
1087  -v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m-1))
1088  ;
1089   
1090  * y = 1 and m > 2
1091  E_adultfm_loc2(hh,type,y,m)$(ord(m) gt 2 and ord(y) eq 1 )..
1092  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1093  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y,m))=e=
1094  sum((inten,minten),
1095  v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m-1)*p_grad('weanerf_loc',t
      ype,inten)*(1-p_mort('weanerf_loc',type,minten))
1096  +v_aactLev(hh,'adultf_loc',type,inten,minten,y,m-1)*(1-p_grad('adultf_loc'
      ,type,inten))*(1-p_mort('adultf_loc',type,minten))
1097  +v_aactLevbuy(hh,'adultf_loc',type,inten,minten,y,m-1)
1098  -v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m-1));
1099   
1100  E_adultfm_imp2(hh,type,y,m)$(ord(m) gt 2 and ord(y) eq 1 )..
1101  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1102  sum((inten,minten),v_aactLev(hh,'adultf_imp',type,inten,minten,y,m))=e=
1103  sum((inten,minten),
1104  v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m-1)*p_grad('weanerf_imp',t
      ype,inten) *(1-p_mort('weanerf_imp',type,minten))
1105  +v_aactLev(hh,'adultf_imp',type,inten,minten,y,m-1)*(1-p_grad('adultf_imp'
      ,type,inten))*(1-p_mort('adultf_imp',type,minten))
1106  +v_aactLevbuy(hh,'adultf_imp',type,inten,minten,y,m-1)
1107  -v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m-1));
1108   
1109  * y > 1 and m = 1
1110  E_adultfy_loc(hh,type,y,'m01')$(ord(y) gt 1 )..
1111  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1112  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y,'m01'))=e
      =
1113  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y-1,'m12')
      *p_grad('weanerf_loc',type,inten)*(1-p_mort('weanerf_loc',type,minten))
1114  +v_aactLev(hh,'adultf_loc',type,inten,minten,y-1,'m12')*(1-p_grad('adultf_
      loc',type,inten))*(1-p_mort('adultf_loc',type,minten))
1115  +v_aactLevbuy(hh,'adultf_loc',type,inten,minten,y-1,'m12')
1116  -v_aactLevsell(hh,'adultf_loc',type,inten,minten,y-1,'m12'));
1117   
1118  E_adultfy_imp(hh,type,y,'m01')$(ord(y) gt 1 )..
1119  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1120  sum((inten,minten),v_aactLev(hh,'adultf_imp',type,inten,minten,y,'m01'))=e
      =
1121  sum((inten,minten),
1122  v_aactLev(hh,'weanerf_imp',type,inten,minten,y-1,'m12')*p_grad('weanerf_im
      p',type,inten)*(1-p_mort('weanerf_imp',type,minten))
1123  +v_aactLev(hh,'adultf_imp',type,inten,minten,y-1,'m12')*(1-p_grad('adultf_
      imp',type,inten))*(1-p_mort('adultf_imp',type,minten))
1124  +v_aactLevbuy(hh,'adultf_imp',type,inten,minten,y-1,'m12')
1125  -v_aactLevsell(hh,'adultf_imp',type,inten,minten,y-1,'m12'));
1126   
1127  * y > 1 and m > 1
1128  E_adultfy_loc2(hh,type,y,m)$(ord(y) gt 1 and ord(m) gt 1 )..
1129  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1130  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y,m))=e=
1131  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m-1)*p_g
      rad('weanerf_loc',type,inten)*(1-p_mort('weanerf_loc',type,minten))
1132  +v_aactLev(hh,'adultf_loc',type,inten,minten,y,m-1)*(1-p_grad('adultf_loc'
      ,type,inten))*(1-p_mort('adultf_loc',type,minten))
1133  +v_aactLevbuy(hh,'adultf_loc',type,inten,minten,y,m-1)
1134  -v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m-1));
1135   
1136  E_adultfy_imp2(hh,type,y,m)$(ord(y) gt 1 and ord(m) gt 1 )..
1137  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1138  sum((inten,minten),v_aactLev(hh,'adultf_imp',type,inten,minten,y,m))=e=
1139  sum((inten,minten),v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m-1)*p_g
      rad('weanerf_imp',type,inten)*(1-p_mort('weanerf_imp',type,minten))
1140  +v_aactLev(hh,'adultf_imp',type,inten,minten,y,m-1)*(1-p_grad('adultf_imp'
      ,type,inten))*(1-p_mort('adultf_imp',type,minten))
1141  +v_aactLevbuy(hh,'adultf_imp',type,inten,minten,y,m-1)
1142  -v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m-1));
1143   
1144  * Sales
1145   
1146  E_adultfsold_loc2(hh,type,y,m)$((ord(m) gt 1) )..
1147  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1148  sum((inten,minten),v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m))=e
      =
1149  sum((inten,minten),
1150  v_aactLev(hh,'adultf_loc',type,inten,minten,y,m)*p_grad('adultf_loc',type,
      inten)*(1-p_mort('adultf_loc',type,minten)));
1151  ;
1152   
1153  E_adultfsold_imp2(hh,type,y,m)$((ord(m) gt 1) )..
1154  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1155  sum((inten,minten),v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m))=e
      =
1156  sum((inten,minten),
1157  v_aactLev(hh,'adultf_imp',type,inten,minten,y,m)*p_grad('adultf_imp',type,
      inten)*(1-p_mort('adultf_imp',type,minten)));
1158  ;
1159   
1160   
1161  E_adultfsold_loc3(hh,type,y,m)$(ord(m) eq 1 and ord(y) gt 1 )..
1162  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1163  sum((inten,minten),v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m))=e
      =
1164  Sum((inten,minten),
1165  v_aactLev(hh,'adultf_loc',type,inten,minten,y-1,'m12')*p_grad('adultf_loc'
      ,type,inten)*(1-p_mort('adultf_loc',type,minten)));
1166  ;
1167   
1168  E_adultfsold_imp3(hh,type,y,m)$(ord(m) eq 1 and ord(y) gt 1 )..
1169  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1170  sum((inten,minten),v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m))=e
      =
1171  Sum((inten,minten),
1172  v_aactLev(hh,'adultf_imp',type,inten,minten,y-1,'m12')*p_grad('adultf_imp'
      ,type,inten)*(1-p_mort('adultf_imp',type,minten)))
1173  ;
1174   
1175  e_reprod_loc1(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1176  sum((inten,minten),v_aactLev(hh,'reprod_loc',type,inten,minten,y,m))=e=
1177  sum((inten,minten),
1178  v0_aactLev(hh,'weanerm_loc',type,inten,minten)*p_grad('weanerm_loc',type,i
      nten)*(1-p_mort('weanerm_loc',type,minten))
1179  +v0_aactLev(hh,'reprod_loc',type,inten,minten)*(1-p_grad('weanerm_loc',typ
      e,inten))
1180  +v_aactLevbuy(hh,'reprod_loc',type,inten,minten,y,m-1)
1181  -v_aactLevsell(hh,'reprod_loc',type,inten,minten,y,m-1))
1182  ;
1183   
1184  e_reprod_loc2(hh,type,y,m)$(ord(m) gt 2)..
1185  sum((inten,minten),v_aactLev(hh,'reprod_loc',type,inten,minten,y,m))=e=
1186  sum((inten,minten),
1187  v_aactLev(hh,'weanerm_loc',type,inten,minten,y,m-1)*p_grad('weanerm_loc',t
      ype,inten)*(1-p_mort('weanerm_loc',type,minten))
1188  +v_aactLev(hh,'reprod_loc',type,inten,minten,y,m-1)*(1-p_grad('weanerm_loc
      ',type,inten))
1189  +v_aactLevbuy(hh,'reprod_loc',type,inten,minten,y,m-1)
1190  -v_aactLevsell(hh,'reprod_loc',type,inten,minten,y,m-1))
1191  ;
1192   
1193  e_reprod_loc3(hh,type,y,m)$(ord(m) eq 1 and ord(y) gt 1 )..
1194  sum((inten,minten),v_aactLev(hh,'reprod_loc',type,inten,minten,y,m))=e=
1195  sum((inten,minten),
1196  v_aactLev(hh,'weanerm_loc',type,inten,minten,y-1,'m12')*p_grad('weanerm_lo
      c',type,inten)*(1-p_mort('weanerm_loc',type,minten))
1197  +v_aactLev(hh,'reprod_loc',type,inten,minten,y-1,'m12')*(1-p_grad('weanerm
      _loc',type,inten))
1198  +v_aactLevbuy(hh,'reprod_loc',type,inten,minten,y-1,'m12')
1199  -v_aactLevsell(hh,'reprod_loc',type,inten,minten,y-1,'m12'))
1200  ;
1201   
1202  e_reprod_imp1(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1203  sum((inten,minten),v_aactLev(hh,'reprod_imp',type,inten,minten,y,m))=e=
1204  sum((inten,minten),
1205  v0_aactLev(hh,'weanerm_imp',type,inten,minten)*p_grad('weanerm_imp',type,i
      nten)*(1-p_mort('weanerm_imp',type,minten))
1206  +v0_aactLev(hh,'reprod_imp',type,inten,minten)*(1-p_grad('weanerm_imp',typ
      e,inten))
1207  +v_aactLevbuy(hh,'reprod_imp',type,inten,minten,y,m-1)
1208  -v_aactLevsell(hh,'reprod_imp',type,inten,minten,y,m-1))
1209  ;
1210   
1211  e_reprod_imp2(hh,type,y,m)$(ord(m) gt 2)..
1212  sum((inten,minten),v_aactLev(hh,'reprod_imp',type,inten,minten,y,m))=e=
1213  sum((inten,minten),
1214  v_aactLev(hh,'weanerm_imp',type,inten,minten,y,m-1)*p_grad('weanerm_imp',t
      ype,inten)*(1-p_mort('weanerm_imp',type,minten))
1215  +v_aactLev(hh,'reprod_imp',type,inten,minten,y,m-1)*(1-p_grad('weanerm_imp
      ',type,inten))
1216  +v_aactLevbuy(hh,'reprod_imp',type,inten,minten,y,m-1)
1217  -v_aactLevsell(hh,'reprod_imp',type,inten,minten,y,m-1))
1218  ;
1219   
1220   
1221  e_reprod_imp3(hh,type,y,m)$(ord(m) eq 1 and ord(y) gt 1 )..
1222  sum((inten,minten),v_aactLev(hh,'reprod_imp',type,inten,minten,y,m))=e=
1223  sum((inten,minten),
1224  v_aactLev(hh,'weanerm_imp',type,inten,minten,y-1,'m12')*p_grad('weanerm_im
      p',type,inten)*(1-p_mort('weanerm_imp',type,minten))
1225  +v_aactLev(hh,'reprod_imp',type,inten,minten,y-1,'m12')*(1-p_grad('weanerm
      _imp',type,inten))
1226  +v_aactLevbuy(hh,'reprod_imp',type,inten,minten,y-1,'m12')
1227  -v_aactLevsell(hh,'reprod_imp',type,inten,minten,y-1,'m12'));
1228   
1229   
1230  e_reprod(hh,y,m)..
1231    Sum((reprod_loc,inten,type,minten),v_aactLev(hh,reprod_loc,type,inten,mi
      nten,y,m))    =g=
1232  Sum((adultf_loc,inten,type,minten),v_aactLev(hh,adultf_loc,type,inten,mint
      en,y,m))*0.2   ;
1233   
1234   
1235   
1236   
1237   
1238   
1239   
1240  Model demogMod    /
1241     E_youngm_loc
1242     E_youngy_loc
1243     E_youngm_loc2
1244     E_fweanerm_loc
1245     E_fweanerm_loc2
1246     E_fweanery_loc
1247     E_mweanerm_loc
1248     E_mweanerm_loc2
1249     E_mweanery_loc
1250     E_adultfm_loc
1251     E_adultfm_loc2
1252     E_adultfy_loc
1253     E_adultfy_loc2
1254     E_adultfsold_loc2
1255     E_adultfsold_loc3
1256     E_reprod_loc1
1257     E_reprod_loc2
1258     E_reprod_loc3
1259   
1260   
1261     E_youngm_imp
1262     E_youngy_imp
1263     E_youngm_imp2
1264     E_fweanerm_imp
1265     E_fweanerm_imp2
1266     E_fweanery_imp
1267     E_mweanerm_imp
1268     E_mweanerm_imp2
1269     E_mweanery_imp
1270     E_adultfm_imp
1271     E_adultfm_imp2
1272     E_adultfy_imp
1273     E_adultfy_imp2
1274     E_adultfsold_imp2
1275     E_adultfsold_imp3
1276     E_reprod_imp1
1277     E_reprod_imp2
1278     E_reprod_imp3
1279   
1280     e_reprod
1281  /
1282  ;
1283   
1284  * Emissions module
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\emissions_module.gms
      This module includes equations that calculate GHG emissions from dairy pro
      duction on the farm.
      Note that these equations are run using a separate solve statement (i.e. t
      hey are not included in the main model) in order to
      reduce the solve time and size of the model. The emissions intensities are
       calculated in 'gen_baseline.gms' by dividing these emissions by total mil
      k and meat production
1291   
1292   
1293   
1294  Variables
1295  dummy                                                          'Dummy vari
      able for solving emissions module equations'
1296  v_enteric_methane(hh,y)                                        'Enteric me
      thane emissions (kg CO2eq/household/year)'
1297  v_Ym(hh,aaact,type,inten,minten,year,m)                        'Methane co
      nversion factor for a given animal (Ym) (%)'
1298  v_VS(hh,aaact,type,inten,minten,y,m)                           'Volatile s
      olids from manure (kg/household/month)'
1299  v_manure_methane(hh,y)                                         'Manure met
      hane (kg CO2eq/household/year)'
1300  v_manure_nitrous_oxide_direct(hh,y)                            'Direct man
      ure nitrous oxide (kg CO2eq/household/year)'
1301  v_manure_nitrous_oxide_leach(hh,y)                             'Leached ma
      nure nitrous oxide (kg CO2eq/household/year)'
1302  v_manure_nitrous_oxide_vol(hh,y)                               'Volatilize
      d manure nitrous oxide (kg CO2eq/household/year)'
1303  v_nitrogen_intake(hh,aaact,type,inten,minten,y,m)              'Nitrogen i
      ntake for a given animal (kg N/head/month)'
1304  v_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m)       'Nitrogen r
      etained for lactation for a given cow (kg/head/month)'
1305  v_nitrogen_retained_gain(hh,aaact,type,inten,minten,y,m)       'Nitrogen r
      etained for gain for a given animal (kg/head/month)'
1306  v_nitrogen_excretion(hh,aaact,type,inten,minten,y,m)           'Nitrogen e
      xcreted for a given animal (kg/head/month)'
1307  v_soil_nitrous_oxide(hh,y)                                     'Soil nitro
      us oxide from all feed sources (note that non-feed crops are excluded) (kg
       CO2eq/household/year)'
1308  v_fossil_fuel_CO2(hh,y)                                        'Carbon dio
      xide from fossil fuel energy (kg CO2/household/year)'
1309  v_LUC_CLC(hh,y)                                                'Carbon dio
      xide emissions from land converted to cropland (kg CO2/household/year)'
1310  ;
1311   
1312   
1313   
1314   
1315  Equations
1316  e_dummy
1317  e_enteric_fermentation           'Enteric fermentation from cattle in the 
      herd'
1318  e_Ym                             'Methane conversion factor (Ym)'
1319  e_VS                             'Manure volatile solids'
1320  e_manure_methane                 'Manure methane'
1321  e_nitrogen_intake                'Nitrogen intake'
1322  e_nitrogen_retained_lact         'Nitrogen retained for lactation'
1323  e_nitrogen_retained_gain         'Nitrogen retained for gain'
1324  e_nitrogen_excretion             'Nitrogen excretion'
1325  e_manure_nitrous_oxide_direct    'Direct manure nitrous oxide'
1326  e_manure_nitrous_oxide_leach     'Leached manure nitrous oxide'
1327  e_manure_nitrous_oxide_vol       'Volatilized manure nitrous oxide'
1328  e_soil_nitrous_oxide             'Soil nitrous oxide'
1329  e_fossil_fuel_energy             'Fossil fuel energy'
1330  ;
1331   
1332   
1333  e_enteric_fermentation(hh,y)..                                            
              v_enteric_methane(hh,y) =e=   28*Sum((aaact,type,minten,inten,m),3
      0*v_aactLev(hh,aaact,type,inten,minten,y,m)*v_grossEnergy(hh,aaact,type,in
      ten,minten,y,m)*v_Ym(hh,aaact,type,inten,minten,y,m)/(100*55.65))     ;
1334   
1335  e_Ym(hh,aaact,type,inten,minten,y,m)..                                    
              v_Ym(hh,aaact,type,inten,minten,y,m)       =e= 3.7 - 0.243*v_dryMa
      tterIntake(hh,y,m,aaact,type,inten) + 0.0059*10*v_NDF(hh,y,m,aaact,type,in
      ten,minten)   +  0.0057*10*v_dmd(hh,y,m,aaact,type,inten,minten) ;
1336  *3.7 - 0.243*p_DMI(y_fwd,r,breed,cohort,scen)+0.0059*10*p_ADF_intake(y_fwd
      ,r,breed,cohort,scen)+0.0057*10*p_dry_matter_digestibility(y_fwd,r,breed,c
      ohort,scen)/100             ;
1337   
1338  * 3.7 - 0.243*p_DMI(y_fwd,r,breed,cohort,scen)+0.0059*10*p_ADF_intake(y_fw
      d,r,breed,cohort,scen)+0.0057*10*p_dry_matter_digestibility(y_fwd,r,breed,
      cohort,scen)/100 ;
1339  *e_Ym_coeff(hh,aaact,type,inten,minten,y,m)..                             
               v_Ym_coeff(hh,aaact,type,inten,minten,y,m)*v_grossEnergy(hh,aaact
      ,type,inten,minten,y,m)    =e=  (.05)*100*v_digestibleEnergy(hh,aaact,type
      ,inten,minten,y,m) ;
1340   
1341  * the below equation needs to be revised, see the equation listings in the
       appendix
1342  e_VS(hh,aaact,type,inten,minten,y,m)..                                    
              v_VS(hh,aaact,type,inten,minten,y,m) =e= 30*((v_grossEnergy(hh,aaa
      ct,type,inten,minten,y,m)-v_digestibleEnergy(hh,aaact,type,inten,minten,y,
      m))+((0.04*v_grossEnergy(hh,aaact,type,inten,minten,y,m)))*(0.92/18.45));
1343   
1344  e_manure_methane(hh,y)..                                                  
              v_manure_methane(hh,y)  =e=   28*Sum((breed_aaact(breed,aaact),typ
      e,inten,minten,m),v_aactLev(hh,aaact,type,inten,minten,y,m)*v_VS(hh,aaact,
      type,inten,minten,y,m)*p_B0*0.67*p_MCF(breed))          ;
1345   
1346  e_nitrogen_intake(hh,aaact,type,inten,minten,y,m)..                       
              v_nitrogen_intake(hh,aaact,type,inten,minten,y,m)  =e= (1/18.45)*(
      1/6.25)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryMatter(feed
      )*p_grossEnergy(feed))*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p
      _dryMatter(feed)*p_crudeProtein(feed))/(.001+v_dryMatterIntake(hh,y,m,aaac
      t,type,inten));
1347   
1348  e_nitrogen_excretion(hh,aaact,type,inten,minten,y,m)..                    
              v_nitrogen_excretion(hh,aaact,type,inten,minten,y,m)  =e= v_nitrog
      en_intake(hh,aaact,type,inten,minten,y,m)*0.15;
1349  *- v_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m) - v_nitrogen_r
      etained_gain(hh,aaact,type,inten,minten,y,m)   ;
1350  * - v_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m);
1351  * n retained for milk, gain, fetal
1352   
1353  e_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m)..                
              v_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m) =e=   0.0
      35*p_milkprod(aaact,type,inten);
1354   
1355  e_nitrogen_retained_gain(hh,aaact,type,inten,minten,y,m)..                
              v_nitrogen_retained_gain(hh,aaact,type,inten,minten,y,m) =e= p_gai
      n(aaact,type,inten)*(268-(7.03*p_NE_gain(hh,aaact,type,inten,minten,y,m)/(
      .001+p_gain(aaact,type,inten))))/(1000/6.25) ;
1356   
1357  e_manure_nitrous_oxide_direct(hh,y)..                                     
              v_manure_nitrous_oxide_direct(hh,y) =e=  265*Sum((aaact,type,inten
      ,minten,m),30*v_aactLev(hh,aaact,type,inten,minten,y,m)*v_nitrogen_excreti
      on(hh,aaact,type,inten,minten,y,m)*p_EF_3)      ;
1358  *(1/18.45)*(1/6.25)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dr
      yMatter(feed)*p_grossEnergy(feed))*Sum((feed),v_fdcons(hh,aaact,type,inten
      ,y,m,feed)*p_dryMatter(feed)*p_crudeProtein(feed))/(.001+v_dryMatterIntake
      (hh,y,m,aaact,type,inten));
1359  *265*Sum((aaact,type,inten,minten,m),30*v_aactLev(hh,aaact,type,inten,mint
      en,y,m)*v_nitrogen_excretion(hh,aaact,type,inten,minten,y,m)*p_EF_3)      
      ;
1360   
1361  e_manure_nitrous_oxide_vol(hh,y)..                                        
              v_manure_nitrous_oxide_vol(hh,y) =e=  265*Sum((aaact,type,inten,mi
      nten,m),30*v_aactLev(hh,aaact,type,inten,minten,y,m)*v_nitrogen_excretion(
      hh,aaact,type,inten,minten,y,m)*p_FRAC_vol*p_EF_4)      ;
1362   
1363  e_manure_nitrous_oxide_leach(hh,y)..                                      
              v_manure_nitrous_oxide_leach(hh,y) =e=  265*Sum((aaact,type,inten,
      minten,m),30*v_aactLev(hh,aaact,type,inten,minten,y,m)*v_nitrogen_excretio
      n(hh,aaact,type,inten,minten,y,m)*p_FRAC_leach*p_EF_5)      ;
1364   
1365  e_soil_nitrous_oxide(hh,y)..                                              
              v_soil_nitrous_oxide(hh,y)=e=  265*Sum((fodder),v_areaCrop(hh,y,fo
      dder)*p_nitrous_oxide(fodder)) + 265*Sum((non_fodder),v_areaCrop(hh,y,non_
      fodder)*p_nitrous_oxide(non_fodder)*p_alloc_factor(non_fodder))*Sum((resid
      ues_non_fodder(residues,non_fodder),m),v_residuesfeedm(hh,residues,y,m))/S
      um((residues_non_fodder(residues,non_fodder),m),0.001+v_residues(hh,y,resi
      dues,m))
1366  +  265*Sum((m,feed_off_farm),v_feedbuy(hh,feed_off_farm,y,m)*p_nitrous_oxi
      de_offfarm(feed_off_farm)/1000);
1367   
1368  e_fossil_fuel_energy(hh,y)..                                              
              v_fossil_fuel_CO2(hh,y)  =e=    sum((m,feed_off_farm),(1/1000)*v_f
      eedbuy(hh,feed_off_farm,y,m)*p_fossil_fuel_emissions(feed_off_farm));
1369   
1370  *e_Total(hh,y)..                                                          
               v_Total_GHG_emissions(hh,y)  =e= v_enteric_methane(hh,y) + v_manu
      re_methane(hh,y)  +  v_manure_nitrous_oxide_vol(hh,y) + v_manure_nitrous_o
      xide_leach(hh,y) + v_manure_nitrous_oxide_direct(hh,y)+ v_soil_nitrous_oxi
      de(hh,y)      ;
1371   
1372  *e_Emissions_Intensity(hh,y)..                                            
               v_Emissions_Intensity(hh,y)*sum((adultf,type,inten,m),v_prodQmilk
      (hh,adultf,type,inten,y,m))   =e=  v_Total_GHG_emissions(hh,y)      ;
1373   
1374  e_dummy..  dummy =e= 10;
1375   
1376  Model Emissionsmod
1377  /
1378  e_enteric_fermentation
1379  e_Ym
1380  e_VS
1381  e_manure_methane
1382  e_nitrogen_intake
1383  e_nitrogen_retained_lact
1384  e_nitrogen_excretion
1385  e_nitrogen_retained_gain
1386  e_manure_nitrous_oxide_direct
1387  e_manure_nitrous_oxide_leach
1388  e_manure_nitrous_oxide_vol
1389  e_soil_nitrous_oxide
1390  e_fossil_fuel_energy
1391  e_dummy
1392  /
1393   
1394   
1395   
1396   
1397   
1398   
1399  * Loan module
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\loan_module.gms
      This module includes all the equations relating to the loan. The equations
       in this model are only included if credit is turned on in 'gen_baseline.g
      ms'
       
1405   
1406  Variables
1407  v_loan(hh)                  'Value of loan taken out by household (TSh/hh)
      '
1408  v_loan_principle(hh,y)      'Remaining principle on loan in a given year (
      TSh)'
1409  v_loan_installment(hh,y)    'Installment paid towards loan principle in a 
      given year (TSh)'
1410  v_credit_interest(hh,y,m)   'Interest paid on loan in a given month (TSh/m
      onth)'
1411  ;
1412   
1413   
1414   
1415   
1416  Parameters
1417  p_r_loan(hh)                  'Interest rate on loan (as a fraction)'
1418  p_loan_installment(hh)        'Loan installment in current year (TSh)'
1419  p_loan_principle(hh,year)     'Loan principle in a given year (TSh)'
1420  p_loan_value(hh)              'Initial loan value (TSh)'
1421  p_credit_interest(hh)         'Credit interest (TSh)'
1422  ;
1423   
1424  p_loan_principle(hh,y)=0;
1425  p_loan_value(hh)=0    ;
1426  p_loan_installment(hh)=0 ;
1427  p_credit_interest(hh) =0;
1428  *p_r_loan(hh)  =0.15;
1429   
1430   
1431  * Specify maximum loan amount of 10,000 lc
1432  v_loan.up(hh)=500000;
1433  v_loan.lo(hh)=0   ;
1434   
1435   
1436  Equations
1437  loan_installment    'Annual payment on loan (10% of principle is paid back
       per year) (lc/yr)'
1438  loan_principle      'Amortization schedule for loan'
1439  loan_payments       'Annual payment on loan interest (lc/yr)'
1440   
1441  ;
1442   
1443  loan_installment(hh,y)..                   v_loan_installment(hh,y) =e=   
      v_loan(hh)*(0.1)  ;
1444   
1445  loan_principle(hh,y)..                     v_loan_principle(hh,y) =e=  v_l
      oan(hh) - (ord(y)*v_loan_installment(hh,y))   ;
1446   
1447  loan_payments(hh,y,m)..                      v_credit_interest(hh,y,m) =e=
         p_r_loan(hh)*v_loan_principle(hh,y)/12     ;
1448   
1449   
1450   
1451  model loanmod
1452  /
1453  loan_payments
1454  loan_principle
1455  loan_installment
1456  /
1457   
1458  * Household module
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\household_module.gms
      This module includes all general equations related to the household, inclu
      ding labour constraints, cash constraints, and conditions relating to cred
      it expenses.
       
1464   
1465   
1466   
1467  Parameters
1468  p_labouravailablehome(hh,y,m)           'Monthly labour available from hou
      sehold members (person-days per month per household)'
1469  hhold_members(hh,hhold_member)          'Number of people of a given age c
      lass in the household'
1470  p_offFarmIncome(hh)                     'Annual off-farm income (lc/hh/yea
      r)'
1471  p_credit_interest(hh)                   'Annual expenses on credit interes
      t (lc/hh/year)'
1472  p_cash(hh)                              'Cash balance in beginning month (
      lc/hh)'
1473  ;
1474   
1475   
1476   
1477   
1478  Nonnegative Variables
1479  v_hhold_expen(hh,y,m)                'Household expenditure (lc/hh/month)'
1480  v_income(hh,y,m)                     'Total household income (lc/hh/yr)'
1481  v_cash(hh,y,m)                       'Cash available for the household in 
      a given year (lc)'
1482  v_labour_hired(hh,y,m)               'Total hired labour in a given month'
1483  v_labourcrophome(hh,y,m)             'Home labour dedicated to cropping ac
      tivities (person-days/month)'
1484  v_labourliveshome(hh,y,m)            'Home labour dedicated to livestock a
      ctivities (person-days/month)'
1485  v_cons(hh,y,good)                  ''
1486  v_labour_hired_lives(hh,y,m)         'Hired labour for livestock activitie
      s (person-days/month)'
1487  v_labour_hired_crop(hh,y,m)          'Hired labour for cropping activities
       (person-days/month)'
1488  v_leisure(hh,y,m)                    'Leisure time (person-days/household/
      month)'
1489  v_tot_credit_expenses(hh,y,m)        'Total loan expenses in a given month
       (lc/month)'
1490  v_lives_expenses(hh,y,m)             'Total livestock expenses in a given 
      month (lc/month)'
1491  v_crop_expenses(hh,y,m)              'Total crop expenses in a given month
       (lc/month)'
1492   
1493  v_Qmilk_hcons(hh,y,m)                'Milk consumed at home (kg/household/
      month)'
1494  v_Qmilk_marketed(hh,y,m)             'Total amount of milk marketed (kg/ho
      usehold/month)'
1495  v_Qmilk_marketed_contract(hh,y,m)    'Total amount of milk marketed via a 
      contract (kg/household/month)'
1496  v_Qmilk_marketed_informal(hh,y,m)    'Total amount of milk marketed inform
      ally (kg/household/month)'
1497  v_Land_use(hh,y)                     'Total on farm and upstream land use 
      (ha)'
1498  v_crop_Land_use(hh,y)                'Total land dedicated to feed crops (
      ha)'
1499  ;
1500   
1501  *specify home consumption of milk and household expenditure
1502  v_Qmilk_hcons.fx(hh,y,m)=5*45/12;
1503  v_hhold_expen.fx(hh,y,laterm)=4000000/12;
1504   
1505  *variable bounds
1506  v_leisure.lo(hh,y,m)=0;
1507  v_labour_hired_crop.lo(hh,y,m)=0;
1508   
1509  Equations
1510  e_cashconstraint           'Cash constraint when credit is turned off'
1511  e_cashconstraint2          'Cash constraint when credit turned on'
1512  e_cash_flow                'Cash flow equation without credit'
1513  e_cash_flow2               'Cash flow equation with credit'
1514  e_loan_payments            'Payments on loans in a given period'
1515  e_labourbalancetotal       'Labour balance equation'
1516  e_labourbalancecrop        'Labour balance equation for crops'
1517  e_labourbalancelives       'Labour balance equation for livestock'
1518  e_homelabour               'Home labour balance equation'
1519  e_credit_expenses          'Credit expenses in a given month (lc/household
      /month)'
1520  e_home_produce_demand      'Consumption of home produced food '
1521  e_home_food_demand         'Consumption of milk produced by the household'
1522  e_dairy_land_use           'Calculate sum of cropland, pastureland, and ra
      ngeland (ha)'
1523  e_cons                     'Calculate consumption of food and non-food goo
      ds'
1524  e_milk_marketed            'Total amount of milk marketed'
1525  e_feed_crop_land           'Total land dedicated to feed crops'
1526  e_feed_crop_land_on_farm   'Total land dedicated to feed crops on farm'
1527  e_feed_crop_land_off_farm  'Total land dedicated to feed crops off farm'
1528  ;
1529   
1530   
1531  *-- Cash constraint
1532   
1533  e_cashconstraint(hh,y,m)..   v_lives_expenses(hh,y,m) + v_crop_expenses(hh
      ,y,m) +  sum(good, v_cons(hh,y,good))   =l=  v_cash(hh,y-1,'m12')$((ord(y)
       gt 1) and (ord(m) eq 1)) + v_cash(hh,y,m)$(ord(m) gt 1) + p_cash(hh)$((or
      d(y) eq 1) and (ord(m) eq 1))  ;
1534  *v_hhold_expen(hh,y,m)   + v_cash(hh,y,m-1)$(ord(m) gt 1)
1535  e_cashconstraint2(hh,y,m)..   v_lives_expenses(hh,y,m) + v_crop_expenses(h
      h,y,m) +  sum(good, v_cons(hh,y,good)) +   v_tot_credit_expenses(hh,y,m) =
      l=  v_cash(hh,y,m)$(ord(y) gt 1) + v_cash(hh,y,m-1)$(ord(m) gt 1)  + p_cas
      h(hh)$((ord(y) eq 1) and (ord(m) eq 1)) + (1/12)*v_loan(hh)  ;
1536  *+ p_offFarmIncome(hh)*(1/12)
1537   
1538  e_cash_flow(hh,y,m)..          v_cash(hh,y,m) =e= p_cash(hh)$((ord(y) eq 1
      ) and (ord(m) eq 1)) + v_cash(hh,y,m-1)$(ord(m) gt 1) + v_cash(hh,y-1,'m12
      ')$((ord(m) eq 1) and (ord(y) gt 1))  + (v_income(hh,y,m-1)$(ord(m) gt 1))
       - sum(good, v_cons(hh,y,good)*(1/12)) ;
1539  *- ((v_lives_expenses(hh,y-1,'m12') + v_crop_expenses(hh,y-1,'m12'))$((ord
      (m) eq 1) and (ord(y) gt 1))) - ((v_lives_expenses(hh,y,m-1) + v_crop_expe
      nses(hh,y,m-1))$(ord(m) gt 1));
1540  *+  p_offFarmIncome(hh)*(1/12)
1541  *+ (v_income(hh,y-1,'m12')$((ord(y) gt 1) and (ord(m) eq 1)))
1542  e_cash_flow2(hh,y,m)..          v_cash(hh,y,m) =e= p_cash(hh)$((ord(y) eq 
      1) and (ord(m) eq 1)) + v_cash(hh,y,m-1)$(ord(m) gt 1) + v_cash(hh,y-1,'m1
      2')$((ord(m) eq 1) and (ord(y) gt 1)) + (v_income(hh,y,m)$(ord(m) gt 1)) +
       (v_income(hh,y-1,'m12')$((ord(y) gt 1) and (ord(m) eq 1)))  - sum(good, v
      _cons(hh,y,good)) - (v_tot_credit_expenses(hh,y-1,'m12'))$((ord(m) eq 1) a
      nd (ord(y) gt 1))
1543  - ((  v_tot_credit_expenses(hh,y,m))$(ord(m) gt 1) );
1544  *v_lives_expenses(hh,y,m-1) + v_crop_expenses(hh,y,m-1)
1545   
1546  e_credit_expenses(hh,y,m)..                     (1/12)*v_credit_interest(h
      h,y,m)$(ord(y) gt 1) + (1/12)*v_loan_installment(hh,y)$(ord(y) gt 1) + (1/
      12)*p_credit_interest(hh)$(ord(y) eq 1) + (1/12)*p_loan_installment(hh)$(o
      rd(y) eq 1) =e= v_tot_credit_expenses(hh,y,m) ;
1547   
1548  e_labourbalancetotal(hh,y,m)..                  v_totallabourdemcrop(hh,y,
      m)   + v_totallabourdemlive(hh,y,m)    =e= p_labouravailablehome(hh,y,m) -
       v_leisure(hh,y,m) + v_labour_hired_crop(hh,y,m) + v_labour_hired_lives(hh
      ,y,m);
1549   
1550  e_labourbalancecrop(hh,y,m)..                   v_totallabourdemcrop(hh,y,
      m)      =e= v_labourcrophome(hh,y,m) + v_labour_hired_crop(hh,y,m) ;
1551   
1552  e_labourbalancelives(hh,y,m)..                  v_totallabourdemlive(hh,y,
      m)    =e= v_labourliveshome(hh,y,m) + v_labour_hired_lives(hh,y,m) ;
1553   
1554  *e_cons(hh,y,m,good)..                           v_cons(hh,y,m,good) =e= (
      0.75 + 0.95*(v_income(hh,y,m) - sum(good2,v_cons(hh,y,m,good2))))/1;
1555   
1556  e_cons(hh,y,good)..                           v_cons(hh,y,good) =e= (1/12)
      *(0.75 + 0.95*(sum(m,v_income(hh,y,m)) - sum(good2,v_cons(hh,y,good2))))/1
      ;
1557   
1558  e_home_produce_demand(hh,food,y,m)..            v_prdCrop(hh,y,food,m)   =
      e= v_crp_cons(hh,y,food,m);
1559   
1560  e_home_food_demand(hh,y,m)..                    sum((type,inten,aaact),v_p
      rodQmilk(hh,aaact,type,inten,y,m)) =e= v_Qmilk_marketed(hh,y,m)  + v_Qmilk
      _hcons(hh,y,m);
1561   
1562  e_milk_marketed(hh,y,m)..                       v_Qmilk_marketed_contract(
      hh,y,m)  + v_Qmilk_marketed_informal(hh,y,m) =e= v_Qmilk_marketed(hh,y,m) 
      ;
1563   
1564  e_homelabour(hh,y,m)..                          p_labouravailablehome(hh,y
      ,m)   =e=   v_labourcrophome(hh,y,m) +  v_labourliveshome(hh,y,m) + v_leis
      ure(hh,y,m)  ;
1565   
1566  e_dairy_land_use(hh,y)..                        v_Land_use(hh,y) =e= sum(f
      odder,v_areaCrop(hh,y,fodder)) +  v_pasture_land(hh,y) +   v_graze_dmd(hh,
      y)   + sum((m,feed_off_farm),(1/1000)*v_feedbuy(hh,feed_off_farm,y,m)*1);
1567   
1568  e_feed_crop_land(hh,y)..                        v_feed_crop_land(hh,y)  =e
      =   Sum(fodder,v_areaCrop(hh,y,fodder))   +  Sum((feed_off_farm,m), (1/100
      0)*v_feedbuy(hh,feed_off_farm,y,m)/p_yield_feed_crop(feed_off_farm));
1569   
1570  e_feed_crop_land_on_farm(hh,y)..                v_feed_crop_land_on_farm(h
      h,y)  =e=   Sum(fodder,v_areaCrop(hh,y,fodder))   ;
1571   
1572  e_feed_crop_land_off_farm(hh,y)..               v_feed_crop_land_off_farm(
      hh,y)  =e=    Sum((feed_off_farm,m), (1/1000)*v_feedbuy(hh,feed_off_farm,y
      ,m)/p_yield_feed_crop(feed_off_farm));
1573   
1574   
1575   
1576  Model Householdmod
1577  /
1578  *$ifi %CREDIT%==OFF e_cashconstraint
1580  e_cash_flow
1582  e_labourbalancetotal
1583  e_labourbalancecrop
1584  e_labourbalancelives
1585  e_dairy_land_use
1586  e_cons
1588  e_homelabour
1589  e_home_produce_demand
1590  e_home_food_demand
1591  *e_dairy_crop_land_use
1592  e_milk_marketed
1593  e_feed_crop_land
1594  e_feed_crop_land_on_farm
1595  e_feed_crop_land_off_farm
1596  /
1597   
1598   
1599  * Risk module
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\risk_module.gms
      This module has the purpose of calculating the standard deviation in net p
      resent value based on random input and output prices.
      The standard deviations for dairy outputs (milk and meat), inputs (feeds a
      nd replacment animals), and on cash crops is based on the the distribution
      s of the variables
      obtained fromt the survey. The standard deviation of NPV is then calculate
      d using a monte carlo type method as described in the paper. This involves
       calculating
      the NPV over 100 different iterations, drawing randomly from the distbribu
      tions of the four random variables, and then calculating the random NPV th
      ese 100 different random NPVs.
1607   
1608   
1609   
1610   
1611  Set i /i1*i100/
1612   
1613  Parameters
1614  sigma_output(outputs)   'Standard deviation of output prices'
1615  /
1616  milk 35
1617  meat 45
1618  /
1619   
1620  sigma_feed(feed_off_farm)  'Standard deviation of feed prices'
1621  /
1622  maize_bran            40
1623  sunflower_seed_cake   30
1624  cotton_seed_cake      20
1625  /
1626   
1627  sigma_animals(aaact)     'Standard deviation of replacement animal prices'
1628  /
1629  adultf_imp 25
1630  adultf_loc 25
1631  reprod_loc 25
1632  reprod_imp 25
1633  /
1634   
1635  sigma_cash_crop(cash)  'Standard deviation of cash crop prices'
1636  /
1637  banana 30
1638  /
1639   
1640  OPV(i,outputs)                  'Output price variability'
1641  FPV(i,feed_off_farm)            'Feed price variability'
1642  APV(i,aaact)                    'Animal price variability'
1643  CCPV(i,*)                       'Cash crop price variability'
1644  ;
1645   
1646  *Specify distributions of cash crop prices, input prices (feeds and animal
      s), and milk and meat prices
1647  CCPV(i,'banana')=normal(1,sigma_cash_crop('banana'));
1648  FPV(i,feed_off_farm)=normal(1,sigma_feed(feed_off_farm));
1649  APV(i,aaact)=normal(1,sigma_animals(aaact));
1650  OPV(i,'milk')= normal(1,sigma_output('milk'));
1651  OPV(i,'meat')= normal(1,sigma_output('meat'));
1652   
1653   
1654   
1655  Variables
1656  v_off_farm_income(hh,y)                     'Off farm income (TSh/hh/year)
      '
1657  v_income_lives_rd(hh,i,y,m)                 'Income from livestock activit
      ies (TSh/hh/year)'
1658  v_lives_expenses_rd(hh,i,y,m)               'Random livestock expenses in 
      ith iteration (TSh/hh/month)'
1659  v_income_crop_rd(hh,i,y,m)                  'Income from cropping activiti
      es (Tsh/hh/year)'
1660  v_income_rd(hh,i,y,m)                       'Random income in ith iteratio
      n (TSh/hh/month)'
1661  v_npv                                       'Net present value (lc/hh)'
1662  v_dev(i,hh,y,m)                             'Standard deviation of net pre
      sent value'
1663  v_stddev_income(hh,y,m)                     'Standard deviation of income'
1664  ;
1665   
1666   
1667  Equations
1668           e_offfarm_income_wo_loan_rd         'Off farm income (lc/hh/year)
      '
1669           e_offfarm_income_w_loan_rd          'Off farm income (lc/hh/year)
      '
1670           e_farm_income_lives_rd              'Livestock income income defi
      nition (lc/hh/year)'
1671           e_farm_income_crop_rd               'Crop enterprise income defin
      ition (lc/hh/year)'
1672           e_crop_expenses_rd                  'Annual expenses on crop prod
      uction (lc/hh/year)'
1673           e_livestock_expenses_rd             'Annual expenses on livestock
       production (lc/hh/year)'
1674           e_total_income_rd                   'Total household income (farm
       plus off farm) in a given year (lc/hh/year)'
1675           e_milk_contract_rd                  'Specify terms of milk contra
      ct'
1676           e_milk_no_contract_rd               'Specify no milk is marketed 
      under purchase agreement'
1677           e_dev                               'Specify deviation of income 
      for ith iteration'
1678           e_stdddev                           'Specify standard deviation o
      f income'
1679           e_objective2                        'Net present value'
1680  ;
1681   
1682  e_offfarm_income_w_loan_rd (hh,y)..        v_off_farm_income(hh,y) =e=   p
      _offFarmIncome(hh) -p_r_loan(hh)*v_loan_principle(hh,y)   - v_loan_install
      ment(hh,y)    ;
1683   
1684  e_offfarm_income_wo_loan_rd (hh,y)..       v_off_farm_income(hh,y) =e=   p
      _offFarmIncome(hh)    ;
1685   
1686  e_crop_expenses_rd (hh,y,m)..              v_crop_expenses(hh,y,m)  =e=  v
      _labour_hired_crop(hh,y,m)*p_labourPrice(hh) + Sum(c,v_areaCrop(hh,y,c)*p_
      cropcosts(hh,c)/12);
1687   
1688  e_livestock_expenses_rd(hh,i,y,m)..        v_lives_expenses_rd(hh,i,y,m) =
      e=
1689                                                sum((aaact,type,inten,minten
      ),v_aactLevbuy(hh,aaact,type,inten,minten,y,m)*p_purchPrice(hh,aaact)*APV(
      i,aaact))
1690                                             +  v_labour_hired_lives(hh,y,m)
      *p_labourPrice(hh)
1691                                             +  sum((feed_off_farm),v_feedbu
      y(hh,feed_off_farm,y,m)*p_feedprice(feed_off_farm)*FPV(i,feed_off_farm))
1692                                             +  sum((aaact,type,inten,minten
      ),v_aactLev(hh,aaact,type,inten,minten,y,m)*p_maintExpense(hh,aaact,type,m
      inten)/12);
1693   
1694  e_farm_income_crop_rd (hh,i,y,m)..         v_income_crop_rd(hh,i,y,m) =e= 
       Sum((cash), v_prdCrop(hh,y,cash,m)*p_crop_sell_price(hh,y,cash)*CCPV(i,'b
      anana'))  - v_crop_expenses(hh,y,m);
1695   
1696  e_farm_income_lives_rd(hh,i,y,m)..         v_income_lives_rd(hh,i,y,m) =e=
       sum((type,inten,aaact),v_prodQmeat(hh,aaact,type,inten,y,m)*p_meatPrice*O
      PV(i,'meat'))+ v_Qmilk_marketed_contract(hh,y,m) * p_milkPrice_contract + 
      v_Qmilk_marketed_informal(hh,y,m) * p_milkPrice * OPV(i,'milk') - v_lives_
      expenses_rd(hh,i,y,m);
1697   
1698  e_milk_contract_rd (hh,y,m)..              v_Qmilk_marketed_contract(hh,y,
      m) =l= 10000/12 ;
1699   
1700  e_milk_no_contract_rd (hh,y,m)..           v_Qmilk_marketed_contract(hh,y,
      m)  =e= 0;
1701   
1702  e_total_income_rd(hh,i,y,m)..              v_income_rd(hh,i,y,m) =e=  v_of
      f_farm_income(hh,y)/12 + v_income_crop_rd(hh,i,y,m) + v_income_lives_rd(hh
      ,i,y,m)  ;
1703   
1704  e_dev(i,hh,y,m)..                          v_dev(i,hh,y,m) =e= v_income(hh
      ,y,m) - v_income_rd(hh,i,y,m)   ;
1705   
1706  e_stdddev(hh,y,m)..                        v_stddev_income(hh,y,m) =e=  SQ
      RT{ SUM(i,power(v_dev(i,hh,y,m),2))/CARD(i)}   ;
1707   
1708  e_objective2..                             v_npv =e= sum( (hh,y,m) ,((v_in
      come(hh,y,m) - 0.25*v_stddev_income(hh,y,m)) / ( 1 + power(p_r,ord(y))) ) 
      )   ;
1709   
1710   
1711   
1712  Model risk_module
1713  /
1714  e_offfarm_income_wo_loan_rd
1716   e_farm_income_lives_rd
1717   e_farm_income_crop_rd
1718   e_total_income_rd
1719   e_livestock_expenses_rd
1720   e_crop_expenses_rd
1721   e_dev
1722   e_stdddev
1724  e_milk_no_contract_rd
1725  /
1726   
1727  * simulation model
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\simulation_model.gms
      This module has the purpose of defining the objective function of the glob
      al model. Note that the objective function that gets executed is dependent
       on whether risk is turned on/off
      in 'gen_baseline.gms'
       
1734   
1735   
1736   
1737  Variables
1738  v_off_farm_income(hh,y)           'Off farm income (lc/hh/year)'
1739  v_income_lives(hh,y,m)            'Income from livestock activities (lc/hh
      /year)'
1740  v_income_crop(hh,y,m)             'Income from cropping activities (lc/hh/
      year)'
1741  v_npv                             'Net present value (lc/hh)'
1742  ;
1743   
1744   
1745  Equations
1746           e_objective1                     'Objective function when credit 
      is turned off'
1747           e_objective2                     'Objective function when credit 
      is turned on'
1748           e_offfarm_income_wo_loan         'Off farm income (lc/hh/year)'
1749           e_offfarm_income_w_loan          'Off farm income (lc/hh/year)'
1750           e_farm_income_lives              'Livestock income income definit
      ion (lc/hh/year)'
1751           e_farm_income_crop               'Crop enterprise income definiti
      on (lc/hh/year)'
1752           e_crop_expenses                  'Annual expenses on crop product
      ion (lc/hh/year)'
1753           e_livestock_expenses             'Annual expenses on livestock pr
      oduction (lc/hh/year)'
1754           e_total_income                   'Total household income (farm pl
      us off farm) in a given year (lc/hh/year)'
1755           e_minimum_nutrient               'Specify minimum required nutrie
      nt intake from farm produce (crops)'
1756           e_milk_contract                  'Specify terms of milk contract'
1757           e_milk_no_contract               'Constraint on milk for when the
      re is no option of a contract'
1758  ;
1759   
1760  e_offfarm_income_w_loan(hh,y)..                 v_off_farm_income(hh,y) =e
      =   p_offFarmIncome(hh) -p_r_loan(hh)*v_loan_principle(hh,y)   - v_loan_in
      stallment(hh,y)    ;
1761   
1762  e_offfarm_income_wo_loan(hh,y)..                v_off_farm_income(hh,y) =e
      =   p_offFarmIncome(hh)    ;
1763   
1764  e_crop_expenses(hh,y,m)..                       v_crop_expenses(hh,y,m)  =
      e=  v_labour_hired_crop(hh,y,m)*p_labourPrice(hh) + Sum(c,v_areaCrop(hh,y,
      c)*p_cropcosts(hh,c)/12);
1765   
1766  e_livestock_expenses(hh,y,m)..                  v_lives_expenses(hh,y,m) =
      e=
1767  2*
1768  (
1769  sum((aaact,type,inten,minten),v_aactLevbuy(hh,aaact,type,inten,minten,y,m)
      *p_purchPrice(hh,aaact))
1770  +v_labour_hired_lives(hh,y,m)*p_labourPrice(hh)
1771  +sum((feed_off_farm),v_feedbuy(hh,feed_off_farm,y,m)*p_feedprice(feed_off_
      farm))
1772  +sum((aaact,type,inten,minten),v_aactLev(hh,aaact,type,inten,minten,y,m)*p
      _maintExpense(hh,aaact,type,minten)/12)
1773  );
1774   
1775  e_minimum_nutrient(hh,y,nut)..                  Sum((m,food),v_prdCrop(hh,
      y,food,m)*p_nutrientproperty(food,nut)) =g= p_hhold_adult_equivalents(hh)*
      p_nutrientrequirement(hh,nut)*p_FRAC_farmproduce(nut);
1776   
1777  e_farm_income_crop(hh,y,m)..                    v_income_crop(hh,y,m) =e= 
       Sum((cash), v_prdCrop(hh,y,cash,m)*p_crop_sell_price(hh,y,cash))  - v_cro
      p_expenses(hh,y,m);
1778  *Sum(cash,v_crop_sales_cash(hh,y,cash)*p_crop_sell_price(hh,y,cash))
1779   
1780  e_farm_income_lives(hh,y,m)..                   v_income_lives(hh,y,m) =e=
       sum((type,inten,aaact),v_prodQmeat(hh,aaact,type,inten,y,m)*p_meatPrice)+
       v_Qmilk_marketed_contract(hh,y,m) * p_milkPrice_contract + v_Qmilk_market
      ed_informal(hh,y,m) * p_milkPrice - v_lives_expenses(hh,y,m);
1781   
1782  e_milk_contract(hh,y,m)..                       v_Qmilk_marketed_contract(
      hh,y,m) =l= 10000/12 ;
1783   
1784  e_milk_no_contract(hh,y,m)..                    v_Qmilk_marketed_contract(
      hh,y,m)  =e= 0;
1785   
1786  e_total_income(hh,y,m)..                        v_income(hh,y,m) =e=   v_o
      ff_farm_income(hh,y)/12   + v_income_lives(hh,y,m)   ;
1787  *   +  v_income_crop(hh,y,m)
1788  e_objective1..                                  v_npv =e= sum( (hh,y,m) ,v
      _income(hh,y,m) + v_leisure(hh,y,m)*p_offFarm_wage(hh)*8*.02 / ( 1 + power
      (p_r,ord(y)) ) )   ;
1789   
1790  *e_objective2.. v_npv =e= sum( (hh,y,m) ,(v_income(hh,y,m)- v_stddev_incom
      e(hh,y,m)) / ( 1 + power(p_r,ord(y)) ) )   ;
1791   
1792   
1793   
1794   
1795  Model simulation_model
1796  /
1797  e_objective1
1799  e_offfarm_income_wo_loan
1801   e_farm_income_lives
1802   e_farm_income_crop
1803   e_total_income
1804   e_livestock_expenses
1805   e_crop_expenses
1806   e_minimum_nutrient
1808  e_milk_no_contract
1809  /
1810   
1811   
1812  * MODEL DEFINITION
1813   
1814  Model  DairyClimateModel
1815  /
1816     livesmod
1817     demogmod
1818     cropmod
1819     Householdmod
1820     simulation_model
1824  /
1825  ;
1826  *DairyClimateModel.SCALEOPT = 10000 ;
1827   
1828   
1829  * results storage parameters
1830  Parameter
1831  hh1_animals(*,*,*)
1832  ghg_summary(*,*,*)
1833  Model_status(*,*)
1834  credit(*,*,*)
1835  consumption(*,*,*,*,*)
1836  biomass(*,*,*,*,*)
1837  animal_numbers_monthly(*,*,*,*,*)
1838  animal_numbers_annual(*,*,*,*)
1839  financials(*,*,*)
1840  financials_crop(*,*,*)
1841  financials_livestock(*,*,*)
1842  herd_changes(*,*,*,*,*,*,*,*)
1843  herd(*,*,*,*,*,*)
1844  herd2(*,*,*)
1845  diet1(*,*,*,*,*,*)
1846  diet_annual(*,*,*,*,*)
1847  labour(*,*,*,*)
1848  diet(*,*,*,*,*,*,*)
1849  GHG_emissions(*,*,*)
1850  GHG_emissions_parameters(*,*,*,*,*,*,*,*)
1851  crops(*,*,*,*)
1852  production(*,*,*)
1853  land(*,*,*)
1854  dry_matter_intake(*,*,*,*,*,*)
1855  total_feed_consumed1(*,*,*,*)
1856  total_feed_consumed2(*,*,*,*,*)
1857  cash_balance(*,*,*)
1858  ;
1859   
1860   
1861   
1862  *-- recursive loop
1863   
1864  Loop(y2,
1865   
1866  *v_aactLevsell.fx(hh,'adultf_imp',type,inten,minten,'y01','m01') = v_aactL
      ev.l(hh,'adultf_imp',type,inten,minten,'y01','m12')*p_grad('adultf_imp',ty
      pe,inten)*(1-p_mort('adultf_imp',type,minten));
1867  v_aactLevsell.fx(hh,'adultf_loc',type,inten,minten,'y01','m01')= v_aactLev
      .l(hh,'adultf_loc',type,inten,minten,'y01','m12')*p_grad('adultf_loc',type
      ,inten)*(1-p_mort('adultf_loc',type,minten));
1868   
1869   
1870  ** these inititial variable values are specified to reduce the solve time 
      of the model.
1871  v_fdcons.l(hh,aaact,type,inten,y,m,feed_off_farm)=0;
1872  v_fdcons.l(hh,aaact,type,inten,y,m,'grass')=20;
1873   
1874   
1875   
1876  SOLVE DairyClimateModel maximizing v_npv using RMINLP;  !! best solved wit
      h SNOPT
1877  *RMINLP
1878  *$include productivity_module.gms
1879   
1880  *----- save results from current year
1881  Model_status('Model Status',y2)=DairyClimateModel.modelstat;
1882  animal_numbers_monthly('Animal Activity Levels (head)',hh,aaact,y2,m)=Sum(
      (inten,minten),v_aactLev.l(hh,aaact,'dairy',inten,minten,'y01',m));
1883  animal_numbers_annual('Animal Activity Levels (head)',hh,aaact,y2)=Sum((in
      ten,minten,m),v_aactLev.l(hh,aaact,'dairy',inten,minten,'y01',m))/12;
1884   
1885   
1886  herd_changes('Animal Sales (hd)',hh,aaact,type,inten,minten,y2,m)=v_aactLe
      vSell.l(hh,aaact,type,inten,minten,'y01',m);
1887  herd_changes('Animal Purchases (hd)',hh,aaact,type,inten,minten,y2,m)=v_aa
      ctLevbuy.l(hh,aaact,type,inten,minten,'y01',m);
1888  *herd_changes('Animal Deaths (hd)',hh,aaact,type,inten,minten,y2,m)=;
1889   
1890  biomass('Total feed consumption (kg/hh/month)',hh,feed,y2,m)=v_feedons.l(h
      h,feed,'y01',m);
1891  biomass('Feed Balance (kg/month)',hh,feed,y2,m)=v_feedbalance.l(hh,feed,'y
      01',m);
1892  biomass('Residues as Feed (Mg)',hh,residues,y2,m)=v_residuesfeedm.l(hh,res
      idues,'y01',m);
1893  biomass('Residues on field (Mg)',hh,y2,residues,m)=v_residuesfieldm.l(hh,r
      esidues,'y01',m);
1894  biomass('Feeds purchased (kg/hh/month)',hh,y2,feed_off_farm,m)= v_feedbuy.
      l(hh,feed_off_farm,'y01',m);
1895   
1896   
1897  diet1('Diet (kg/hd/day)',hh,aaact,y2,m,feed)=Sum(inten,v_fdcons.l(hh,aaact
      ,'dairy',inten,'y01',m,feed));
1898  diet('Feed intake (kg/hd/day)',hh,aaact,y2,m,inten,feed)=v_fdcons.l(hh,aaa
      ct,'dairy',inten,'y01',m,feed);
1899  diet_annual('Diet as percentage(% DMI)',hh,aaact,y2,feed)=sum((inten,m),v_
      fdcons.l(hh,aaact,'dairy',inten,'y01',m,feed)/(.0001+diet('Feed intake (kg
      /hd/day)',hh,aaact,y2,m,inten,feed)));
1900  diet('Gross Energy (MJ/hd/d)',hh,aaact,type,inten,y2,m)=Sum((feed),v_fdcon
      s.l(hh,aaact,type,inten,'y01',m,feed)*p_dryMatter(feed)*p_grossEnergy(feed
      ));
1901  diet('Digestible Energy (MJ/hd/d)',hh,aaact,type,inten,y2,m)=Sum((feed),v_
      fdcons.l(hh,aaact,type,inten,'y01',m,feed)*p_dryMatter(feed)*p_digestibleE
      nergy(feed));
1902   
1903  dry_matter_intake('Dry matter intake (kg/hd/d)',hh,aaact,inten,y2,m)=v_dry
      MatterIntake.l(hh,'y01',m,aaact,'dairy',inten) ;
1904  total_feed_consumed1('Total of all feeds consumed (kg)',hh,y2,m)=sum(feed,
      biomass('Total feed consumption (kg/hh/month)',hh,feed,'y01',m));
1905  total_feed_consumed2('Total of an individual feed consumed (%)',hh,feed,y2
      ,m)=100*v_feedons.l(hh,feed,'y01',m)/(.0001+total_feed_consumed1('Total of
       all feeds consumed (kg)',hh,y2,m));
1906   
1907  *- Financials
1908  financials('Net present value (objective function) (lc)',hh,y2)=v_npv.l;
1909  financials('Household Income (lc/yr)',hh,y2)=sum(m,v_income.l(hh,'y01',m))
      ;
1910  financials('Farm Income (lc/yr)',hh,y2)=sum(m,v_income_lives.l(hh,'y01',m)
      +v_income_crop.l(hh,'y01',m));
1911  financials('Off farm Income (lc/yr)',hh,y2)=v_off_farm_income.l(hh,'y01');
1912  financials('Farm Expenses (lc/yr)',hh,y2)=sum(m,v_crop_expenses.l(hh,'y01'
      ,m)+v_lives_expenses.l(hh,'y01',m));
1913  financials('Cash balance (lc/hh)',hh,y2)=0.35*sum(m,v_income.l(hh,'y01',m)
      ) ;
1914   
1915  financials_livestock('Livestock Income(lc/hh/y)',hh,y2)= sum(m,v_income_li
      ves.l(hh,'y01',m));
1916  financials_livestock('Milk Revenue (lc/hh/y)',hh,y2)=sum((adultf,type,inte
      n,m),v_prodQmilk.l(hh,adultf,type,inten,'y01',m)*p_milkPrice);
1917  financials_livestock('Meat Revenue (lc/hh/y)',hh,y2)=Sum((aaact,type,inten
      ,m),v_prodQmeat.l(hh,aaact,type,inten,'y01',m)*p_meatPrice);
1918  financials_livestock('Livestock Expenses (lc/yr)',hh,y2)=sum(m,v_lives_exp
      enses.l(hh,'y01',m));
1919  financials_livestock('Replacement Costs(lc/yr)',hh,y2)=sum((aaact,type,int
      en,minten,m),v_aactLevbuy.l(hh,aaact,type,inten,minten,'y01',m)*p_purchPri
      ce(hh,aaact));
1920  financials_livestock('Livestock labour expenses(lc/yr)',hh,y2)=sum(m,v_lab
      our_hired_lives.l(hh,'y01',m)*p_labourPrice(hh)) ;
1921  financials_livestock('Maintenance Expenses(lc/yr)',hh,y2)= sum((aaact,type
      ,m,inten,minten),v_aactLev.l(hh,aaact,type,inten,minten,'y01',m)*p_maintEx
      pense(hh,aaact,type,minten)/12);
1922  financials_livestock('Feed Expenses(lc/yr)',hh,y2)= sum((m,feed_off_farm),
      v_feedbuy.l(hh,feed_off_farm,'y01',m)*p_feedprice(feed_off_farm));
1923  financials_livestock('Milk marketed informally (lc/yr)',hh,y2)=sum(m,v_Qmi
      lk_marketed_informal.l(hh,'y01',m));
1924  financials_livestock('Milk marketed contract(lc/yr)',hh,y2)=sum(m,v_Qmilk_
      marketed_contract.l(hh,'y01',m));
1925   
1926  financials_crop('Crop income (lc/yr)',hh,y2)=sum(m,v_income_crop.l(hh,'y01
      ',m));
1927  financials_crop('Crop revenue (lc/yr)',hh,y2)=Sum((cash,m), v_prdCrop.l(hh
      ,'y01',cash,m)*p_crop_sell_price(hh,'y01',cash));
1928  financials_crop('Crop Expenses (lc/yr)',hh,y2)=sum(m,v_crop_expenses.l(hh,
      'y01',m));
1929  financials_crop('General crop expenses(lc/yr)',hh,y2)=Sum(c,v_areaCrop.l(h
      h,'y01',c)*p_cropcosts(hh,c))    ;
1930  financials_crop('Crop labour expenses(lc/yr)',hh,y2)=Sum(m,v_labour_hired_
      crop.l(hh,'y01',m)*p_labourPrice(hh)) ;
1931   
1932   
1933   
1934   
1935  * milk and meat production
1936  production('Milk produced (kg/hh/y)',hh,y2)=sum((adultf,type,inten,m),v_pr
      odQmilk.l(hh,adultf,type,inten,'y01',m));
1937  production('Meat produced (kg/hh/y)',hh,y2)=Sum((aaact,type,inten,m),v_pro
      dQmeat.l(hh,aaact,type,inten,'y01',m));
1938   
1939  * consumption
1940  consumption(hh,y2,'xx',good,'Household consumption (kg/hh/m)')=v_cons.l(hh
      ,'y01',good);
1941   
1942   
1943  * labour
1944  labour('Total livestock labour (person-days/m)',hh,y2,m)=v_totallabourdeml
      ive.l(hh,'y01',m);
1945  labour('Total crop labour (person-days/m)',hh,y2,m)=v_totallabourdemcrop.l
      (hh,'y01',m);
1946  labour('Livestock labour hired (person-days/m)',hh,y2,m)=v_labour_hired_li
      ves.l(hh,'y01',m);
1947  labour('Crop labour hired (person-days/m)',hh,y2,m)=v_labour_hired_crop.l(
      hh,'y01',m) ;
1948  labour('Home labour available (person-days/m)',hh,y2,m)=p_labouravailableh
      ome(hh,'y01',m);
1949  labour('Leisure time (person-days/m)',hh,y2,m)=v_leisure.l(hh,'y01',m);
1950   
1951  * Crops
1952  crops('Crop area (ha)',hh,y2,c)=v_areaCrop.l(hh,'y01',c);
1953  crops('Crop production (Mg)',hh,y2,c)=Sum(m,v_prdCrop.l(hh,'y01',c,m)) ;
1954  crops('Crop residues produced (Mg)',hh,y2,residues)=Sum(m,v_residues.l(hh,
      'y01',residues,m));
1955   
1956   
1957   
1958  * These two lines calculate GHG emissions at a post-model optimization out
      put (based on the results from the model run in each iteration)
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\GHG_params.gms
1960   
1961  v_aactLev.fx(hh,aaact,type,inten,minten,'y01',m)=v_aactLev.l(hh,aaact,type
      ,inten,minten,'y01',m) ;
1962  v_grossEnergy.fx(hh,aaact,type,inten,minten,'y01',m)=v_grossEnergy.l(hh,aa
      act,type,inten,minten,'y01',m);
1963  v_digestibleEnergy.fx(hh,aaact,type,inten,minten,'y01',m)=v_digestibleEner
      gy.l(hh,aaact,type,inten,minten,'y01',m);
1964  v_fdcons.fx(hh,aaact,type,inten,'y01',m,feed)=v_fdcons.l(hh,aaact,type,int
      en,'y01',m,feed);
1965  v_graze_dmd.fx(hh,'y01')=v_graze_dmd.l(hh,'y01');
1966  v_dryMatterIntake.fx(hh,'y01',m,aaact,type,inten)=v_dryMatterIntake.l(hh,'
      y01',m,aaact,type,inten);
1967  v_areaCrop.fx(hh,'y01',c)=v_areaCrop.l(hh,'y01',c);
1968  v_feed_crop_land.fx(hh,'y01')=v_feed_crop_land.l(hh,'y01');
1969  v_ADF.fx(hh,'y01',m,aaact,type,inten,minten)=v_ADF.l(hh,'y01',m,aaact,type
      ,inten,minten);
1970  v_NDF.fx(hh,'y01',m,aaact,type,inten,minten)=v_NDF.l(hh,'y01',m,aaact,type
      ,inten,minten);
1971  v_dmd.fx(hh,'y01',m,aaact,type,inten,minten)=v_dmd.l(hh,'y01',m,aaact,type
      ,inten,minten);
1972  Solve Emissionsmod using nlp maximizing dummy;
1973   
1974  GHG_emissions('Emissions -- Enteric CH4 (kg/yr)',hh,y2)=v_enteric_methane.
      l(hh,'y01');
1975  GHG_emissions('Emissions -- Manure CH4 (kg/yr)',hh,y2)=v_manure_methane.l(
      hh,'y01');
1976  GHG_emissions('Emissions -- Manure N2O (direct) (kg/yr)',hh,y2)=v_manure_n
      itrous_oxide_direct.l(hh,'y01');
1977  GHG_emissions('Emissions -- Manure N2O (vol) (kg/yr)',hh,y2)=v_manure_nitr
      ous_oxide_vol.l(hh,'y01');
1978  GHG_emissions('Emissions -- Manure N2O (leach) (kg/yr)',hh,y2)=v_manure_ni
      trous_oxide_leach.l(hh,'y01');
1979  GHG_emissions('Emissions -- Soil N2O (kg/yr)',hh,y2)=v_soil_nitrous_oxide.
      l(hh,'y01');
1980  GHG_emissions('Emissions -- Fossil Fuel CO2 (kg CO2eq/kg milk)',hh,y2)=v_f
      ossil_fuel_CO2.l(hh,'y01');
1981  GHG_emissions('Emissions -- cropland conversion (kg/yr)',hh,y2)=(44/12)*p_
      land_C*(1-exp((-.02)*(ord(y2)-1)))*(v_feed_crop_land.l(hh,'y01') -  p0_fee
      d_crop_land(hh,y2)) ;
1982  GHG_emissions('Emissions -- Total(kg CO2eq)',hh,y2)=v_enteric_methane.l(hh
      ,'y01')+v_manure_methane.l(hh,'y01')+v_manure_nitrous_oxide_direct.l(hh,'y
      01')+v_manure_nitrous_oxide_vol.l(hh,'y01')+v_manure_nitrous_oxide_leach.l
      (hh,'y01')+v_soil_nitrous_oxide.l(hh,'y01')+v_fossil_fuel_CO2.l(hh,'y01')+
      GHG_emissions('Emissions -- cropland conversion (kg/yr)',hh,y2);
1983   
1984  GHG_emissions('Emissions intensity -- Enteric CH4 (kg CO2eq/kg milk)',hh,y
      2)=v_enteric_methane.l(hh,'y01')/(production('Meat produced (kg/hh/y)',hh,
      y2)+production('Milk produced (kg/hh/y)',hh,y2));
1985  GHG_emissions('Emissions intensity -- Manure CH4 (kg CO2eq/kg milk)',hh,y2
      )=v_manure_methane.l(hh,'y01')/(production('Meat produced (kg/hh/y)',hh,y2
      )+production('Milk produced (kg/hh/y)',hh,y2));
1986  GHG_emissions('Emissions intensity -- Manure N2O (direct) (kg CO2eq/kg mil
      k)',hh,y2)=v_manure_nitrous_oxide_direct.l(hh,'y01')/(production('Meat pro
      duced (kg/hh/y)',hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
1987  GHG_emissions('Emissions intensity -- Manure N2O (leach)(kg CO2eq/kg milk)
      ',hh,y2)=v_manure_nitrous_oxide_leach.l(hh,'y01')/(production('Meat produc
      ed (kg/hh/y)',hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
1988  GHG_emissions('Emissions intensity -- Manure N2O (vol) (kg CO2eq/kg milk)'
      ,hh,y2)=v_manure_nitrous_oxide_vol.l(hh,'y01')/(production('Meat produced 
      (kg/hh/y)',hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
1989  GHG_emissions('Emissions intensity -- Soil N2O (kg CO2eq/kg milk)',hh,y2)=
      v_soil_nitrous_oxide.l(hh,'y01')/(production('Meat produced (kg/hh/y)',hh,
      y2)+production('Milk produced (kg/hh/y)',hh,y2));
1990  GHG_emissions('Emissions intensity -- Fossil Fuel CO2 (kg CO2eq/kg milk)',
      hh,y2)=v_fossil_fuel_CO2.l(hh,'y01')/(production('Meat produced (kg/hh/y)'
      ,hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
1991  GHG_emissions('Emissions intensity -- Cropland conversion (kg CO2eq/kg mil
      k)',hh,y2)=GHG_emissions('Emissions -- cropland conversion (kg/yr)',hh,y2)
      /(production('Meat produced (kg/hh/y)',hh,y2)+production('Milk produced (k
      g/hh/y)',hh,y2));
1992  GHG_emissions('Emissions intensity -- total(kg CO2eq/kg milk)',hh,y2)=GHG_
      emissions('Emissions -- Total(kg CO2eq)',hh,y2)/(production('Meat produced
       (kg/hh/y)',hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
1993   
INCLUDE    C:\Users\James\Documents\GitHub\household_ghg_model\household_ghg_mod
           el\dairyclimatemodel2\GHG_params2.gms
1995  *v_aactLev.l(hh,aaact,type,inten,minten,y,m)=0 ;
1996  *v_grossEnergy.l(hh,aaact,type,inten,minten,y,m)=0;
1997  *v_digestibleEnergy.l(hh,aaact,type,inten,minten,y,m)=0;
1998  *v_fdcons.l(hh,aaact,type,inten,y,m,feed)=0;
1999  *v_graze_dmd.l(hh,y,m)=0;
2000  *v_dryMatterIntake.l(hh,y,m,aaact,type,inten)=0;
2001  *v_areaCrop.l(hh,y,c)=0;
2002   
2003  v_aactLev.lo(hh,aaact,type,inten,minten,y,m)=0 ;
2004  v_aactLev.up(hh,aaact,type,inten,minten,y,m)=+inf ;
2005   
2006  v_grossEnergy.lo(hh,aaact,type,inten,minten,y,m)=0;
2007  v_grossEnergy.up(hh,aaact,type,inten,minten,y,m)=+inf;
2008   
2009  v_digestibleEnergy.lo(hh,aaact,type,inten,minten,y,m)=0;
2010  v_digestibleEnergy.up(hh,aaact,type,inten,minten,y,m)=+inf;
2011   
2012  v_fdcons.lo(hh,aaact,type,inten,y,m,feed)=0;
2013  v_fdcons.up(hh,aaact,type,inten,y,m,feed)=+inf;
2014   
2015  v_graze_dmd.lo(hh,y)=0;
2016  v_graze_dmd.up(hh,y)=+inf;
2017   
2018  v_dryMatterIntake.lo(hh,y,m,aaact,type,inten)=0;
2019  v_dryMatterIntake.up(hh,y,m,aaact,type,inten)=+inf;
2020   
2021  v_areaCrop.lo(hh,y,c)=0;
2022  v_areaCrop.up(hh,y,c)=+inf;
2023   
2024   
2025  *Credit
2026  credit('Loan (initial value) (lc/yr)',hh,y2)=v_loan.l(hh) ;
2027  credit('Loan payment (lc/yr)',hh,y2)=p_loan_installment(hh);
2028  credit('Loan principle (lc)',hh,y2)=p_loan_principle(hh,y2)   ;
2029  credit('Credit interest (lc/yr)',hh,y2)=p_credit_interest(hh)  ;
2030   
2031  cash_balance(hh,y2,m)=v_cash.l(hh,'y01',m);
2032   
2033  land('Total land use for dairy production (ha/hh/yr)',hh,y2)=v_Land_use.l(
      hh,'y01');
2034  land('Total crop land use for dairy production (ha/hh/yr)',hh,y2)=v_feed_c
      rop_land.l(hh,'y01');
2035  land('Total crop land use for dairy production on farm (ha/hh/yr)',hh,y2)=
      v_feed_crop_land_on_farm.l(hh,'y01') ;
2036  land('Total crop land use for dairy production off farm (ha/hh/yr)',hh,y2)
      =v_feed_crop_land_off_farm.l(hh,'y01') ;
2037  land('Total rangeland use for dairy production (ha/hh/yr)',hh,y2)=v_graze_
      dmd.l(hh,'y01');
2038  land('Total pasture land use for dairy production (ha/hh/yr)',hh,y2)=v_pas
      ture_land.l(hh,'y01') ;
2039   
2040   
2041  herd2('Percentage local (%)',hh,y2)=100*sum((m,local),animal_numbers_month
      ly('Animal Activity Levels (head)',hh,local,y2,m))/sum((m,aaact),.0001+ani
      mal_numbers_monthly('Animal Activity Levels (head)',hh,aaact,y2,m));
2042   
2043   
2044  *--------        Re-initialize variables
2045  *---------------------------------------
2046  * update loan related parameters based on decisions in year y2 == 1
2047  p_loan_value(hh)$(ord(y2) eq 1)=v_loan.l(hh);
2048  p_loan_installment(hh)=p_loan_value(hh)*.1;
2049  p_loan_principle(hh,y2)= p_loan_value(hh) - (ord(y2)*p_loan_installment(hh
      ))   ;
2050  p_credit_interest(hh)=p_loan_principle(hh,y2)*p_r_loan(hh);
2051  p_loan_value(hh)$(ord(y2) gt 1)=p_loan_value(hh);
2052   
2053  * set loan related variables to zero in every period after y2 == 1
2054  v_loan.fx(hh)=0;
2055  v_loan_principle.fx(hh,y)=0;
2056  v_credit_interest.fx(hh,y,m)=0;
2057  v_loan_installment.fx(hh,y)=0;
2058   
2059  * specify fraction of total income available to be re-invested in the farm
      .
2060  p_cash(hh)=0.35*sum(m,v_income.l(hh,'y01',m));
2061   
2062  *update feed balance
2063  p_s(hh,feed)=v_feedbalance.l(hh,feed,'y01','m12')*(p_transferrate);
2064   
2065  ** re initialize month 1 animal numbers here from month 12 of 'y01'
2066  ** note: to allow transitions between intensity levels, sum rhs of below e
      quations over all 'type'
2067  v0_aactLev(hh,young_imp,type,inten,minten)=
2068  v_aactLev.l(hh,'adultf_imp',type,inten,minten,'y01','m12')*p_rateFert('adu
      ltf_imp',type,inten)*p_sexratio(young_imp,type,inten)+
2069  v_aactLev.l(hh,young_imp,type,inten,minten,'y01','m12')*(1-p_grad(young_im
      p,type,inten))*(1-p_mort(young_imp,type,minten))
2070  ;
2071   
2072  v0_aactLev(hh,young_loc,type,inten,minten)=
2073  v_aactLev.l(hh,'adultf_loc',type,inten,minten,'y01','m12')*p_rateFert('adu
      ltf_loc',type,inten)*p_sexratio(young_loc,type,inten)+
2074  v_aactLev.l(hh,young_loc,type,inten,minten,'y01','m12')*(1-p_grad(young_lo
      c,type,inten))*(1-p_mort(young_loc,type,minten))
2075  ;
2076   
2077  v0_aactLev(hh,'weanerf_imp',type,inten,minten)=
2078  v_aactLev.l(hh,'youngf_imp',type,inten,minten,'y01','m12')*p_grad('youngf_
      imp',type,inten)
2079  +v_aactLev.l(hh,'weanerf_imp',type,inten,minten,'y01','m12')*(1-p_grad('we
      anerf_imp',type,inten))*(1-p_mort('weanerf_imp',type,minten))
2080  ;
2081   
2082  v0_aactLev(hh,'weanerf_loc',type,inten,minten)=
2083  v_aactLev.l(hh,'youngf_loc',type,inten,minten,'y01','m12')*p_grad('youngf_
      loc',type,inten)
2084  +v_aactLev.l(hh,'weanerf_loc',type,inten,minten,'y01','m12')*(1-p_grad('we
      anerf_loc',type,inten))*(1-p_mort('weanerf_loc',type,minten))
2085  ;
2086   
2087  v0_aactLev(hh,'weanerm_imp',type,inten,minten)=
2088  v_aactLev.l(hh,'youngm_imp',type,inten,minten,'y01','m12')*p_grad('youngm_
      imp',type,inten)
2089  +v_aactLev.l(hh,'weanerm_imp',type,inten,minten,'y01','m12')*(1-p_grad('we
      anerm_imp',type,inten))*(1-p_mort('weanerf_imp',type,minten))
2090  ;
2091   
2092  v0_aactLev(hh,'weanerm_loc',type,inten,minten)=
2093  v_aactLev.l(hh,'youngm_loc',type,inten,minten,'y01','m12')*p_grad('youngm_
      loc',type,inten)
2094  +v_aactLev.l(hh,'weanerm_loc',type,inten,minten,'y01','m12')*(1-p_grad('we
      anerm_loc',type,inten))*(1-p_mort('weanerf_loc',type,minten))
2095  -v_aactLevsell.l(hh,'weanerm_loc',type,inten,minten,'y01','m12')
2096  ;
2097   
2098  v0_aactLev(hh,'adultf_loc',type,inten,minten)=
2099  v_aactLev.l(hh,'weanerf_loc',type,inten,minten,'y01','m12')*p_grad('weaner
      f_loc',type,inten)
2100  +v_aactLev.l(hh,'adultf_loc',type,inten,minten,'y01','m12')*(1-p_grad('adu
      ltf_loc',type,inten))*(1-p_mort('adultf_loc',type,minten))
2101  -v_aactLevsell.l(hh,'adultf_loc',type,inten,minten,'y01','m12')
2102  +v_aactLevbuy.l(hh,'adultf_loc',type,inten,minten,'y01','m12');
2103   
2104  v0_aactLev(hh,'adultf_imp',type,inten,minten)=
2105  v_aactLev.l(hh,'weanerf_imp',type,inten,minten,'y01','m12')*p_grad('weaner
      f_imp',type,inten)
2106  +v_aactLev.l(hh,'adultf_imp',type,inten,minten,'y01','m12')*(1-p_grad('adu
      ltf_imp',type,inten))*(1-p_mort('adultf_imp',type,minten))
2107  -v_aactLevsell.l(hh,'adultf_imp',type,inten,minten,'y01','m12')
2108  +v_aactLevbuy.l(hh,'adultf_imp',type,inten,minten,'y01','m12')
2109  ;
2110   
2111  v_aactLev.fx(hh,aaact,type,inten,minten,'y01','m01')=v0_aactLev(hh,aaact,t
      ype,inten,minten);
2112   
2113  );
2114   
2115  *$exit
2116   
2117  herd('Animal Activity Levels (head)',hh,aaact,type,inten,minten)=Sum((y2,m
      ),animal_numbers_monthly('Animal Activity Levels (head)',hh,aaact,y2,m))/(
      card(m)*card(y2));
2118   
2119   
2120   
2121   
2122   
2123  execute_unload "results/results.gdx"
2124  land,
2125  Model_Status,
2126  herd,
2127  herd2,
2128  diet,
2129  total_feed_consumed1,
2130  total_feed_consumed2,
2131  herd_changes,
2132  dry_matter_intake,
2133  labour, financials,
2134  financials_livestock,
2135  financials_crop,
2136  GHG_emissions,
2137  GHG_emissions_parameters,
2138  crops,
2139  credit,
2140  production,
2141  consumption,
2142  biomass,
2143  animal_numbers_monthly
2144  animal_numbers_annual,
2145  diet_annual
2146  cash_balance;
2147  *$exit
2148  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=Model_St
      atus       rng=Model_Status!'
2149  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=financia
      ls         rng=financials!'
2150  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=financia
      ls_crop    rng=financials_crop!'
2151  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=financia
      ls_livestock         rng=financials_livestock!'
2152  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=labour  
                 rng=labour!'
2153  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=producti
      on         rng=production!'
2154  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=credit  
                 rng=credit!'
2155  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=consumpt
      ion    rng=consumption!'
2156  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=land    
       rng=land!'
2157  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=cash_bal
      ance    rng=cash_balance!'
2158  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=biomass 
                 rng=biomass!'
2159  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=crops   
                 rng=crops!'
2160  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=herd2   
                 rng=herd2!'
2161  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=herd    
                 rng=herd!'
2162  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=diet    
                 rng=diet!'
2163  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=herd_cha
      nges       rng=herd_changes!'
2164  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=animal_n
      umbers_monthly     rng=animal_numbers_monthly!'
2165  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=animal_n
      umbers_annual     rng=animal_numbers_annual!'
2166  *execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=total_f
      eed_consumed rng=total_feed_consumed !'
2167  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=dry_matt
      er_intake      rng=dry_matter_intake!'
2168  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=diet_ann
      ual     rng=diet_annual!'
2169  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=GHG_emis
      sions      rng=GHG_emissions!'
2170  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=GHG_emis
      sions_parameters      rng=GHG_emissions_parameters!'
2171   
GAMS Rev 235  WEX-VS8 23.5.1 x86/MS Windows             10/04/18 15:32:47 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\James\Documents\GitHub\househ
                                          old_ghg_model\household_ghg_model\dair
                                          yclimatemodel2\gen_baseline.gms
     2       33 INCLUDE        1      33  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\set_definitions.gms
     3      148 INCLUDE        1      36  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\data\parameters.gms
     4      185 CALL           3      37  .gdxxrw.exe data/household_data.xlsx o
                                           =data/household_data.gdx index=index!
                                           A3
     5      186 GDXIN          3      38  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\data/household_data.
                                           gdx
     6      206 CALL           3      58  .gdxxrw.exe data/model_data.xlsx o=dat
                                           a/model_data.gdx index=index!A3
     7      207 GDXIN          3      59  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\data/model_data.gdx
     8      414 INCLUDE        1      38  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\data\ghg_parameters.
                                           gms
     9      456 CALL           8      42  .gdxxrw.exe data/ghg_params.xlsx o=dat
                                           a/ghg_params.gdx index=index!A3
    10      457 GDXIN          8      43  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\data/ghg_params.gdx
    11      488 INCLUDE        1      40  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\data\nutr_parameters
                                           .gms
    12      503 CALL          11      15  .gdxxrw.exe data/nutrient_requirements
                                           .xlsx o=data/nutrient_requirements.gd
                                           x index=index!A3
    13      504 GDXIN         11      16  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\data/nutrient_requir
                                           ements.gdx
    14      517 INCLUDE        1      42  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\data\scenario_parame
                                           ters.gms
    15      597 INCLUDE        1      93  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\crop_module.gms
    16      683 INCLUDE        1      96  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\livestock_module.gms
    17      856 INCLUDE        1      99  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\demographic_module.g
                                           ms
    18     1285 INCLUDE        1     102  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\emissions_module.gms
    19     1400 INCLUDE        1     105  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\loan_module.gms
    20     1459 INCLUDE        1     108  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\household_module.gms
    21     1600 INCLUDE        1     111  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\risk_module.gms
    22     1728 INCLUDE        1     114  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\simulation_model.gms
    23     1959 INCLUDE        1     264  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\GHG_params.gms
    24     1994 INCLUDE        1     287  .C:\Users\James\Documents\GitHub\house
                                           hold_ghg_model\household_ghg_model\da
                                           iryclimatemodel2\GHG_params2.gms


COMPILATION TIME     =        3.766 SECONDS      3 Mb  WIN235-235 Jul  2, 2010
GAMS Rev 235  WEX-VS8 23.5.1 x86/MS Windows             10/04/18 15:32:47 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


----    549 PARAMETER v0_aactLev  parameter used to specify livestock numbers in
                                  1st period of each iteration

INDEX 1 = hh2  INDEX 2 = youngf_imp

                  ext

dairy.ext       0.600

INDEX 1 = hh2  INDEX 2 = youngm_imp

                  ext

dairy.ext       0.600

INDEX 1 = hh2  INDEX 2 = weanerf_imp

                  ext

dairy.ext       0.960

INDEX 1 = hh2  INDEX 2 = weanerm_imp

                  ext

dairy.ext       0.120

INDEX 1 = hh2  INDEX 2 = adultf_imp

                  ext

dairy.ext       2.400

INDEX 1 = hh2  INDEX 2 = reprod_imp

                  ext

dairy.ext       0.800


----    549 PARAMETER p_B0                 =        0.240  Methane producing cap
                                                           acity
            PARAMETER p_FRAC_leach         =        0.100  Fraction of manure N 
                                                           that is leached (frac
                                                           tion)
            PARAMETER p_FRAC_vol           =        0.100  Fraction of manure N 
                                                           that is volatilized (
                                                           fraction)
            PARAMETER p_EF_5               =        0.007  Emission factor for i
                                                           ndirect manure nitrou
                                                           s oxide (leaching) (f
                                                           raction)
            PARAMETER p_EF_4               =        0.010  Emission factor for i
                                                           ndirect manure nitrou
                                                           s oxide (volatilizati
                                                           on) (fraction)

----    549 PARAMETER p_MCF  Methane conversion factor

local    0.010,    improved 0.010


----    549 PARAMETER p_ADF  

napier              0.425,    maize_residue       0.359
cpea_residue        0.386,    grnut_residue       0.439
bean_residue        0.076,    sorgh_residue       0.350
maize_silage        0.270,    sunflower_seed_cake 0.320
cotton_seed_cake    0.178,    maize_bran          0.145
grass               0.394,    grass_hay           0.538


----    549 PARAMETER p_crudeProtein  

napier              0.097,    maize_residue       0.120
cpea_residue        0.200,    grnut_residue       0.175
bean_residue        0.248,    sorgh_residue       0.082
maize_silage        0.080,    sunflower_seed_cake 0.324
cotton_seed_cake    0.473,    maize_bran          0.119
grass               0.045,    grass_hay           0.045


----    549 PARAMETER p_Energy_req  energy requirement  (MJ/head/day)

INDEX 1 = youngf_loc

                  ext

dairy.ext      26.100
dairy.med      26.100
dairy.int      26.100

INDEX 1 = youngm_loc

                  ext

dairy.ext      26.800
dairy.med      26.800
dairy.int      26.800

INDEX 1 = weanerf_loc

                  ext

dairy.ext      26.100
dairy.med      26.100
dairy.int      26.100

INDEX 1 = weanerm_loc

                  ext

dairy.ext      26.800
dairy.med      26.800
dairy.int      26.800

INDEX 1 = adultf_loc

                  ext

dairy.ext      40.500
dairy.med      35.300
dairy.int      35.300

INDEX 1 = reprod_loc

                  ext

dairy.ext      36.270
dairy.med      36.270
dairy.int      36.270

INDEX 1 = youngf_imp

                  ext

dairy.ext      26.300
dairy.med      26.300
dairy.int      26.300

INDEX 1 = youngm_imp

                  ext

dairy.ext      26.500
dairy.med      26.500
dairy.int      26.500

INDEX 1 = weanerf_imp

                  ext

dairy.ext      26.300
dairy.med      26.300
dairy.int      26.300

INDEX 1 = weanerm_imp

                  ext

dairy.ext      38.800
dairy.med      38.800
dairy.int      38.800

INDEX 1 = adultf_imp

                  ext

dairy.ext      38.300
dairy.med      38.300
dairy.int      38.300

INDEX 1 = reprod_imp

                  ext

dairy.ext      35.500
dairy.med      35.500
dairy.int      35.500


----    549 PARAMETER p_digestibleEnergy  

napier              10.684,    maize_residue        7.800
cpea_residue        10.800,    grnut_residue       10.860
bean_residue        11.160,    sorgh_residue       10.860
maize_silage        11.340,    sunflower_seed_cake 11.853
cotton_seed_cake    15.640,    maize_bran          13.838
grass               11.340,    grass_hay           11.340


----    549 PARAMETER p_grossEnergy  

napier              17.400,    maize_residue       13.000
cpea_residue        18.000,    grnut_residue       18.100
bean_residue        18.600,    sorgh_residue       18.100
maize_silage        18.900,    sunflower_seed_cake 19.400
cotton_seed_cake    20.000,    maize_bran          18.500
grass               18.900,    grass_hay           18.900


----    549 PARAMETER p_crop_sell_price  Sell price of crops (lc/kg)

              beans       maize     sorghum      millet   groundnut      cowpea

hh2.y01 1297071.380  509990.520  693064.040  741988.860  900036.320  994053.140
hh2.y02 1297071.380  509990.520  693064.040  741988.860  900036.320  994053.140

      +      banana

hh2.y01  865090.020
hh2.y02  865090.020


----    549 PARAMETER offfarm_income  Annual off farm income (lc/hh/year)

hh2 1500000.000,    hh1 2500000.000,    hh3 2500000.000,    hh4 2500000.000


----    549 PARAMETER p_offFarmIncome  Annual off farm income (lc/hh/yr)

hh2 1500000.000


----    549 PARAMETER p_forage_yield  yield of forage (tons DM/ha/yr)

m01 0.125,    m02 0.125,    m03 0.125,    m04 0.125,    m05 0.125,    m06 0.125
m07 0.125,    m08 0.125,    m09 0.125,    m10 0.125,    m11 0.125,    m12 0.125


----    549 PARAMETER rangeland_yield  Yield of rangeland (Mg DM/ha/m)

m01 0.125,    m02 0.125,    m03 0.125,    m04 0.125,    m05 0.125,    m06 0.125
m07 0.125,    m08 0.125,    m09 0.125,    m10 0.125,    m11 0.125,    m12 0.125


----    549 PARAMETER p_yldCrop  Crop yields (kg/ha/year)

                      m01         m05         m06         m07         m11

hh2.beans        2552.000
hh2.maize                                1787.000    1787.000
hh2.sorghum                                                       967.000
hh2.cowpea                    200.000     200.000     200.000
hh2.banana                                           7598.000
hh2.napier                                          15500.000
hh2.pasture                                          1500.000

            +         m12

hh2.beans        2552.000
hh2.millet        917.000
hh2.groundnut     705.000


----    549 PARAMETER p_s  starting feed balance in kg

     maize_res~  cpea_resi~  grnut_res~  bean_resi~  sorgh_res~  sunflower~

hh2    1000.000     300.000     300.000     300.000     300.000     300.000

  +  cotton_se~  maize_bran       grass   grass_hay

hh2     300.000     300.000     300.000   15000.000


----    549 PARAMETER startfeed  Starting feed balance

                                p_s

hh2.maize_residue          1000.000
hh2.cpea_residue            300.000
hh2.grnut_residue           300.000
hh2.bean_residue            300.000
hh2.sorgh_residue           300.000
hh2.sunflower_seed_cake     300.000
hh2.cotton_seed_cake        300.000
hh2.maize_bran              300.000
hh2.grass                   300.000
hh2.grass_hay             15000.000
hh2.soyb_residue            300.000
hh1.maize_residue          1000.000
hh1.cpea_residue            300.000
hh1.grnut_residue           300.000
hh1.bean_residue            300.000
hh1.sorgh_residue           300.000
hh1.sunflower_seed_cake     300.000
hh1.cotton_seed_cake        300.000
hh1.maize_bran              300.000
hh1.grass                   300.000
hh1.grass_hay             15000.000
hh1.soyb_residue            300.000
hh3.maize_residue          1000.000
hh3.cpea_residue            300.000
hh3.grnut_residue           300.000
hh3.bean_residue            300.000
hh3.sorgh_residue           300.000
hh3.sunflower_seed_cake     300.000
hh3.cotton_seed_cake        300.000
hh3.maize_bran              300.000
hh3.grass                   300.000
hh3.grass_hay             15000.000
hh3.soyb_residue            300.000
hh4.maize_residue          1000.000
hh4.cpea_residue            300.000
hh4.grnut_residue           300.000
hh4.bean_residue            300.000
hh4.sorgh_residue           300.000
hh4.sunflower_seed_cake     300.000
hh4.cotton_seed_cake        300.000
hh4.maize_bran              300.000
hh4.grass                   300.000
hh4.grass_hay             15000.000
hh4.soyb_residue            300.000


----    549 PARAMETER p_netEnergy  

napier               9.200,    maize_residue       11.300
cpea_residue        15.646,    grnut_residue       15.733
bean_residue        16.168,    sorgh_residue       15.733
maize_silage        16.428,    sunflower_seed_cake 11.800
cotton_seed_cake    15.680,    maize_bran          12.000
grass                9.600,    grass_hay            9.600


----    549 PARAMETER p_dryMatter  

napier              0.179,    maize_residue       0.290
cpea_residue        0.209,    grnut_residue       0.269
bean_residue        0.269,    sorgh_residue       0.281
maize_silage        0.235,    sunflower_seed_cake 0.890
cotton_seed_cake    0.909,    maize_bran          0.887
grass               0.300,    grass_hay           0.300


----    549 PARAMETER p_transferrate       =        1.000  transfer rate of feed
                                                           biomass

----    549 PARAMETER p_fossil_fuel_emissions  Embodied emissions from feed prod
                                               uction (kg CO2eq/Mg feed)

sunflower_seed_cake 78.600,    cotton_seed_cake    78.600
maize_bran          78.600


----    549 PARAMETER p_meatPrice          =      315.000  Price of meat (lc/kg)

----    549 PARAMETER p_purchPrice  Purchase price of a given animal (lc/head)

     youngf_loc  youngm_loc  weanerf_l~  weanerm_l~  adultf_loc  reprod_loc

hh2   50000.000   50000.000  135560.000  135560.000  135560.000  135560.000

  +  youngf_imp  youngm_imp  weanerf_i~  weanerm_i~  adultf_imp  reprod_imp

hh2   40000.000   40000.000  130137.600  104110.080  104110.080   91096.320


----    549 PARAMETER p_labourPrice  Hired labour price (lc/hour)

hh2 3000.000

GAMS Rev 235  WEX-VS8 23.5.1 x86/MS Windows             10/04/18 15:32:47 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Model Statistics    SOLVE DairyClimateModel Using RMINLP From line 1876


LOOPS                                   y2   1


MODEL STATISTICS

BLOCKS OF EQUATIONS          85     SINGLE EQUATIONS       11,663
BLOCKS OF VARIABLES          49     SINGLE VARIABLES       24,493
NON ZERO ELEMENTS       133,576     NON LINEAR N-Z         71,640
DERIVATIVE POOL             870     CONSTANT POOL              71
CODE LENGTH             601,993


GENERATION TIME      =        0.375 SECONDS     10 Mb  WIN235-235 Jul  2, 2010


EXECUTION TIME       =        0.391 SECONDS     10 Mb  WIN235-235 Jul  2, 2010
