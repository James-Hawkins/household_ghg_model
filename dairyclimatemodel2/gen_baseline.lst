GAMS Rev 235  WEX-VS8 23.5.1 x86/MS Windows             10/16/18 06:45:11 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   2   
   3   
   6   
   7   
   9   
  10   
  11  *$LIBINCLUDE GNUPLTXY credit Y-AXIS X-AXIS
  12   
  13   
      This file is used to run the global model. It includes all the necessary m
      odules and specifies the model definition (i.e. what modules to include de
      pending on the settings).
      The model solve statment is embedded in a loop which is used to run the mo
      del sequentially over a multi-year period. After each instance of the solv
      e statement, the variables get saved
      and re-defined as intializing parameters in the next instance of the model
      . Then all the results get exported to excel files.
       
  20   
  21   
  22   
  23   
  24   
      ***************************
      Dairy climate model
      ***************************
  30   
  31   
  32  * Set Declarations
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\set_definitions.gms
  34  Sets
  35   
  36  *-- household sets
  37  hh households          /hh2/
  38   
  39  * -- household members
  40  hhold_member /total,over_65,under_15,adult/
  41   
  42  *-- time sets
  43  m twelve months                                  /m01*m12/
  44  year years                                       /1*20,y01*y12/
  45  y(year) years in model horizon                   /y01/
  46  y2(year) years in current run or recursive steps /1/
  47   
  48  laterm(m) /m02*m12/
  49  firsty(y2) /1/
  50  firstm(m)  /m01/
  51  *lasty(y2)  /2/
  52  lastm(m)   /m12/
  53   
  54  *scenarios
  55  scen 'Model scenarios' /Base/
  56  *, Scen1, Scen2, Scen3, Scen4/
  57   
  58  good /food, nonfood/
  59   
  60  *- nutrients for human consumption
  61  nut /kcal/
  62   
  63  *-- types of animals
  64  type             /dairy/
  65   
  66  * animal products
  67  outputs /meat,milk/
  68   
  69  *-- intensity sets
  70  inten intensity level for feeding  /ext,med,int/
  71  *ext,med,int/
  72  minten level for maintenance       /ext/
  73   
  74   
  75  *- nutrient sets
  76  anut /netenergy,grossenergy,crudeprotein,metabolisableprotein,drymatter,di
      gestibility,N,ADF,NDF/
  77   
  78  *-- animal activity related sets
  79  breed /local,improved/
  80   
  81   
  82  aaact  animal activity /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,adul
      tf_loc,reprod_loc,youngf_imp,youngm_imp,weanerf_imp,weanerm_imp,adultf_imp
      ,reprod_imp/
  83  aaact_loc(aaact)       /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,adul
      tf_loc,reprod_loc/
  84  aaact_imp(aaact)       /youngf_imp,youngm_imp,weanerf_imp,weanerm_imp,adul
      tf_imp,reprod_imp/
  85  young(aaact)           /youngm_loc,youngf_loc,youngm_imp,youngf_imp/
  86  young_imp(aaact)       /youngm_imp,youngf_imp/
  87  young_loc(aaact)       /youngm_loc,youngf_loc/
  88  weaner(aaact)          /weanerm_loc,weanerf_loc,weanerm_imp,weanerf_imp/
  89  weaner_loc(aaact)      /weanerm_imp,weanerf_imp/
  90  weaner_imp(aaact)      /weanerm_loc,weanerf_loc/
  91  adult(aaact)           /adultf_loc,reprod_loc,adultf_imp,reprod_imp/
  92  adult_loc(aaact)       /adultf_loc,reprod_loc/
  93  adult_imp(aaact)       /adultf_imp,reprod_imp/
  94  adultf(aaact)          /adultf_loc,adultf_imp/
  95  adultf_imp(aaact)      /adultf_imp/
  96  adultf_loc(aaact)      /adultf_loc/
  97  cow(aaact)             /adultf_loc,adultf_imp/
  98  male(aaact)            /youngm_loc,weanerm_loc,reprod_loc,youngm_imp,weane
      rm_imp,reprod_imp/
  99  male_loc(aaact)        /youngm_loc,weanerm_loc,reprod_loc/
 100  male_imp(aaact)        /youngm_imp,weanerm_imp,reprod_imp/
 101  reprod(aaact)          /reprod_loc,reprod_imp/
 102  reprod_loc(aaact)      /reprod_loc/
 103  reprod_imp(aaact)      /reprod_imp/
 104  yfemale(aaact)         /youngf_loc,youngf_imp/
 105  yfemale_loc(aaact)     /youngf_loc/
 106  yfemale_imp(aaact)     /youngf_imp/
 107  notadult(aaact)        /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,youn
      gf_imp,youngm_imp,weanerf_imp,weanerm_imp/
 108  notadultf(aaact)       /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,youn
      gf_imp,youngm_imp,weanerf_imp,weanerm_imp,reprod_loc,reprod_imp/
 109  notadult_loc(aaact)    /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc/
 110  notadult_imp(aaact)    /youngf_imp,youngm_imp,weanerf_imp,weanerm_imp/
 111  local(aaact)           /youngf_loc,youngm_loc,weanerf_loc,weanerm_loc,adul
      tf_loc,reprod_loc/
 112  improved(aaact)        /youngf_imp,youngm_imp,weanerf_imp,weanerm_imp,adul
      tf_imp,reprod_imp/
 113   
 114   
 115  *-- crop and grazing related sets
 116  c         /beans,maize,sorghum,millet,groundnut,cowpea,banana,napier,pastu
      re/
 117  food(c)   /beans,maize,sorghum,millet,groundnut,cowpea/
 118  fodder(c) /napier,pasture/
 119  silage(c) /maize/
 120  cash(c)   /banana/
 121  non_fodder(c) /beans,maize,sorghum,millet,groundnut,cowpea,banana/
 122  crop_not_pasture(c) /beans,maize,sorghum,millet,groundnut,cowpea,banana,na
      pier/
 123   
 124   
 125  *feed sets
 126  feed       'feed sources'          /maize_residue,cpea_residue,grnut_resid
      ue,bean_residue,sorgh_residue,millet_residue,banana_residue,maize_silage,s
      unflower_seed_cake,maize_bran,grass,grass_hay,napier/
 127  feed_off_farm(feed)                /sunflower_seed_cake,maize_bran/
 128  feed_on_farm(feed)                 /maize_residue,cpea_residue,grnut_resid
      ue,bean_residue,sorgh_residue,millet_residue,grass,grass_hay,napier,maize_
      silage/
 129  residues(feed)                     /maize_residue,bean_residue,grnut_resid
      ue,sorgh_residue,cpea_residue,millet_residue,banana_residue/
 130  grazed(feed)                       /grass/
 131  ration(feed)                       /maize_residue,bean_residue,cpea_residu
      e,grnut_residue,sorgh_residue,millet_residue,maize_silage,grass_hay,napier
      ,sunflower_seed_cake,maize_bran/
 132  feed_on_farm_non_fodder(feed)      /maize_residue,cpea_residue,grnut_resid
      ue,bean_residue,sorgh_residue,millet_residue,banana_residue/
 133   
 134  **-- Mappings
 135  crop_silage(c,feed)      /maize.maize_silage/
 136  crop_residue(c,residues) /maize.maize_residue,beans.bean_residue,groundnut
      .grnut_residue,sorghum.sorgh_residue,millet.millet_residue/
 137  fodder_feed(fodder,feed) /napier.napier,pasture.grass_hay/
 138  feedbuy_ration(ration,feed_off_farm) /sunflower_seed_cake.sunflower_seed_c
      ake,maize_bran.maize_bran/
 139  residues_ration(residues,ration) /maize_residue.maize_residue,bean_residue
      .bean_residue,millet_residue.millet_residue,grnut_residue.grnut_residue,so
      rgh_residue.sorgh_residue,cpea_residue.cpea_residue/
 140  breed_aaact(breed,aaact) /local.youngf_loc,local.youngm_loc,local.weanerf_
      loc,local.weanerm_loc,local.adultf_loc,local.reprod_loc, improved.youngf_i
      mp,improved.youngm_imp,improved.weanerf_imp,improved.weanerm_imp,improved.
      adultf_imp,improved.reprod_imp/
 141  residues_non_fodder(residues,non_fodder) /bean_residue.beans,maize_residue
      .maize,sorgh_residue.sorghum,millet_residue.millet,grnut_residue.groundnut
      ,cpea_residue.cowpea,banana_residue.banana/
 142  ;
 143   
 144  alias(good,good2)
 145   
 146   
 147  * Data load in
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\data\parameters.gms
 149  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 150  * #1 Core model parameters   (all parameters are declared in terms of gene
      ric sets)
 151  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 152   
 153  Parameters
 154  cropnutrientsdata        'Nutrition properties of feeds'
 155  labourdata               'Labour requirements for livestock'
 156  prodparams               'Productivity parameters for livestock'
 157  startfeed                'Starting feed balance'
 158  startlivestock           'Starting livestock quantities'
 159  transferrate             'Transfer rate for feed biomass'
 160  maintenanceExpense       'General expenses on livestock'
 161  maintenanceExpense2
 162  mortality                'Mortality rate of livestock'
 163  prices_lives             'Sale and purchase prices of livestock'
 164  prices_milk              'Sale price of milk'
 165  prices_milk_contract     'Sale price of milk under a contract'
 166  prices_meat              'Sale price of meat'
 167  prices_feed              'Feed prices'
 168  offfarm_income           'Annual off farm income (lc/hh/year)'
 169  labour_rate              'Wage rate for hired labour'
 170  arable_land              'Available arable land per household'
 171  hhold_size               'Number of dependents per household'
 172  area_crop                'Area dedicated to a given crop (ha)'
 173  rangeland                'Available rangeland (ha)'
 174  crop_price               'sale prices of crops (lc/Mg)'
 175  crop_labour              'monthly crop labour demand in hours per hectare'
 176  crop_costs               'costs of crop production per ha'
 177  livestock_labour         'labour requirements for livestock'
 178  total_ag_land            'Total agricultural land owned by the household'
 179  crop_yield               'Yields of crops (Mg/ha/year)'
 180  crop_yield_off_farm      'Yields of feed crops grown off farm (Mg/ha/year)
      '
 181  start_cash               'amount of cash available to the household in fir
      st year (lc/hh)'
 182  rangeland_yield          'Yield of rangeland (Mg DM/ha/m)'
 183  harvest_index            'Harvest index for crops (ratio)'
 184  ;
 185   
GDXIN   C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemodel2\
        data/household_data.gdx
 188  *household specific params
--- LOAD  offfarm_income = 2:offfarm_income
--- LOAD  total_ag_land = 5:total_ag_land
--- LOAD  hhold_size = 1:hhold_size
--- LOAD  arable_land = 6:arable_land
--- LOAD  start_cash = 3:start_cash
--- LOAD  rangeland = 4:rangeland
--- LOAD  crop_price = 14:crop_price
--- LOAD  area_crop = 7:area_crop
--- LOAD  crop_costs = 15:crop_costs
--- LOAD  crop_yield = 8:crop_yield
--- LOAD  rangeland_yield = 9:rangeland_yield
--- LOAD  startfeed = 11:startfeed
--- LOAD  startlivestock = 12:startlivestock
 202  *$LOAD maintenanceExpense
--- LOAD  maintenanceExpense = 17:maintenanceExpense
--- LOAD  mortality = 13:mortality
 206   
 207   
GDXIN   C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemodel2\
        data/model_data.gdx
 210  *general model parameters
 211  *$LOAD crop_price
--- LOAD  prices_lives = 4:prices_lives
--- LOAD  prices_milk = 5:prices_milk
--- LOAD  prices_milk_contract = 6:prices_milk_contract
--- LOAD  prices_meat = 7:prices_meat
--- LOAD  prices_feed = 8:prices_feed
--- LOAD  labour_rate = 10:labour_rate
--- LOAD  cropnutrientsdata = 1:cropnutrientsdata
--- LOAD  crop_labour = 9:crop_labour
--- LOAD  crop_yield_off_farm = 11:crop_yield_off_farm
--- LOAD  labourdata = 2:labourdata
--- LOAD  prodparams = 3:prodparams
--- LOAD  harvest_index = 12:harvest_index
 225   
 226   
 227   
 228   
 229   
 230   
 231   
 232  Parameters
 233   
 234   
 235  * general household parameters
 236    p_hhold_adult_equivalents(hh)      'Amount of household adult equivalent
      s (AE/hh)'
 237    p_cash(hh)                         'Starting cash balance (lc/hh)'
 238    p_offFarmIncome(hh)                'Annual off farm income (lc/hh/yr)'
 239    p_labouravailablehome(hh,y,m)      'Total labour available from the home
       (person-days per month)'
 240    p_arable_land(hh,y)                'Arable land owned by the household (
      ha)'
 241    p_total_land(hh,y)                 'Total land owned by the household (h
      a)'
 242    p_rangeland(hh,y)                  'Total available rangeland (ha)'
 243    p_hhold_members(hh,hhold_member)   'Households dependents (people/hh)'
 244    p_offFarm_wage(hh)                 'Wage rate for off farm employment (l
      c/person/hour)'
 245   
 246  * farm cost parameters
 247    p_cropcosts(hh,c)                        'Costs related to crop producti
      on (lc/ha/year)'
 248    p_maintExpense(hh,aaact,type,minten)     'Annual expenses per head of li
      vestock (lc/hd/yr)'
 249   
 250  * crop parameters
 251    p_harvestindex(food)             'Harvest index of different crops (rati
      o of grain to total biomass)'
 252    p_res_FRAC_soil(hh,food)         'Parameter defining the fraction of tot
      al residues being left on the field (fraction, e.g. 0.4)'
 253    p_yldCrop(hh,c,m)                'Crop yields (kg/ha/year)'
 254    p_transferrate                   'transfer rate of feed biomass'
 255    p_forage_yield(m)                'yield of forage (tons DM/ha/yr)'
 256   
 257   
 258  * household food parameters
 259    p_nutrientrequirement(hh,nut)    'Nutrient requirement of the given nutr
      ient per AE per year (per AE per year)'
 260    p_nutrientproperty(food,nut)     'Nutrient density of the given nutrient
       per unit food (per kg)'
 261    p_FRAC_farmproduce(nut)          'Fraction of a given nutrient coming fr
      om farm produce'
 262   
 263   
 264  * livestock parameters
 265    p_rateFert(aaact,type,inten)              'fertility rate, young born pe
      r female adult per month'
 266    p_mreprodf(aaact,type,inten)              'number of males reproduction 
      animals per female breeder'
 267    p_sexratio(aaact,type,inten)              'birth ratio male and female'
 268    p_survivalrate(aaact,type,inten)          'survival rate,% of livestock 
      that survive each year'
 269    p_grad(aaact,type,inten)                  'months in class, used for liv
      estock dynamics, for example a young animal is in young class for X months
      , the moves to weaner class (aaact)'
 270    p_mort(aaact,type,minten)                 'fraction of animals that die 
      (monthly)'
 271    p_gain(aaact,type,inten)                  'Average daily gain for a give
      n animal (kg/head/day)'
 272    p_milkprod(aaact,type,inten)              'milk produced per adult femal
      e (kg/head/day)'
 273    p_salesw(aaact,type,inten)                'sales weight of a given anima
      l'
 274    p_dress_pct(aaact,type,inten)             'dressing percentage of aninal
       (expressed as fraction)'
 275    p_corrfc_en(cow)
 276  * starting livestock numbers
 277    v0_aactLev(hh,aaact,type,inten,minten)    'parameter used to specify liv
      estock numbers in 1st period of each iteration'
 278   
 279  * starting feed balance
 280    p_s(hh,feed)                              'starting feed balance in kg'
 281   
 282  * labour demand
 283    p_labour_lives(m,inten,aaact,type)             'labour demand for each a
      ctivity in each season and intensification level across households'
 284    p_labourdemcrop(c,m)                            'labour requirements for
       crop activities ()'
 285   
 286   
 287  * prices
 288    p_milkPrice                                     'Price of milk (lc/l)'
 289    p_milkPrice_contract                            'Price of milk under a b
      uyer-agreement (lc/l)'
 290    p_meatPrice                                     'Price of meat (lc/kg)'
 291    p_salesPrice(hh,aaact)                          'Sales price of a given 
      animal (lc/head)'
 292    p_purchPrice(hh,aaact)                          'Purchase price of a giv
      en animal (lc/head)'
 293    p_labourPrice(hh)                               'Hired labour price (lc/
      hour)'
 294    p_feedPrice(feed)                               'Feed prices (for purcha
      sed feeds) in lc per kg'
 295  *  p_buyPrice(aaact,type,inten)                   'buy price of livestock'
 296    p_crop_sell_price(hh,y,c)                        'Sell price of crops (l
      c/kg)'
 297   
 298   
 299  *nutrient properties
 300    p_dryMatter(feed)
 301    p_grossEnergy(feed)
 302    p_netEnergy(feed)
 303    p_digestibleEnergy(feed)
 304    p_crudeProtein(feed)
 305    p_ADF(feed)
 306    p_NDF(feed)
 307  ;
 308   
 309  **---- Household parameters
 310   
 311  * quantity of household dependents
 312  p_hhold_members(hh,hhold_member)=hhold_size(hhold_member,hh);
 313   
 314  *- Financial parameters
 315  p_offFarmIncome(hh)=offfarm_income(hh)  ;
 316  p_offFarm_wage(hh)=3000;
 317  p_cropcosts(hh,c)=crop_costs(hh,c) ;
 318  p_cash(hh)  = start_cash(hh)  ;
 319  p_labourPrice(hh)= labour_rate(hh,'lives');
 320  *p_maintExpense(hh,aaact,'dairy',minten)= maintenanceExpense(hh,aaact);
 321  p_maintExpense(hh,aaact,type,minten)= maintenanceExpense(hh,aaact,type,min
      ten);
 322   
 323   
 324   
 325  *- Crop and forage parameters
 326  * rangeland available in hectares
 327  p_rangeland(hh,y)= rangeland('rangeland',hh);
 328   
 329  *arable land available in hectares
 330  p_arable_land(hh,y)=arable_land(hh);
 331   
 332  *total land available in hectares
 333  p_total_land(hh,y)=total_ag_land(hh);
 334   
 335  * crop and forage yields (Mg/ha)
 336  p_yldCrop(hh,c,m)=crop_yield(c,hh,m);
 337  p_forage_yield(m)=rangeland_yield(m);
 338   
 339   
 340  **---- Model parameters
 341   
 342  * fertility (calving) rate of adult females
 343  p_rateFert(aaact,type,inten)=  prodparams (aaact,type,inten,'p_rateFert');
 344  *
 345  p_mreprodf(aaact,type,inten)=  prodparams (aaact,type,inten,'p_mreprodf');
 346  * ratio of male to female reproductive animals (assumed 0.5)
 347  p_sexratio(aaact,type,inten)=  prodparams (aaact,type,inten,'p_sexratio');
 348   
 349  * rate at which animals graduate to new class
 350  p_grad(aaact,type,inten)=prodparams (aaact,type,inten,'graduatetonextclass
      ');
 351  * mortality rate
 352  p_mort(aaact,type,minten)=mortality(aaact,type,minten)/12 ;
 353  p_transferrate=1;
 354  p_gain(aaact,type,inten)=prodparams (aaact,type,inten,'adg');
 355  * milk production (kg)
 356  p_milkprod(adultf,type,inten)=prodparams(adultf,type,inten,'milkprod');
 357   
 358  * sales weight (kg)
 359  p_salesw(aaact,type,inten)=prodparams (aaact,type,inten,'fnweight');
 360   
 361   
 362  p_corrfc_en(cow)=1;
 363   
 364  * livestock numbers
 365  v0_aactLev(hh,aaact,type,inten,minten)=startlivestock(hh,aaact,type,inten,
      minten,'startvalue');
 366   
 367  * starting feed balance (kg)
 368  p_s(hh,feed)= startfeed(hh,feed, 'p_s');
 369   
 370  * labour requirements
 371  p_labour_lives(m,inten,aaact,'dairy')=labourdata(m,inten,aaact,'dairy');
 372  p_labourdemcrop(c,m)=crop_labour(c,m);
 373   
 374  * prices
 375  p_milkPrice=prices_milk;
 376  p_milkPrice_contract=prices_milk_contract;
 377  p_meatPrice=prices_meat;
 378  p_feedPrice(feed)= 0.75*prices_feed(feed);
 379  p_crop_sell_price(hh,y,c)=crop_price(c,hh)  ;
 380  p_salesPrice(hh,aaact)=prices_lives(aaact,'sell') ;
 381  p_purchPrice(hh,aaact_imp)=0.8*prices_lives(aaact_imp,'buy') ;
 382  p_purchPrice(hh,aaact_loc)=prices_lives(aaact_loc,'buy') ;
 383  p_labourPrice(hh)= labour_rate(hh,'lives');
 384   
 385   
 386  * feed nutrient properties
 387  p_grossEnergy(feed)=cropnutrientsdata('grossenergy',feed) ;
 388  p_dryMatter(feed)=cropnutrientsdata('drymatter',feed) ;
 389  p_netEnergy(feed)=cropnutrientsdata('netenergy',feed) ;
 390  p_digestibleEnergy(feed)=cropnutrientsdata('digestibility',feed)*cropnutri
      entsdata('grossenergy',feed) ;
 391  p_crudeProtein(feed)=cropnutrientsdata('crudeprotein',feed) ;
 392  p_ADF(feed)=cropnutrientsdata('ADF',feed);
 393  p_NDF(feed)=cropnutrientsdata('NDF',feed)  ;
 394   
 395  display    p_NDF,p_ADF;
 396   
 397  * human nutrition related parameters
 398  p_nutrientrequirement(hh,'kcal')=2500;
 399  p_nutrientproperty(food,'kcal')=5000;
 400  p_FRAC_farmproduce(nut)=0.2;
 401   
 402  **-management or biophysical related parameters
 403  p_harvestindex(food)=harvest_index(food);
 404  p_res_FRAC_soil(hh,food)=0.5;
 405   
 406   
 407  ** -- calculate parameters off of raw data
 408  *calculate monhtly home labour availability based on number of household m
      embers of specific age categories
 409  p_labouravailablehome(hh,y,m) = 4*(2*p_hhold_members(hh,'under_15') + 3.5*
      p_hhold_members(hh,'over_65') + 7*p_hhold_members(hh,'adult'))   ;
 410   
 411  *convert actual household members to adult equivalents
 412  p_hhold_adult_equivalents(hh)=0.5*p_hhold_members(hh,'under_15') + p_hhold
      _members(hh,'over_65') + p_hhold_members(hh,'adult');
 413   
 414   
 415   
 416   
 417   
 418   
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\data\ghg_parameters.gms
 420  ** -- Greenhouse gas estimation parameters
 421   
 422  Parameters
 423  *data load in
 424  MCF
 425  B0
 426  EF_3
 427  EF_4
 428  EF_5
 429  FRAC_leach
 430  FRAC_vol
 431  soil_N2O_off_farm
 432  soil_N2O
 433  C_storage_land
 434  CO2_Fossil_Fuel
 435  allocation_factor
 436   
 437  *parameters as they appear in the model code
 438  ** manure related parameters
 439  p_MCF(breed)                        'Methane conversion factor'
 440  p_B0                                'Methane producing capacity'
 441  p_EF_3                              'Emission factor for manure nitrous ox
      ide (fraction)'
 442  p_EF_4                              'Emission factor for indirect manure n
      itrous oxide (volatilization) (fraction)'
 443  p_EF_5                              'Emission factor for indirect manure n
      itrous oxide (leaching) (fraction)'
 444  p_FRAC_leach                        'Fraction of manure N that is leached 
      (fraction)'
 445  p_FRAC_vol                          'Fraction of manure N that is volatili
      zed (fraction)'
 446   
 447   
 448  * soil N2O related parameters
 449  p_nitrous_oxide_offfarm(feed)       'Nitrous oxide emissions from feeds pu
      rchased off farm (kg N2O/ha/year)'
 450  p_nitrous_oxide(c)                  'Nitrous oxide emissions from cropland
       and grassland on farm (kg N2O/ha/yr)'
 451  p_alloc_factor(non_fodder)          'Allocation factor for non fodder crop
      s'
 452   
 453  *energy related CO2 emissions
 454  p_fossil_fuel_emissions(feed_off_farm) 'Embodied emissions from feed produ
      ction (kg CO2eq/Mg feed)'
 455   
 456  * LUC related parameters
 457  p_land_C                            'Mean carbon storage content of land (
      Mg C/ha)'
 458  ;
 459   
 460   
GDXIN   C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemodel2\
        data/ghg_params.gdx
--- LOAD  MCF = 1:MCF
--- LOAD  B0 = 2:B0
--- LOAD  EF_3 = 3:EF_3
--- LOAD  EF_4 = 4:EF_4
--- LOAD  EF_5 = 5:EF_5
--- LOAD  FRAC_leach = 6:FRAC_leach
--- LOAD  FRAC_vol = 7:FRAC_vol
--- LOAD  C_storage_land = 10:C_storage_land
--- LOAD  CO2_Fossil_Fuel = 11:CO2_Fossil_Fuel
--- LOAD  allocation_factor = 12:allocation_factor
--- LOAD  soil_N2O_off_farm = 9:soil_N2O_off_farm
--- LOAD  soil_N2O = 8:soil_N2O
 476   
 477   
 478  p_MCF('local')=MCF('local');
 479  p_MCF('improved') = MCF('improved') ;
 480  p_B0 = B0;
 481  p_EF_3=EF_3;
 482  p_EF_4=EF_4;
 483  p_EF_5=EF_5;
 484  p_FRAC_leach =FRAC_leach;
 485  p_FRAC_vol=FRAC_vol;
 486  p_land_C=C_storage_land ;
 487  p_fossil_fuel_emissions(feed_off_farm)=CO2_Fossil_Fuel(feed_off_farm);
 488  p_alloc_factor(non_fodder)=allocation_factor(non_fodder);
 489  p_nitrous_oxide_offfarm(feed_off_farm)=soil_N2O_off_farm(feed_off_farm);
 490  p_nitrous_oxide(c)=soil_N2O(c);
 491   
 492   
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\data\nutr_parameters.gms
 494   
 495  **------------------------ Nutrition and cattle diet related parameters
 496   
 497  Parameters
 498  energyrequirements
 499  proteinrequirements
 500  *p_NE_gain(hh,aaact,type,inten,minten,y,m)  'Daily requirement of net ener
      gy for gain (MJ/hd/d)'
 501  p_Energy_req(aaact,type,inten,minten)  'energy requirement  (MJ/head/day)'
 502  p_Protein_req(aaact,type,inten,minten)  'protein requirement (kg/head/day)
      '
 503   
 504  ;
 505   
 506   
GDXIN   C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemodel2\
        data/nutrient_requirements.gdx
--- LOAD  energyrequirements = 1:energyrequirements
--- LOAD  proteinrequirements = 2:proteinrequirements
 512   
 513  p_Energy_req(aaact,'dairy',inten,minten)=energyrequirements('hh1',aaact,'d
      airy',inten,minten,'energyrequirement');
 514  p_Protein_req(aaact,'dairy',inten,minten)=proteinrequirements('hh1',aaact,
      'dairy',inten,minten,'proteinrequirement');
 515   
 516   
 517  * this line converts metabolisable energy requirements for gain to net ene
      rgy required for gain. this procedure needs to be updated
 518  *p_NE_gain(hh,aaact,type,inten,minten,y,m)=1.5*energy_gain(hh,aaact,type,i
      nten,minten,'energyrequirement');
 519   
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\data\scenario_parameters.gms
 521  ** Scenario or simulation specific parameters
 522  Scalar
 523  p_r  'rate of return used in the objective function'   /0.04/
 524  ;
 525   
 526  Parameters
 527  * Scenario related parameters
 528    p_r_loan(hh) 'Interest rate on loan'
 529    p_amort_period(hh) 'Amortization period for the loan (years)'
 530   
 531   
 532   
 533   p0_graze_dmd(hh,y)                  'Base level of grazing land (ha/hh)'
 534   p0_feed_crop_land(hh,y2)             'Initial amount of land dedicated to
       feed crops for livestock (ha/hh)'
 535  ;
 536   
 537   
 538  *$call "gdxxrw.exe data/scenario_params.xlsx o=data/scenario_params.gdx in
      dex=index!A3"
 539  *$GDXIN "data/scenario_params.gdx"
 540  *$LOAD
 541   
 542  p_amort_period(hh)=10;
 543  p_r_loan(hh)  =0.15;
 544   
 545   
 546   
 547  p0_feed_crop_land(hh,y2)=0.025;
 548  p0_graze_dmd(hh,y)=4;
 549   
 550   
 551   
 552   
 553  display
 554  v0_aactLev,
 555  p_B0,
 556  p_FRAC_leach,
 557  p_FRAC_vol,
 558  p_EF_5,
 559  p_EF_4,
 560  p_MCF,p_ADF,p_crudeProtein,
 561  p_Energy_req,
 562  p_digestibleEnergy,
 563  p_grossEnergy,
 564  p_crop_sell_price,
 565  offfarm_income,
 566  p_offFarmIncome,
 567  p_forage_yield,
 568  rangeland_yield,
 569  p_yldCrop,
 570  p_s,
 571  startfeed,
 572  p_netEnergy,
 573  p_dryMatter,
 574  p_transferrate
 575  p_fossil_fuel_emissions,
 576  p_meatPrice,
 577  p_purchPrice,
 578  p_labourPrice;
 579  *$exit
 580   
 581   
 582   
 583  *define scenarios and model versions
 590   
 591   
 592  ** Price scenarios
 593  *p_feedPrice(feed)=(0.75)*prices_feed(feed);
 594  *p_purchPrice(hh,aaact_imp)=0.75*prices_lives(aaact_imp,'buy') ;
 595   
 596  *p_milkPrice('Scen')=  prices_milk;
 597  *p_feedPrice(feed,'Scen3')=prices_feed(feed)*(0.75);
 598  *p_purchPrice(hh,aaact,'Scen4')=prices_lives(hh,aaact,'buy')*(0.75);
 599   
 600   
 601  * Crop module
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\crop_module.gms
      This module includes all equations relating to the crop enterprise, includ
      ing crop areas, crop production, labour requirements for cropping activiti
      es, and accounting equations for
      different crop products (e.g. maize as silage vs. grain, residues)
       
 608   
 609   
 610  Parameters
 611  p_yldCrop(hh,c,m)                  'Crop yield (kg/ha/month)'
 612  p_arable_land(hh,y)                'Arable land per household (ha)'
 613  p_total_land(hh,y)                 'Total land per household (ha)'
 614  p_labourdemcrop(c,m)               'Total labour requirements for crop act
      ivties (person-days/household/month)'
 615  p_crop_sell_price(hh,y,c)          'Selling price of crops (TSh/kg)'
 616  p_cropcosts(hh,c)                  'Costs of crop production (TSh/ha/year)
      '
 617  p_yield_feed_crop(feed_off_farm)   'Yield of feed crops produced off farm 
      (kg/ha)'
 618  ;
 619  p_yield_feed_crop(feed_off_farm)=crop_yield_off_farm(feed_off_farm,'yield'
      );
 620   
 621  Variables
 622  v_prdCrop(hh,y,c,m)                     'Crop production (Mg/m)'
 623  v_crop_sales_cash(hh,y,cash)            'Cash crops (Mg)'
 624  v_crop_food(hh,y,food)                  'Food crops produced (Mg)'
 625  v_crp_feed(hh,y,feed,m)                 'Fodder crops produced (Mg)'
 626  v_crp_cons(hh,y,food,m)                 'kg of food crop consumed per mont
      h by the household (kg/hh/year)'
 627  v_totallabourdemcrop(hh,y,m)            'Monthly labour demand for croppin
      g activities (person-days per month)'
 628  v_residuesfieldm(hh,residues,y,m)       'Residues left on field (kg)'
 629  v_residues(hh,y,residues,m)             'Residues produced (kg/year)'
 630  v_residuesfeedm(hh,residues,year,m)     'residues of feed coming from on f
      arm production'
 631  v_feed_crop_land(hh,y)                  'Total land for feed crops (ha/hh/
      year)'
 632  v_feed_crop_land_off_farm(hh,y)         'Total land for feed crops produce
      d off farm (ha/year)'
 633  v_feed_crop_land_on_farm(hh,y)          'Total land for feeds crops produc
      ed on farm (ha/year)'
 634  ;
 635   
 636  Nonnegative Variables
 637  v_areaCrop(hh,y,c)            'Area dedicated to crop c (ha/hh/year)'
 638  ;
 639   
 640  ** Variable bounds
 641  v_areaCrop.lo(hh,y,c)=0;
 642   
 643  Equations
 644  e_arable_land                     'Arable land constraint (for crops, excl
      uding pasture)'
 645  e_total_land_holdings             'Total land constraint (for all crops pl
      us pasture)'
 646  e_crp_prd                         'Define crop production (Mg/ha/yr) based
       on area and yield'
 647  e_crp_fate_food_byprd             'Define the quantity of residues produce
      d (Mg)'
 648  e_food_silage                     'Define amount of maize being used as ma
      ize silage'
 649  e_residues_prod                   'Accounting equation for the fate of res
      idues'
 650  e_residues_field                  'Define quantity of residues left on fie
      ld (Mg)'
 651  e_labourdemand                    'Define the labour required for cropping
       activities (person-days per household per month)'
 652  ;
 653   
 654   
 655  e_arable_land(hh,y)..                            Sum(crop_not_pasture(c),v
      _areaCrop(hh,y,c)) =e=   p_arable_land(hh,y)    ;
 656   
 657  e_total_land_holdings(hh,y)..                    Sum(c,v_areaCrop(hh,y,c))
              =l= p_total_land(hh,y) ;
 658   
 659  e_crp_prd(hh,y,c,m)..                            v_areaCrop(hh,y,c)*p_yldC
      rop(hh,c,m)/1000     =e=  v_prdCrop(hh,y,c,m)  ;
 660   
 661  e_crp_fate_food_byprd(hh,y,residues,m)..         v_residues(hh,y,residues,
      m) =e= Sum(crop_residue(food,residues), (v_prdCrop(hh,y,food,m)/p_harvesti
      ndex(food)) - v_prdCrop(hh,y,food,m) )/12;
 662   
 663  e_food_silage(hh,y,m)..                          v_prdCrop(hh,y,'maize',m)
       =e=   v_crp_cons(hh,y,'maize',m) + Sum(crop_silage('maize','maize_silage'
      ),v_crp_feed(hh,y,'maize_silage',m));
 664   
 665  e_residues_prod(hh,y,residues,m)..               v_residues(hh,y,residues,
      m) =e=   v_residuesfeedm(hh,residues,y,m) + v_residuesfieldm(hh,residues,y
      ,m);
 666   
 667  e_residues_field(hh,y,residues,m)..              v_residuesfieldm(hh,resid
      ues,y,m) =e=   Sum(crop_residue(food,residues), v_residues(hh,y,residues,m
      )*p_res_FRAC_soil(hh,food));
 668   
 669  e_labourdemand(hh,y,m)..                         Sum((c),v_areaCrop(hh,y,c
      )*p_labourdemcrop(c,m))    =e= v_totallabourdemcrop(hh,y,m);
 670   
 671   
 672   
 673   
 674  Model cropMod
 675  /
 676  e_arable_land
 677  e_total_land_holdings
 678  e_crp_prd
 679  e_crp_fate_food_byprd
 680  e_food_silage
 681  e_residues_prod
 682  e_residues_field
 683  e_labourdemand
 684  /
 685   
 686   
 687  * Livestock module
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\livestock_module.gms
 689   
      This module includes all the livestock related equations, including milk a
      nd meat production based on the quantity of adult females and animals bein
      g culled, feed intake,
      feed balance equations, specification of minimum energy and protein requir
      ements, livestock labour, livestock nutrient and dry matter intake, and li
      vestock related land use
      (e.g. rangeland requirements). Different levels of livestock productivity 
      in this module are handled using the 'intensity' index. A given animal can
       be classifed as intensive,
      medium, or extensive, each one with corresponding values for milk yield (i
      n the case of an adult female), and daily live weight gain (in the case of
       a growing animal).
      Depending on what intensity level an animal is categorized as, the daily r
      equirement for energy and protein is specifed in accordance with this anim
      al's required nutrient intake.
       
       
 700   
 701   
 702   
 703  Variables
 704    v_dmd(hh,y,m,aaact,type,inten,minten)                     'Monthly mean 
      dry matter digestibility (g/100 g DM)'
 705    v_ADF(hh,y,m,aaact,type,inten,minten)                     'Acid detergen
      t fibre intake (g/100g DM)'
 706    v_NDF(hh,y,m,aaact,type,inten,minten)                     'Neutral deter
      gent fibre intake (g/100g DM)'
 707    v_diet_N(hh,y,m,aaact,type,inten,minten)                  'Dietary N int
      ake (g/100g DM)'
 708    v_prodQmilk(hh,aaact,type,inten,year,m)                   'Milk produced
       (kg/month/animal)'
 709    v_prodQmeat(hh,aaact,type,inten,year,m)                   'Meat produced
       (kg/month/animal)'
 710    v_milkprod(hh,cow,type,inten,year)                        'Milk producti
      on per cow per day during lactation (kg/head/day)'
 711  ;
 712   
 713   
 714  Nonnegative variables
 715    v_totallabourdemlive(hh,year,m)                           'Person-days o
      f labour/month/herd'
 716    v_grossEnergy(hh,aaact,type,inten,minten,year,m)          'Gross energy 
      intake per animal per day (MJ/hd/d)'
 717    v_netEnergy(hh,aaact,type,inten,minten,year,m)            'Net energy re
      quirement (MJ/hd/d)'
 718    v_digestibleEnergy(hh,aaact,type,inten,minten,y,m)        'Digestible en
      ergy intake per animal per day (MJ/hd/d)'
 719    v_cp_intake(hh,year,m,aaact,type,inten,minten)
 720    v_dryMatterIntake(hh,y,m,aaact,type,inten)           'Dry matter intake 
      (kg/hd/d)'
 721    v_graze_dmd(hh,y)                                    'Estimated demand f
      or grazing land (ha/hh/yr)'
 722    v_pasture_land(hh,y)                                 'Amount of land ded
      icated to pasture production (ha/hh/yr)'
 723    v_feedbalance(hh,feed,year,m)                        'kg feed carried ov
      er to next month'
 724    v_feedbuy(hh,feed_off_farm,y,m)                      'kg of a feed purch
      ased in a given month (kg/hh/month)'
 725    v_fdcons(hh,aaact,type,inten,y,m,feed)               'Amount of a specif
      ic feed consumed per animal per day (kg as fed)'
 726    v_feedons(hh,feed,year,m)                            'Total kg of a feed
       consumed per month (for all cattle) (as fed) (kg/hh/month)'
 727   
 728    v_aactLev(hh,aaact,type,inten,minten,year,m)          'Livestock activit
      y level (head)'
 729    v_aactLevsell(hh,aaact,type,inten,minten,year,m)      'Sell livestock (h
      ead)'
 730    v_aactLevbuy(hh,aaact,type,inten,minten,year,m)       'Buy livestock (he
      ad)'
 731  ;
 732   
 733  *fix starting values for livestock numbers in first month and first year
 734  v_aactLev.fx(hh,aaact,type,inten,minten,'y01','m01')=v0_aactLev(hh,aaact,t
      ype,inten,minten);
 735   
 736  v_aactLev.fx(hh,aaact,type,'int',minten,y,m)=0;
 737  v_aactLev.fx(hh,aaact,type,'med',minten,y,m)=0;
 738   
 739   
 740  v_aactLevbuy.fx(hh,young,type,inten,minten,y,lastm)=0    ;
 741  v_aactLevsell.fx(hh,young,type,inten,minten,y,lastm)=0  ;
 742  v_aactLevbuy.fx(hh,weaner,type,inten,minten,y,lastm)=0    ;
 743  v_aactLevsell.fx(hh,weaner,type,inten,minten,y,lastm)=0  ;
 744  v_aactLevbuy.fx(hh,reprod,type,inten,minten,y,lastm)=0    ;
 745  v_aactLevsell.fx(hh,reprod,type,inten,minten,y,lastm)=0  ;
 746   
 747  *v_aactLevbuy.lo(hh,weaner,type,inten,minten,y,m)=    ;
 748  *v_aactLevsell.lo(hh,weaner,type,inten,minten,y,m)=0  ;
 749   
 750   
 751  *v_aactLevbuy.fx(hh,aaact,type,inten,minten,y,lastm)=0;
 752  *v_aactLevsell.fx(hh,aaact,type,inten,minten,y,lastm)=0;
 753   
 754   
 755   
 756  *v_fdcons.fx(hh,aaact_imp,type,inten,y,m,grazed)=0;
 757   
 758  v_prodQmilk.fx(hh,young,type,inten,year,m)=0;
 759   
 760   
 761   
 762  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 763  * #3 Equations  (all variables are declared in terms of sets specifically 
      defined to this model scenario)
 764  *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~*
 765  Equations
 766  *-- production equations
 767     e_milkproduction   'milk produced from all animals in a given month (kg
      /hh/month)'
 768     e_meatproduction   'meat produced from slaughtered animals in a given m
      onth (kg/hh/month)'
 769   
 770  *-- Feed balance equations
 771     e_feedbal           'livestock feed balance accounting equation (kg per
       month)'
 772     e_feedons           'total amount of a feed consumed per month (from al
      l animals)'
 773     e_feed_purchased    'total amount of feeds purchased per month (kg/mont
      h/hhold)'
 774   
 775  *-- Labor equation
 776     e_laborAA           'labor use for livestock activities (person-days/hh
      /month)'
 777   
 778  *-- Rangeland requirement and availability
 779     e_grazing_demand             'Demand for grazing land by cattle (ha/hh/
      year)'
 780     e_rangeland                  'Availability of rangeland for grazing (ha
      /hh/year)'
 781     e_pasture                    'Land dedicated to pasture production (ha/
      hh/year)'
 782   
 783   
 784  *-- Feed and nutrition equations
 785     e_feed_intake                 'Feed intake equation (as fed)'
 786     e_mlk_prod
 787     e_protein_intake
 788     e_dryMatterIntake             'Dry matter intake equation (from Goopy e
      t al. 2018)'
 789     e_dry_matter_digestibility    'Dry matter digestibility (from Oddy et a
      l. 1983)'
 790     e_energySource                'Specify required energy intake'
 791     e_grossEnergy                 'Calculate gross energy intake'
 792     e_netenergy                   'Calculate net energy'
 793     e_digestibleEnergy            'Calculate digestible energy'
 794     e_diet_N                      'Calculate diet N intake'
 795     e_diet_ADF                    'Calculate diet ADF intake'
 796     e_diet_NDF                    'Calculate diet NDF intake'
 797     e_min_protein                 'Minimum protein intake'
 798  ;
 799   
 800   
 801  e_milkproduction(hh,cow,type,inten,y,m)..   v_prodQmilk(hh,cow,type,inten,
      y,m) =e= 0.6*v_milkprod(hh,cow,type,inten,y)*30*Sum(minten,v_aactLev(hh,co
      w,type,inten,minten,y,m));
 802  * p_milkprod(aaact,type,inten)
 803   
 804  e_meatproduction(hh,aaact,type,inten,y,m)..    v_prodQmeat(hh,aaact,type,i
      nten,y,m)  =e= 0.6*p_salesw(aaact,type,inten)*Sum(minten,v_aactLevsell(hh,
      aaact,type,inten,minten,y,m));
 805  *p_dress_pct(aaact,type,inten)*
 806  e_laborAA(hh,y,m)..            sum((aaact,inten,type,minten),v_aactLev(hh,
      aaact,type,inten,minten,y,m)*p_labour_lives(m,inten,aaact,type))   =e= v_t
      otallabourdemlive(hh,y,m);
 807   
 808  e_feedons(hh,feed,y,m)..                            v_feedons(hh,feed,y,m)
       =e= 30*sum((aaact,type,inten,minten),v_aactLev(hh,aaact,type,inten,minten
      ,y,m)*v_fdcons(hh,aaact,type,inten,y,m,feed));
 809   
 810  e_feed_purchased(hh,feed_off_farm,y,m)..            v_feedbuy(hh,feed_off_
      farm,y,m) =e= v_feedons(hh,feed_off_farm,y,m);
 811   
 812  e_feedbal(hh,ration,y,m).. v_feedbalance(hh,ration,y,m-1)*(p_transferrate)
      $(ord (m) gt 1) + v_feedbalance(hh,ration,y-1,'m12')*(p_transferrate)$((or
      d (y) gt 1) and (ord(m) eq 1)) + p_s(hh,ration)$((ord(m) eq 1) and (ord(y)
       eq 1)) + Sum(residues_ration(residues,ration),v_residuesfeedm(hh,residues
      ,y,m))*1000 + v_crp_feed(hh,y,'maize_silage',m)*1000 +  Sum((fodder_feed(f
      odder,ration)),v_prdCrop(hh,y,fodder,m))*1000 + Sum((feedbuy_ration(ration
      ,feed_off_farm)),v_feedbuy(hh,feed_off_farm,y,m))
 813  - v_feedons(hh,ration,y,m) =e=  v_feedbalance(hh,ration,y,m);
 814   
 815  e_grazing_demand(hh,y)..                           v_graze_dmd(hh,y) =e= (
      1/1000)*Sum((aaact,type,inten,minten,m),30*(v_aactLev(hh,aaact,type,inten,
      minten,y,m)*p_dryMatter('grass')*v_fdcons(hh,aaact,type,inten,y,m,'grass')
      ))/sum(m,p_forage_yield(m)) ;
 816   
 817  e_rangeland(hh,y)..                                v_graze_dmd(hh,y) =l= p
      _rangeland(hh,y);
 818   
 819  e_pasture(hh,y)..                                 v_pasture_land(hh,y) =e=
       (1/1000)*Sum((aaact,type,inten,minten,m),30*(v_aactLev(hh,aaact,type,inte
      n,minten,y,m)*p_dryMatter('grass_hay')*v_fdcons(hh,aaact,type,inten,y,m,'g
      rass_hay')))/(12*p_forage_yield('m01')) ;
 820   
 821  e_dryMatterIntake(hh,y,m,aaact,type,inten)..      v_dryMatterIntake(hh,y,m
      ,aaact,type,inten)   =e=  Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed
      )*p_dryMatter(feed));
 822   
 823   
 824   
 825   
 826   
 827  e_mlk_prod(hh,y,cow,type,inten)..  v_milkprod(hh,cow,type,inten,y)  =e=   
                 min((1/12)*Sum(m,(v_cp_intake(hh,y,m,cow,'dairy',inten,'ext')-0
      .05)/.06785 )  ,365*p_corrfc_en(cow)*(p_Energy_req(cow,type,inten,'ext')-3
      5)/(0.8*(0.0406*.02+1.509)));
 828   
 829  *(1/12)*Sum(m, min((v_cp_intake(hh,y,m,cow,'dairy',inten,'ext')-0.1)/.0678
      5   ,365*p_corrfc_en(cow)*(p_Energy_req(cow,type,inten,'ext')-35)/(0.8*(0.
      0406*.02+1.509))));
 830   
 831   
 832  e_energySource(hh,y,m,aaact,type,inten)$(ord(m) gt 1)..          p_Energy_
      req(aaact,type,inten,'ext')   =e= Sum((feed),v_fdcons(hh,aaact,type,inten,
      y,m,feed)*p_dryMatter(feed))*18.1*v_dmd(hh,y,m,aaact,type,inten,'ext')*0.8
      1/100;
 833   
 834  e_dry_matter_digestibility(hh,y,m,aaact,type,inten,minten)..            v_
      dmd(hh,y,m,aaact,type,inten,minten) =e= 83.58 - 0.824*v_ADF(hh,y,m,aaact,t
      ype,inten,minten) + 2.626*v_diet_N(hh,y,m,aaact,type,inten,minten) ;
 835   
 836  e_min_protein(hh,y,m,aaact,'dairy',inten,minten)$(ord(m) gt 1)..          
        v_cp_intake(hh,y,m,aaact,'dairy',inten,minten)  =g= .75* p_Protein_req(a
      aact,'dairy',inten,minten);  !! protein requirments need to be updated
 837   
 838  e_protein_intake(hh,y,m,aaact,'dairy',inten,minten)..                     
             v_cp_intake(hh,y,m,aaact,'dairy',inten,minten) =e=  Sum((feed),v_fd
      cons(hh,aaact,'dairy',inten,y,m,feed)*p_dryMatter(feed)*p_crudeProtein(fee
      d))*0.9 ;
 839   
 840  e_grossEnergy(hh,y,m,aaact,type,minten,inten)..            v_grossEnergy(h
      h,aaact,type,inten,minten,y,m)   =e= Sum((feed),v_fdcons(hh,aaact,type,int
      en,y,m,feed)*p_dryMatter(feed)*p_grossEnergy(feed));
 841   
 842  e_digestibleEnergy(hh,y,m,aaact,type,minten,inten)..       v_digestibleEne
      rgy(hh,aaact,type,inten,minten,y,m) =e=  (1/100)*v_dmd(hh,y,m,aaact,type,i
      nten,minten)*v_grossEnergy(hh,aaact,type,inten,minten,y,m);
 843   
 844  e_diet_ADF(hh,y,m,aaact,type,inten,minten)..       v_ADF(hh,y,m,aaact,type
      ,inten,minten)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryMatt
      er(feed)) =e=   100*Sum(feed,v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryM
      atter(feed)*p_ADF(feed)) ;
 845   
 846  e_diet_NDF(hh,y,m,aaact,type,inten,minten)..       v_NDF(hh,y,m,aaact,type
      ,inten,minten)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryMatt
      er(feed)) =e=   100*Sum(feed,v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryM
      atter(feed)*p_NDF(feed)) ;
 847   
 848  e_diet_N(hh,y,m,aaact,type,inten,minten)..          v_diet_N(hh,y,m,aaact,
      type,inten,minten)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dry
      Matter(feed)) =e=  100*Sum(feed,v_fdcons(hh,aaact,type,inten,y,m,feed)*p_d
      ryMatter(feed)*p_crudeProtein(feed)/6.25)  ;
 849   
 850   
 851  option limrow=0; option limcol=0;
 852   
 853   
 854   
 855  Model livesmod
 856   
 857  /
 858     e_milkproduction
 859     e_meatproduction
 860     e_feedbal
 861     e_feedons
 862     e_feed_purchased
 863     e_laborAA
 864     e_pasture
 865     e_mlk_prod
 866  e_rangeland
 867     e_dry_matter_digestibility
 868     e_protein_intake
 869     e_grossEnergy
 870     e_digestibleEnergy
 871     e_diet_N
 872     e_diet_ADF
 873     e_diet_NDF
 874     e_dryMatterIntake
 875     e_grazing_demand
 876     e_energySource
 877     e_min_protein
 878  /
 879   
 880   
 881   
 882  * Livestock demographic module
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\demographic_module.gms
      This module calculates herd demographics throughout the model time period.
       
 888   
 889  Equations
 890  *-- Herd dynamics equations
 891     E_youngm_loc        'young balance each month excluding jan each year'
 892     E_youngy_loc        'from dec y-1 to jan y if y>1'
 893     E_youngm_loc2       'young balance each month excluding jan each year'
 894     E_fweanerm_loc      'female weaner balance each month excluding jan eac
      h year'
 895     E_fweanerm_loc2     'female weaner balance each month excluding jan eac
      h year'
 896     E_fweanery_loc      'from dec y-1 to jan y if y>1'
 897     E_mweanerm_loc      'male weaner balance each month excluding jan each 
      year'
 898     E_mweanerm_loc2     'male weaner balance each month excluding jan each 
      year'
 899     E_mweanery_loc      'from dec y-1 to jan y if y>1'
 900     E_adultfm_loc       'breeder balance each month excluding jan each year
      '
 901     E_adultfm_loc2      'breeder balance each month excluding jan each year
      '
 902     E_adultfy_loc       'breeder balance from dec y-1 to jan y if y>1'
 903     E_adultfy_loc2      'cow balanace when y > 1 and m > 1'
 904     E_adultfsold_loc    'must sell adults once reach end of productive life
      '
 905     E_adultfsold_loc2   'must sell adults once reach end of productive life
      '
 906     E_adultfsold_loc3   'must sell adults once reach end of productive life
      '
 907     E_reprod_loc1       'bull balance when y = 1 and m = 2'
 908     E_reprod_loc2       'bull balance when m > 2'
 909     E_reprod_loc3       'bull balance when y > 1 and m = 1'
 910   
 911   
 912     E_youngm_imp        'young balance each month excluding jan each year'
 913     E_youngm_imp2       'young balance each month excluding jan each year'
 914     E_youngy_imp        'from dec y-1 to jan y if y>1'
 915     E_fweanerm_imp      'female weaner balance each month excluding jan eac
      h year'
 916     E_fweanerm_imp2     'female weaner balance each month excluding jan eac
      h year'
 917     E_fweanery_imp      'from dec y-1 to jan y if y>1'
 918     E_mweanerm_imp      'male weaner balance each month excluding jan each 
      year'
 919     E_mweanerm_imp2     'male weaner balance each month excluding jan each 
      year'
 920     E_mweanery_imp      'from dec y-1 to jan y if y>1'
 921     E_adultfm_imp       'breeder balance each month excluding jan each year
      '
 922     E_adultfm_imp2      'breeder balance each month excluding jan each year
      '
 923     E_adultfy_imp       'breeder balance from dec y-1 to jan y if y>1'
 924     E_adultfy_imp2      'cow balanace when y > 1 and m > 1'
 925     E_adultfsold_imp    'must sell adults once reach end of productive life
      '
 926     E_adultfsold_imp2   'must sell adults once reach end of productive life
      '
 927     E_adultfsold_imp3   'must sell adults once reach end of productive life
      '
 928     E_reprod_imp1       'bull balance when y = 1 and m = 2'
 929     E_reprod_imp2       'bull balance when m > 2'
 930     E_reprod_imp3       'bull balance when y > 1 and m = 1'
 931   
 932     e_reprod           'minimum number of reproductive animals'
 933  ;
 934   
 935  ** YOUNG
 936  E_youngm_loc(hh,young_loc,type,y,m)$(ord(m) eq 2 and ord(y) eq 1)..
 937  Sum((inten,minten),v_aactLev(hh,young_loc,type,inten,minten,y,m))=e=
 938  Sum((inten,minten),
 939  v0_aactLev(hh,'adultf_loc',type,inten,minten)*p_rateFert('adultf_loc',type
      ,inten)*p_sexratio(young_loc,type,inten)+
 940  v0_aactLev(hh,young_loc,type,inten,minten)*(1-p_grad(young_loc,type,inten)
      )*(1-p_mort(young_loc,type,minten))
 941  +v_aactLevbuy(hh,young_loc,type,inten,minten,y,m-1)
 942  -v_aactLevsell(hh,young_loc,type,inten,minten,y,m-1)
 943  )
 944  ;
 945   
 946  E_youngm_imp(hh,young_imp,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
 947  Sum((inten,minten),v_aactLev(hh,young_imp,type,inten,minten,y,m))=e=
 948  Sum((inten,minten),
 949  v0_aactLev(hh,'adultf_imp',type,inten,minten)*p_rateFert('adultf_imp',type
      ,inten)*p_sexratio(young_imp,type,inten)+
 950  v0_aactLev(hh,young_imp,type,inten,minten)*(1-p_grad(young_imp,type,inten)
      )*(1-p_mort(young_imp,type,minten))
 951  +v_aactLevbuy(hh,young_imp,type,inten,minten,y,m-1)
 952  -v_aactLevsell(hh,young_imp,type,inten,minten,y,m-1)
 953  )
 954  ;
 955   
 956  E_youngm_loc2(hh,young_loc,type,y,m)$(ord(m) gt 2 )..
 957  Sum((inten,minten),v_aactLev(hh,young_loc,type,inten,minten,y,m))=e=
 958  Sum((inten,minten),
 959  v_aactLev(hh,'adultf_loc',type,inten,minten,y,m-1)*p_rateFert('adultf_loc'
      ,type,inten)*p_sexratio(young_loc,type,inten)+
 960  v_aactLev(hh,young_loc,type,inten,minten,y,m-1)*(1-p_grad(young_loc,type,i
      nten))*(1-p_mort(young_loc,type,minten))
 961  +v_aactLevbuy(hh,young_loc,type,inten,minten,y,m-1)
 962  -v_aactLevsell(hh,young_loc,type,inten,minten,y,m-1)
 963  )
 964  ;
 965   
 966  E_youngm_imp2(hh,young_imp,type,y,m)$(ord(m) gt 2 )..
 967  Sum((inten,minten),v_aactLev(hh,young_imp,type,inten,minten,y,m))=e=
 968  Sum((inten,minten),
 969  v_aactLev(hh,'adultf_imp',type,inten,minten,y,m-1)*p_rateFert('adultf_imp'
      ,type,inten)*p_sexratio(young_imp,type,inten)+
 970  v_aactLev(hh,young_imp,type,inten,minten,y,m-1)*(1-p_grad(young_imp,type,i
      nten))*(1-p_mort(young_imp,type,minten)
 971  +v_aactLevbuy(hh,young_imp,type,inten,minten,y,m-1)
 972  -v_aactLevsell(hh,young_imp,type,inten,minten,y,m-1)
 973  ))
 974  ;
 975   
 976  E_youngy_loc(hh,young_loc,type,y,'m01')$(ord(y) gt 2 )..
 977  sum((inten,minten),v_aactLev(hh,young_loc,type,inten,minten,y,'m01'))=e=
 978  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y-1,'m12')*
      p_rateFert('adultf_loc',type,inten)*p_sexratio(young_loc,type,inten)
 979  + v_aactLev(hh,young_loc,type,inten,minten,y-1,'m12')*(1-p_grad(young_loc,
      type,inten)
 980  +v_aactLevbuy(hh,young_loc,type,inten,minten,y-1,'m12')
 981  -v_aactLevsell(hh,young_loc,type,inten,minten,y-1,'m12'))
 982  );
 983   
 984  E_youngy_imp(hh,young_imp,type,y,'m01')$(ord(y) gt 2)..
 985  sum((inten,minten),v_aactLev(hh,young_imp,type,inten,minten,y,'m01'))=e=
 986  sum((inten,minten),
 987  v_aactLev(hh,'adultf_imp',type,inten,minten,y-1,'m12')*p_rateFert('adultf_
      imp',type,inten)*p_sexratio(young_imp,type,inten)+
 988  v_aactLev(hh,young_imp,type,inten,minten,y-1,'m12')*(1-p_grad(young_imp,ty
      pe,inten))*(1-p_mort(young_imp,type,minten))
 989  +v_aactLevbuy(hh,young_imp,type,inten,minten,y-1,'m12')
 990  -v_aactLevsell(hh,young_imp,type,inten,minten,y-1,'m12'));
 991  ;
 992   
 993  ** WEANERS
 994   
 995  E_fweanerm_loc(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
 996  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m))=e=
 997  Sum((inten,minten),
 998  v0_aactLev(hh,'youngf_loc',type,inten,minten)*p_grad('youngf_loc',type,int
      en)
 999  +v0_aactLev(hh,'weanerf_loc',type,inten,minten)*(1-p_grad('weanerf_loc',ty
      pe,inten))*(1-p_mort('weanerf_loc',type,minten))
1000  +v_aactLevbuy(hh,'weanerf_loc',type,inten,minten,y,m-1)
1001  -v_aactLevsell(hh,'weanerf_loc',type,inten,minten,y,m-1)) ;
1002   
1003  E_fweanerm_imp(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1004  *and sum(minten,v0_aactLev(hh,'weanerm_imp',type,inten,minten))
1005  sum((inten,minten),v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m))=e=
1006  sum((inten,minten),
1007  v0_aactLev(hh,'youngf_imp',type,inten,minten)*p_grad('youngf_imp',type,int
      en)
1008  +v0_aactLev(hh,'weanerf_imp',type,inten,minten)*(1-p_grad('weanerf_imp',ty
      pe,inten))*(1-p_mort('weanerf_imp',type,minten))
1009  +v_aactLevbuy(hh,'weanerf_imp',type,inten,minten,y,m-1)
1010  -v_aactLevsell(hh,'weanerf_imp',type,inten,minten,y,m-1))
1011  ;
1012   
1013  E_fweanerm_loc2(hh,type,y,m)$(ord(m) gt 2 )..
1014  *and sum(minten,v0_aactLev(hh,'weanerf_loc',type,inten,minten))
1015  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m))=e=
1016  sum((inten,minten),
1017  v_aactLev(hh,'youngf_loc',type,inten,minten,y,m-1)*p_grad('youngf_loc',typ
      e,inten)
1018  +v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m-1)*(1-p_grad('weanerf_lo
      c',type,inten))*(1-p_mort('weanerf_loc',type,minten))
1019  +v_aactLevbuy(hh,'weanerf_loc',type,inten,minten,y,m-1)
1020  -v_aactLevsell(hh,'weanerf_loc',type,inten,minten,y,m-1));
1021   
1022  E_fweanerm_imp2(hh,type,y,m)$(ord(m) gt 2 )..
1023  *and sum(minten,v0_aactLev(hh,'weanerf_imp',type,inten,minten))
1024  sum((inten,minten),v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m))=e=
1025  sum((inten,minten),
1026  v_aactLev(hh,'youngf_imp',type,inten,minten,y,m-1)*p_grad('youngf_imp',typ
      e,inten)
1027  +v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m-1)*(1-p_grad('weanerf_im
      p',type,inten))*(1-p_mort('weanerf_imp',type,minten))
1028  +v_aactLevbuy(hh,'weanerf_imp',type,inten,minten,y,m-1)
1029  -v_aactLevsell(hh,'weanerf_imp',type,inten,minten,y,m-1)
1030  );
1031   
1032  E_mweanerm_loc(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1033  *and sum(minten,v0_aactLev(hh,'weanerm_loc',type,inten,minten))
1034  sum((inten,minten),v_aactLev(hh,'weanerm_loc',type,inten,minten,y,m))=e=
1035  sum((inten,minten),
1036  v0_aactLev(hh,'youngm_loc',type,inten,minten)*p_grad('youngm_loc',type,int
      en)*(1-p_mort('weanerm_loc',type,minten))
1037  +v0_aactLev(hh,'weanerm_loc',type,inten,minten)*(1-p_grad('weanerm_loc',ty
      pe,inten))
1038  +v_aactLevbuy(hh,'weanerm_loc',type,inten,minten,y,m-1)
1039  -v_aactLevsell(hh,'weanerm_loc',type,inten,minten,y,m-1));
1040   
1041  E_mweanerm_imp(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1042  * and sum(minten,v0_aactLev(hh,'weanerm_imp',type,inten,minten))
1043  sum((inten,minten),v_aactLev(hh,'weanerm_imp',type,inten,minten,y,m))=e=
1044  Sum((inten,minten),
1045  v0_aactLev(hh,'youngm_imp',type,inten,minten)*p_grad('youngm_imp',type,int
      en)*(1-p_mort('weanerm_imp',type,minten))
1046  +v0_aactLev(hh,'weanerm_imp',type,inten,minten)*(1-p_grad('weanerm_imp',ty
      pe,inten))
1047  +v_aactLevbuy(hh,'weanerm_imp',type,inten,minten,y,m-1)
1048  -v_aactLevsell(hh,'weanerm_imp',type,inten,minten,y,m-1));
1049   
1050  E_mweanerm_loc2(hh,type,y,m)$(ord(m) gt 2 )..
1051  *and sum(minten,v0_aactLev(hh,'weanerm_loc',type,inten,minten))
1052  sum((inten,minten),v_aactLev(hh,'weanerm_loc',type,inten,minten,y,m))=e=
1053  sum((inten,minten),
1054  v_aactLev(hh,'youngm_loc',type,inten,minten,y,m-1)*p_grad('youngm_loc',typ
      e,inten)*(1-p_mort('weanerm_loc',type,minten))
1055  +v_aactLev(hh,'weanerm_loc',type,inten,minten,y,m-1)*(1-p_grad('weanerm_lo
      c',type,inten))
1056  +v_aactLevbuy(hh,'weanerm_loc',type,inten,minten,y,m-1)
1057  -v_aactLevsell(hh,'weanerm_loc',type,inten,minten,y,m-1));
1058   
1059  E_mweanerm_imp2(hh,type,y,m)$(ord(m) gt 2 )..
1060  *and sum(minten,v0_aactLev(hh,'weanerm_imp',type,inten,minten))
1061  sum((inten,minten),v_aactLev(hh,'weanerm_imp',type,inten,minten,y,m))=e=
1062  sum((inten,minten),
1063  v_aactLev(hh,'youngm_imp',type,inten,minten,y,m-1)*p_grad('youngm_imp',typ
      e,inten)*(1-p_mort('weanerm_imp',type,minten))
1064  +v_aactLev(hh,'weanerm_imp',type,inten,minten,y,m-1)*(1-p_grad('weanerm_im
      p',type,inten))
1065  +v_aactLevbuy(hh,'weanerm_imp',type,inten,minten,y,m-1)
1066  -v_aactLevsell(hh,'weanerm_imp',type,inten,minten,y,m-1));
1067   
1068  E_fweanery_loc(hh,type,y,'m01')$(ord(y) gt 1 )..
1069  *and sum(minten,v0_aactLev(hh,'weanerf_loc',type,inten,minten))
1070  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y,'m01'))=
      e=
1071  sum((inten,minten),
1072  v_aactLev(hh,'youngf_loc',type,inten,minten,y-1,'m12')*p_grad('youngf_loc'
      ,type,inten)*(1-p_mort('weanerf_loc',type,minten))
1073  +v_aactLev(hh,'weanerf_loc',type,inten,minten,y-1,'m12')*(1-p_grad('weaner
      f_loc',type,inten))
1074  +v_aactLevbuy(hh,'weanerf_loc',type,inten,minten,y-1,'m12')
1075  -v_aactLevsell(hh,'weanerf_loc',type,inten,minten,y-1,'m12')
1076  );
1077   
1078  E_fweanery_imp(hh,type,y,'m01')$(ord(y) gt 1 )..
1079  *and sum(minten,v0_aactLev(hh,'weanerf_imp',type,inten,minten))
1080  sum((inten,minten),v_aactLev(hh,'weanerf_imp',type,inten,minten,y,'m01'))=
      e=
1081  sum((inten,minten),v_aactLev(hh,'youngf_imp',type,inten,minten,y-1,'m12')*
      p_grad('youngf_imp',type,inten)*(1-p_mort('weanerf_imp',type,minten))
1082  +v_aactLev(hh,'weanerf_imp',type,inten,minten,y-1,'m12')*(1-p_grad('weaner
      f_imp',type,inten))
1083  +v_aactLevbuy(hh,'weanerf_imp',type,inten,minten,y-1,'m12')
1084  -v_aactLevsell(hh,'weanerf_imp',type,inten,minten,y-1,'m12'));
1085   
1086  E_mweanery_loc(hh,type,y,'m01')$(ord(y) gt 1 )..
1087  *and sum(minten,v0_aactLev(hh,'weanerm_loc',type,inten,minten))
1088  sum((inten,minten),
1089  v_aactLev(hh,'weanerm_loc',type,inten,minten,y,'m01'))=e=
1090  sum((inten,minten),
1091  v_aactLev(hh,'youngm_loc',type,inten,minten,y-1,'m12')*p_grad('youngm_loc'
      ,type,inten)*(1-p_mort('weanerm_loc',type,minten))
1092  +v_aactLev(hh,'weanerm_loc',type,inten,minten,y-1,'m12')*(1-p_grad('weaner
      m_loc',type,inten))
1093  +v_aactLevbuy(hh,'weanerm_loc',type,inten,minten,y-1,'m12')
1094  -v_aactLevsell(hh,'weanerm_loc',type,inten,minten,y-1,'m12')
1095  );
1096   
1097  E_mweanery_imp(hh,type,y,'m01')$(ord(y) gt 1 )..
1098  *and sum(minten,v0_aactLev(hh,'weanerm_imp',type,inten,minten))
1099  sum((inten,minten),v_aactLev(hh,'weanerm_imp',type,inten,minten,y,'m01'))=
      e=
1100  sum((inten,minten),
1101  v_aactLev(hh,'youngm_imp',type,inten,minten,y-1,'m12')*p_grad('youngm_imp'
      ,type,inten)*(1-p_mort('weanerm_imp',type,minten))
1102  +v_aactLev(hh,'weanerm_imp',type,inten,minten,y-1,'m12')*(1-p_grad('weaner
      m_imp',type,inten))*(1-p_mort('weanerm_imp',type,minten))
1103  +v_aactLevbuy(hh,'weanerm_imp',type,inten,minten,y-1,'m12')
1104  -v_aactLevsell(hh,'weanerm_imp',type,inten,minten,y-1,'m12'));
1105   
1106  ** ADULTS
1107  * y = 1 and m = 2
1108  E_adultfm_loc(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1109  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1110  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y,m))=e=
1111  sum((inten,minten),
1112  v0_aactLev(hh,'weanerf_loc',type,inten,minten)*p_grad('weanerf_loc',type,i
      nten)*(1-p_mort('weanerf_loc',type,minten))
1113  +v0_aactLev(hh,'adultf_loc',type,inten,minten)*(1-p_grad('adultf_loc',type
      ,inten))*(1-p_mort('adultf_loc',type,minten))
1114  +v_aactLevbuy(hh,'adultf_loc',type,inten,minten,y,m-1)
1115  -v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m-1))
1116  ;
1117   
1118  E_adultfm_imp(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1119  * and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1120  sum((inten,minten),v_aactLev(hh,'adultf_imp',type,inten,minten,y,m))=e=
1121  sum((inten,minten),
1122  v0_aactLev(hh,'weanerf_imp',type,inten,minten)*p_grad('weanerf_imp',type,i
      nten) *(1-p_mort('weanerf_imp',type,minten))
1123  +v0_aactLev(hh,'adultf_imp',type,inten,minten)*(1-p_grad('adultf_imp',type
      ,inten))*(1-p_mort('adultf_imp',type,minten))
1124  +v_aactLevbuy(hh,'adultf_imp',type,inten,minten,y,m-1)
1125  -v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m-1))
1126  ;
1127   
1128  * y = 1 and m > 2
1129  E_adultfm_loc2(hh,type,y,m)$(ord(m) gt 2 and ord(y) eq 1 )..
1130  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1131  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y,m))=e=
1132  sum((inten,minten),
1133  v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m-1)*p_grad('weanerf_loc',t
      ype,inten)*(1-p_mort('weanerf_loc',type,minten))
1134  +v_aactLev(hh,'adultf_loc',type,inten,minten,y,m-1)*(1-p_grad('adultf_loc'
      ,type,inten))*(1-p_mort('adultf_loc',type,minten))
1135  +v_aactLevbuy(hh,'adultf_loc',type,inten,minten,y,m-1)
1136  -v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m-1));
1137   
1138  E_adultfm_imp2(hh,type,y,m)$(ord(m) gt 2 and ord(y) eq 1 )..
1139  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1140  sum((inten,minten),v_aactLev(hh,'adultf_imp',type,inten,minten,y,m))=e=
1141  sum((inten,minten),
1142  v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m-1)*p_grad('weanerf_imp',t
      ype,inten) *(1-p_mort('weanerf_imp',type,minten))
1143  +v_aactLev(hh,'adultf_imp',type,inten,minten,y,m-1)*(1-p_grad('adultf_imp'
      ,type,inten))*(1-p_mort('adultf_imp',type,minten))
1144  +v_aactLevbuy(hh,'adultf_imp',type,inten,minten,y,m-1)
1145  -v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m-1));
1146   
1147  * y > 1 and m = 1
1148  E_adultfy_loc(hh,type,y,'m01')$(ord(y) gt 1 )..
1149  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1150  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y,'m01'))=e
      =
1151  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y-1,'m12')
      *p_grad('weanerf_loc',type,inten)*(1-p_mort('weanerf_loc',type,minten))
1152  +v_aactLev(hh,'adultf_loc',type,inten,minten,y-1,'m12')*(1-p_grad('adultf_
      loc',type,inten))*(1-p_mort('adultf_loc',type,minten))
1153  +v_aactLevbuy(hh,'adultf_loc',type,inten,minten,y-1,'m12')
1154  -v_aactLevsell(hh,'adultf_loc',type,inten,minten,y-1,'m12'));
1155   
1156  E_adultfy_imp(hh,type,y,'m01')$(ord(y) gt 1 )..
1157  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1158  sum((inten,minten),v_aactLev(hh,'adultf_imp',type,inten,minten,y,'m01'))=e
      =
1159  sum((inten,minten),
1160  v_aactLev(hh,'weanerf_imp',type,inten,minten,y-1,'m12')*p_grad('weanerf_im
      p',type,inten)*(1-p_mort('weanerf_imp',type,minten))
1161  +v_aactLev(hh,'adultf_imp',type,inten,minten,y-1,'m12')*(1-p_grad('adultf_
      imp',type,inten))*(1-p_mort('adultf_imp',type,minten))
1162  +v_aactLevbuy(hh,'adultf_imp',type,inten,minten,y-1,'m12')
1163  -v_aactLevsell(hh,'adultf_imp',type,inten,minten,y-1,'m12'));
1164   
1165  * y > 1 and m > 1
1166  E_adultfy_loc2(hh,type,y,m)$(ord(y) gt 1 and ord(m) gt 1 )..
1167  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1168  sum((inten,minten),v_aactLev(hh,'adultf_loc',type,inten,minten,y,m))=e=
1169  sum((inten,minten),v_aactLev(hh,'weanerf_loc',type,inten,minten,y,m-1)*p_g
      rad('weanerf_loc',type,inten)*(1-p_mort('weanerf_loc',type,minten))
1170  +v_aactLev(hh,'adultf_loc',type,inten,minten,y,m-1)*(1-p_grad('adultf_loc'
      ,type,inten))*(1-p_mort('adultf_loc',type,minten))
1171  +v_aactLevbuy(hh,'adultf_loc',type,inten,minten,y,m-1)
1172  -v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m-1));
1173   
1174  E_adultfy_imp2(hh,type,y,m)$(ord(y) gt 1 and ord(m) gt 1 )..
1175  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1176  sum((inten,minten),v_aactLev(hh,'adultf_imp',type,inten,minten,y,m))=e=
1177  sum((inten,minten),v_aactLev(hh,'weanerf_imp',type,inten,minten,y,m-1)*p_g
      rad('weanerf_imp',type,inten)*(1-p_mort('weanerf_imp',type,minten))
1178  +v_aactLev(hh,'adultf_imp',type,inten,minten,y,m-1)*(1-p_grad('adultf_imp'
      ,type,inten))*(1-p_mort('adultf_imp',type,minten))
1179  +v_aactLevbuy(hh,'adultf_imp',type,inten,minten,y,m-1)
1180  -v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m-1));
1181   
1182  * Sales
1183   
1184  E_adultfsold_loc2(hh,type,y,m)$((ord(m) gt 1) )..
1185  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1186  sum((inten,minten),v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m))=e
      =
1187  sum((inten,minten),
1188  v_aactLev(hh,'adultf_loc',type,inten,minten,y,m)*p_grad('adultf_loc',type,
      inten)*(1-p_mort('adultf_loc',type,minten)));
1189  ;
1190   
1191  E_adultfsold_imp2(hh,type,y,m)$((ord(m) gt 1) )..
1192  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1193  sum((inten,minten),v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m))=e
      =
1194  sum((inten,minten),
1195  v_aactLev(hh,'adultf_imp',type,inten,minten,y,m)*p_grad('adultf_imp',type,
      inten)*(1-p_mort('adultf_imp',type,minten)));
1196  ;
1197   
1198   
1199  E_adultfsold_loc3(hh,type,y,m)$(ord(m) eq 1 and ord(y) gt 1 )..
1200  *and sum(minten,v0_aactLev(hh,'adultf_loc',type,inten,minten))
1201  sum((inten,minten),v_aactLevsell(hh,'adultf_loc',type,inten,minten,y,m))=e
      =
1202  Sum((inten,minten),
1203  v_aactLev(hh,'adultf_loc',type,inten,minten,y-1,'m12')*p_grad('adultf_loc'
      ,type,inten)*(1-p_mort('adultf_loc',type,minten)));
1204  ;
1205   
1206  E_adultfsold_imp3(hh,type,y,m)$(ord(m) eq 1 and ord(y) gt 1 )..
1207  *and sum(minten,v0_aactLev(hh,'adultf_imp',type,inten,minten))
1208  sum((inten,minten),v_aactLevsell(hh,'adultf_imp',type,inten,minten,y,m))=e
      =
1209  Sum((inten,minten),
1210  v_aactLev(hh,'adultf_imp',type,inten,minten,y-1,'m12')*p_grad('adultf_imp'
      ,type,inten)*(1-p_mort('adultf_imp',type,minten)))
1211  ;
1212   
1213  e_reprod_loc1(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1214  sum((inten,minten),v_aactLev(hh,'reprod_loc',type,inten,minten,y,m))=e=
1215  sum((inten,minten),
1216  v0_aactLev(hh,'weanerm_loc',type,inten,minten)*p_grad('weanerm_loc',type,i
      nten)*(1-p_mort('weanerm_loc',type,minten))
1217  +v0_aactLev(hh,'reprod_loc',type,inten,minten)*(1-p_grad('weanerm_loc',typ
      e,inten))
1218  +v_aactLevbuy(hh,'reprod_loc',type,inten,minten,y,m-1)
1219  -v_aactLevsell(hh,'reprod_loc',type,inten,minten,y,m-1))
1220  ;
1221   
1222  e_reprod_loc2(hh,type,y,m)$(ord(m) gt 2)..
1223  sum((inten,minten),v_aactLev(hh,'reprod_loc',type,inten,minten,y,m))=e=
1224  sum((inten,minten),
1225  v_aactLev(hh,'weanerm_loc',type,inten,minten,y,m-1)*p_grad('weanerm_loc',t
      ype,inten)*(1-p_mort('weanerm_loc',type,minten))
1226  +v_aactLev(hh,'reprod_loc',type,inten,minten,y,m-1)*(1-p_grad('weanerm_loc
      ',type,inten))
1227  +v_aactLevbuy(hh,'reprod_loc',type,inten,minten,y,m-1)
1228  -v_aactLevsell(hh,'reprod_loc',type,inten,minten,y,m-1))
1229  ;
1230   
1231  e_reprod_loc3(hh,type,y,m)$(ord(m) eq 1 and ord(y) gt 1 )..
1232  sum((inten,minten),v_aactLev(hh,'reprod_loc',type,inten,minten,y,m))=e=
1233  sum((inten,minten),
1234  v_aactLev(hh,'weanerm_loc',type,inten,minten,y-1,'m12')*p_grad('weanerm_lo
      c',type,inten)*(1-p_mort('weanerm_loc',type,minten))
1235  +v_aactLev(hh,'reprod_loc',type,inten,minten,y-1,'m12')*(1-p_grad('weanerm
      _loc',type,inten))
1236  +v_aactLevbuy(hh,'reprod_loc',type,inten,minten,y-1,'m12')
1237  -v_aactLevsell(hh,'reprod_loc',type,inten,minten,y-1,'m12'))
1238  ;
1239   
1240  e_reprod_imp1(hh,type,y,m)$(ord(m) eq 2 and ord(y) eq 1 )..
1241  sum((inten,minten),v_aactLev(hh,'reprod_imp',type,inten,minten,y,m))=e=
1242  sum((inten,minten),
1243  v0_aactLev(hh,'weanerm_imp',type,inten,minten)*p_grad('weanerm_imp',type,i
      nten)*(1-p_mort('weanerm_imp',type,minten))
1244  +v0_aactLev(hh,'reprod_imp',type,inten,minten)*(1-p_grad('weanerm_imp',typ
      e,inten))
1245  +v_aactLevbuy(hh,'reprod_imp',type,inten,minten,y,m-1)
1246  -v_aactLevsell(hh,'reprod_imp',type,inten,minten,y,m-1))
1247  ;
1248   
1249  e_reprod_imp2(hh,type,y,m)$(ord(m) gt 2)..
1250  sum((inten,minten),v_aactLev(hh,'reprod_imp',type,inten,minten,y,m))=e=
1251  sum((inten,minten),
1252  v_aactLev(hh,'weanerm_imp',type,inten,minten,y,m-1)*p_grad('weanerm_imp',t
      ype,inten)*(1-p_mort('weanerm_imp',type,minten))
1253  +v_aactLev(hh,'reprod_imp',type,inten,minten,y,m-1)*(1-p_grad('weanerm_imp
      ',type,inten))
1254  +v_aactLevbuy(hh,'reprod_imp',type,inten,minten,y,m-1)
1255  -v_aactLevsell(hh,'reprod_imp',type,inten,minten,y,m-1))
1256  ;
1257   
1258   
1259  e_reprod_imp3(hh,type,y,m)$(ord(m) eq 1 and ord(y) gt 1 )..
1260  sum((inten,minten),v_aactLev(hh,'reprod_imp',type,inten,minten,y,m))=e=
1261  sum((inten,minten),
1262  v_aactLev(hh,'weanerm_imp',type,inten,minten,y-1,'m12')*p_grad('weanerm_im
      p',type,inten)*(1-p_mort('weanerm_imp',type,minten))
1263  +v_aactLev(hh,'reprod_imp',type,inten,minten,y-1,'m12')*(1-p_grad('weanerm
      _imp',type,inten))
1264  +v_aactLevbuy(hh,'reprod_imp',type,inten,minten,y-1,'m12')
1265  -v_aactLevsell(hh,'reprod_imp',type,inten,minten,y-1,'m12'));
1266   
1267   
1268  e_reprod(hh,y,m)..
1269    Sum((reprod_loc,inten,type,minten),v_aactLev(hh,reprod_loc,type,inten,mi
      nten,y,m))    =g=
1270  Sum((adultf_loc,inten,type,minten),v_aactLev(hh,adultf_loc,type,inten,mint
      en,y,m))*0.04   ;
1271   
1272   
1273   
1274   
1275   
1276   
1277   
1278  Model demogMod    /
1279     E_youngm_loc
1280     E_youngy_loc
1281     E_youngm_loc2
1282     E_fweanerm_loc
1283     E_fweanerm_loc2
1284     E_fweanery_loc
1285     E_mweanerm_loc
1286     E_mweanerm_loc2
1287     E_mweanery_loc
1288     E_adultfm_loc
1289     E_adultfm_loc2
1290     E_adultfy_loc
1291     E_adultfy_loc2
1292     E_adultfsold_loc2
1293     E_adultfsold_loc3
1294     E_reprod_loc1
1295     E_reprod_loc2
1296     E_reprod_loc3
1297   
1298   
1299     E_youngm_imp
1300     E_youngy_imp
1301     E_youngm_imp2
1302     E_fweanerm_imp
1303     E_fweanerm_imp2
1304     E_fweanery_imp
1305     E_mweanerm_imp
1306     E_mweanerm_imp2
1307     E_mweanery_imp
1308     E_adultfm_imp
1309     E_adultfm_imp2
1310     E_adultfy_imp
1311     E_adultfy_imp2
1312     E_adultfsold_imp2
1313     E_adultfsold_imp3
1314     E_reprod_imp1
1315     E_reprod_imp2
1316     E_reprod_imp3
1317   
1318     e_reprod
1319  /
1320  ;
1321   
1322  * Emissions module
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\emissions_module.gms
      This module includes equations that calculate GHG emissions from dairy pro
      duction on the farm.
      Note that these equations are run using a separate solve statement (i.e. t
      hey are not included in the main model) in order to
      reduce the solve time and size of the model. The emissions intensities are
       calculated in 'gen_baseline.gms' by dividing these emissions by total mil
      k and meat production
1329   
1330   
1331   
1332  Variables
1333  dummy                                                          'Dummy vari
      able for solving emissions module equations'
1334  v_enteric_methane(hh,y)                                        'Enteric me
      thane emissions (kg CO2eq/household/year)'
1335  v_Ym(hh,aaact,type,inten,minten,year,m)                        'Methane co
      nversion factor for a given animal (Ym) (%)'
1336  v_VS(hh,aaact,type,inten,minten,y,m)                           'Volatile s
      olids from manure (kg/household/month)'
1337  v_manure_methane(hh,y)                                         'Manure met
      hane (kg CO2eq/household/year)'
1338  v_manure_nitrous_oxide_direct(hh,y)                            'Direct man
      ure nitrous oxide (kg CO2eq/household/year)'
1339  v_manure_nitrous_oxide_leach(hh,y)                             'Leached ma
      nure nitrous oxide (kg CO2eq/household/year)'
1340  v_manure_nitrous_oxide_vol(hh,y)                               'Volatilize
      d manure nitrous oxide (kg CO2eq/household/year)'
1341  v_nitrogen_intake(hh,aaact,type,inten,minten,y,m)              'Nitrogen i
      ntake for a given animal (kg N/head/month)'
1342  v_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m)       'Nitrogen r
      etained for lactation for a given cow (kg/head/month)'
1343  v_nitrogen_retained_gain(hh,aaact,type,inten,minten,y,m)       'Nitrogen r
      etained for gain for a given animal (kg/head/month)'
1344  v_nitrogen_excretion(hh,aaact,type,inten,minten,y,m)           'Nitrogen e
      xcreted for a given animal (kg/head/month)'
1345  v_soil_nitrous_oxide(hh,y)                                     'Soil nitro
      us oxide from all feed sources (note that non-feed crops are excluded) (kg
       CO2eq/household/year)'
1346  v_fossil_fuel_CO2(hh,y)                                        'Carbon dio
      xide from fossil fuel energy (kg CO2/household/year)'
1347  v_LUC_CLC(hh,y)                                                'Carbon dio
      xide emissions from land converted to cropland (kg CO2/household/year)'
1348  ;
1349   
1350   
1351   
1352   
1353  Equations
1354  e_dummy
1355  e_enteric_fermentation           'Enteric fermentation from cattle in the 
      herd'
1356  e_Ym                             'Methane conversion factor (Ym)'
1357  e_VS                             'Manure volatile solids'
1358  e_manure_methane                 'Manure methane'
1359  e_nitrogen_intake                'Nitrogen intake'
1360  e_nitrogen_retained_lact         'Nitrogen retained for lactation'
1361  *e_nitrogen_retained_gain         'Nitrogen retained for gain'
1362  e_nitrogen_excretion             'Nitrogen excretion'
1363  e_manure_nitrous_oxide_direct    'Direct manure nitrous oxide'
1364  e_manure_nitrous_oxide_leach     'Leached manure nitrous oxide'
1365  e_manure_nitrous_oxide_vol       'Volatilized manure nitrous oxide'
1366  e_soil_nitrous_oxide             'Soil nitrous oxide'
1367  e_fossil_fuel_energy             'Fossil fuel energy'
1368  ;
1369   
1370   
1371  e_enteric_fermentation(hh,y)..                                            
              v_enteric_methane(hh,y) =e=   28*Sum((aaact,type,minten,inten,m),3
      0*v_aactLev(hh,aaact,type,inten,minten,y,m)*v_grossEnergy(hh,aaact,type,in
      ten,minten,y,m)*v_Ym(hh,aaact,type,inten,minten,y,m)/(100*55.65))     ;
1372   
1373  e_Ym(hh,aaact,type,inten,minten,y,m)..                                    
              v_Ym(hh,aaact,type,inten,minten,y,m)       =e= 3.7 - 0.243*v_dryMa
      tterIntake(hh,y,m,aaact,type,inten) + 0.0059*10*v_NDF(hh,y,m,aaact,type,in
      ten,minten)   +  0.0057*10*v_dmd(hh,y,m,aaact,type,inten,minten) ;
1374   
1375   
1376  * the below equation needs to be revised, see the equation listings in the
       appendix
1377  e_VS(hh,aaact,type,inten,minten,y,m)..                                    
              v_VS(hh,aaact,type,inten,minten,y,m) =e= 30*((v_grossEnergy(hh,aaa
      ct,type,inten,minten,y,m)-v_digestibleEnergy(hh,aaact,type,inten,minten,y,
      m))+((0.04*v_grossEnergy(hh,aaact,type,inten,minten,y,m)))*(0.92/18.45));
1378   
1379  e_manure_methane(hh,y)..                                                  
              v_manure_methane(hh,y)  =e=   28*Sum((breed_aaact(breed,aaact),typ
      e,inten,minten,m),v_aactLev(hh,aaact,type,inten,minten,y,m)*v_VS(hh,aaact,
      type,inten,minten,y,m)*p_B0*0.67*p_MCF(breed))          ;
1380   
1381  e_nitrogen_intake(hh,aaact,type,inten,minten,y,m)..                       
              v_nitrogen_intake(hh,aaact,type,inten,minten,y,m)  =e= (1/18.45)*(
      1/6.25)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dryMatter(feed
      )*p_grossEnergy(feed))*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p
      _dryMatter(feed)*p_crudeProtein(feed))/(.001+v_dryMatterIntake(hh,y,m,aaac
      t,type,inten));
1382   
1383  e_nitrogen_excretion(hh,aaact,type,inten,minten,y,m)..                    
              v_nitrogen_excretion(hh,aaact,type,inten,minten,y,m)  =e= v_nitrog
      en_intake(hh,aaact,type,inten,minten,y,m)*0.15;
1384  *- v_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m) - v_nitrogen_r
      etained_gain(hh,aaact,type,inten,minten,y,m)   ;
1385  * - v_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m);
1386  * n retained for milk, gain, fetal
1387   
1388  e_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m)..                
              v_nitrogen_retained_lact(hh,aaact,type,inten,minten,y,m) =e=   0.0
      35*p_milkprod(aaact,type,inten);
1389   
1390  *e_nitrogen_retained_gain(hh,aaact,type,inten,minten,y,m)..               
               v_nitrogen_retained_gain(hh,aaact,type,inten,minten,y,m) =e= p_ga
      in(aaact,type,inten)*(268-(7.03*p_NE_gain(hh,aaact,type,inten,minten,y,m)/
      (.001+p_gain(aaact,type,inten))))/(1000/6.25) ;
1391   
1392  e_manure_nitrous_oxide_direct(hh,y)..                                     
              v_manure_nitrous_oxide_direct(hh,y) =e=  265*Sum((aaact,type,inten
      ,minten,m),30*v_aactLev(hh,aaact,type,inten,minten,y,m)*v_nitrogen_excreti
      on(hh,aaact,type,inten,minten,y,m)*p_EF_3)      ;
1393  *(1/18.45)*(1/6.25)*Sum((feed),v_fdcons(hh,aaact,type,inten,y,m,feed)*p_dr
      yMatter(feed)*p_grossEnergy(feed))*Sum((feed),v_fdcons(hh,aaact,type,inten
      ,y,m,feed)*p_dryMatter(feed)*p_crudeProtein(feed))/(.001+v_dryMatterIntake
      (hh,y,m,aaact,type,inten));
1394  *265*Sum((aaact,type,inten,minten,m),30*v_aactLev(hh,aaact,type,inten,mint
      en,y,m)*v_nitrogen_excretion(hh,aaact,type,inten,minten,y,m)*p_EF_3)      
      ;
1395   
1396  e_manure_nitrous_oxide_vol(hh,y)..                                        
              v_manure_nitrous_oxide_vol(hh,y) =e=  265*Sum((aaact,type,inten,mi
      nten,m),30*v_aactLev(hh,aaact,type,inten,minten,y,m)*v_nitrogen_excretion(
      hh,aaact,type,inten,minten,y,m)*p_FRAC_vol*p_EF_4)      ;
1397   
1398  e_manure_nitrous_oxide_leach(hh,y)..                                      
              v_manure_nitrous_oxide_leach(hh,y) =e=  265*Sum((aaact,type,inten,
      minten,m),30*v_aactLev(hh,aaact,type,inten,minten,y,m)*v_nitrogen_excretio
      n(hh,aaact,type,inten,minten,y,m)*p_FRAC_leach*p_EF_5)      ;
1399   
1400  e_soil_nitrous_oxide(hh,y)..                                              
              v_soil_nitrous_oxide(hh,y)=e=  265*Sum((fodder),v_areaCrop(hh,y,fo
      dder)*p_nitrous_oxide(fodder)) + 265*Sum((non_fodder),v_areaCrop(hh,y,non_
      fodder)*p_nitrous_oxide(non_fodder)*p_alloc_factor(non_fodder))*Sum((resid
      ues_non_fodder(residues,non_fodder),m),v_residuesfeedm(hh,residues,y,m))/S
      um((residues_non_fodder(residues,non_fodder),m),0.001+v_residues(hh,y,resi
      dues,m))
1401  +  265*Sum((m,feed_off_farm),v_feedbuy(hh,feed_off_farm,y,m)*p_nitrous_oxi
      de_offfarm(feed_off_farm)/1000);
1402   
1403  e_fossil_fuel_energy(hh,y)..                                              
              v_fossil_fuel_CO2(hh,y)  =e=    sum((m,feed_off_farm),(1/1000)*v_f
      eedbuy(hh,feed_off_farm,y,m)*p_fossil_fuel_emissions(feed_off_farm));
1404   
1405  *e_Total(hh,y)..                                                          
               v_Total_GHG_emissions(hh,y)  =e= v_enteric_methane(hh,y) + v_manu
      re_methane(hh,y)  +  v_manure_nitrous_oxide_vol(hh,y) + v_manure_nitrous_o
      xide_leach(hh,y) + v_manure_nitrous_oxide_direct(hh,y)+ v_soil_nitrous_oxi
      de(hh,y)      ;
1406   
1407  *e_Emissions_Intensity(hh,y)..                                            
               v_Emissions_Intensity(hh,y)*sum((adultf,type,inten,m),v_prodQmilk
      (hh,adultf,type,inten,y,m))   =e=  v_Total_GHG_emissions(hh,y)      ;
1408   
1409  e_dummy..  dummy =e= 10;
1410   
1411  Model Emissionsmod
1412  /
1413  e_enteric_fermentation
1414  e_Ym
1415  e_VS
1416  e_manure_methane
1417  e_nitrogen_intake
1418  e_nitrogen_retained_lact
1419  e_nitrogen_excretion
1420  *e_nitrogen_retained_gain
1421  e_manure_nitrous_oxide_direct
1422  e_manure_nitrous_oxide_leach
1423  e_manure_nitrous_oxide_vol
1424  e_soil_nitrous_oxide
1425  e_fossil_fuel_energy
1426  e_dummy
1427  /
1428   
1429   
1430   
1431   
1432   
1433   
1434  * Loan module
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\loan_module.gms
      This module includes all the equations relating to the loan. The equations
       in this model are only included if credit is turned on in 'gen_baseline.g
      ms'
       
1440   
1441  Variables
1442  v_loan(hh)                  'Value of loan taken out by household (TSh/hh)
      '
1443  v_loan_principle(hh,y)      'Remaining principle on loan in a given year (
      TSh)'
1444  v_loan_installment(hh,y)    'Installment paid towards loan principle in a 
      given year (TSh)'
1445  v_credit_interest(hh,y,m)   'Interest paid on loan in a given month (TSh/m
      onth)'
1446  ;
1447   
1448   
1449   
1450   
1451  Parameters
1452  p_r_loan(hh)                  'Interest rate on loan (as a fraction)'
1453  p_loan_installment(hh)        'Loan installment in current year (TSh)'
1454  p_loan_principle(hh,year)     'Loan principle in a given year (TSh)'
1455  p_loan_value(hh)              'Initial loan value (TSh)'
1456  p_credit_interest(hh)         'Credit interest (TSh)'
1457  ;
1458   
1459  p_loan_principle(hh,y)=0;
1460  p_loan_value(hh)=0    ;
1461  p_loan_installment(hh)=0 ;
1462  p_credit_interest(hh) =0;
1463  *p_r_loan(hh)  =0.15;
1464   
1465   
1466  * Specify maximum loan amount of 10,000 lc
1467  v_loan.up(hh)=500000;
1468  v_loan.lo(hh)=0   ;
1469   
1470   
1471  Equations
1472  loan_installment    'Annual payment on loan (10% of principle is paid back
       per year) (lc/yr)'
1473  loan_principle      'Amortization schedule for loan'
1474  loan_payments       'Annual payment on loan interest (lc/yr)'
1475   
1476  ;
1477   
1478  loan_installment(hh,y)..                   v_loan_installment(hh,y) =e=   
      v_loan(hh)*(0.1)  ;
1479   
1480  loan_principle(hh,y)..                     v_loan_principle(hh,y) =e=  v_l
      oan(hh) - (ord(y)*v_loan_installment(hh,y))   ;
1481   
1482  loan_payments(hh,y,m)..                      v_credit_interest(hh,y,m) =e=
         p_r_loan(hh)*v_loan_principle(hh,y)/12     ;
1483   
1484   
1485   
1486  model loanmod
1487  /
1488  loan_payments
1489  loan_principle
1490  loan_installment
1491  /
1492   
1493  * Household module
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\household_module.gms
      This module includes all general equations related to the household, inclu
      ding labour constraints, cash constraints, and conditions relating to cred
      it expenses.
       
1499   
1500   
1501   
1502  Parameters
1503  p_labouravailablehome(hh,y,m)           'Monthly labour available from hou
      sehold members (person-days per month per household)'
1504  hhold_members(hh,hhold_member)          'Number of people of a given age c
      lass in the household'
1505  p_offFarmIncome(hh)                     'Annual off-farm income (lc/hh/yea
      r)'
1506  p_credit_interest(hh)                   'Annual expenses on credit interes
      t (lc/hh/year)'
1507  p_cash(hh)                              'Cash balance in beginning month (
      lc/hh)'
1508  ;
1509   
1510   
1511   
1512   
1513  Nonnegative Variables
1514  v_hhold_expen(hh,y,m)                'Household expenditure (lc/hh/month)'
1515  v_income(hh,y,m)                     'Total household income (lc/hh/yr)'
1516  v_cash(hh,y,m)                       'Cash available for the household in 
      a given year (lc)'
1517  v_labour_hired(hh,y,m)               'Total hired labour in a given month'
1518  v_labourcrophome(hh,y,m)             'Home labour dedicated to cropping ac
      tivities (person-days/month)'
1519  v_labourliveshome(hh,y,m)            'Home labour dedicated to livestock a
      ctivities (person-days/month)'
1520  v_cons(hh,y,m,good)                  'Consumption expenditure on good in y
      ear y and month m (Tsh/hh/m)'
1521  v_labour_hired_lives(hh,y,m)         'Hired labour for livestock activitie
      s (person-days/month)'
1522  v_labour_hired_crop(hh,y,m)          'Hired labour for cropping activities
       (person-days/month)'
1523  v_leisure(hh,y,m)                    'Leisure time (person-days/household/
      month)'
1524  v_tot_credit_expenses(hh,y,m)        'Total loan expenses in a given month
       (lc/month)'
1525  v_lives_expenses(hh,y,m)             'Total livestock expenses in a given 
      month (lc/month)'
1526  v_crop_expenses(hh,y,m)              'Total crop expenses in a given month
       (lc/month)'
1527   
1528  v_Qmilk_hcons(hh,y,m)                'Milk consumed at home (kg/household/
      month)'
1529  v_Qmilk_marketed(hh,y,m)             'Total amount of milk marketed (kg/ho
      usehold/month)'
1530  v_Qmilk_marketed_contract(hh,y,m)    'Total amount of milk marketed via a 
      contract (kg/household/month)'
1531  v_Qmilk_marketed_informal(hh,y,m)    'Total amount of milk marketed inform
      ally (kg/household/month)'
1532  v_Land_use(hh,y)                     'Total on farm and upstream land use 
      (ha)'
1533  v_crop_Land_use(hh,y)                'Total land dedicated to feed crops (
      ha)'
1534  ;
1535   
1536  *specify home consumption of milk and household expenditure
1537  v_Qmilk_hcons.fx(hh,y,m)=5*45/12;
1538  v_hhold_expen.fx(hh,y,laterm)=4000000/12;
1539   
1540  *variable bounds
1541  v_leisure.lo(hh,y,m)=0;
1542  v_labour_hired_crop.lo(hh,y,m)=0;
1543   
1544  Equations
1545  e_cash_flow                'Cash flow equation without credit'
1546  e_cash_flow2               'Cash flow equation with credit'
1547  e_loan_payments            'Payments on loans in a given period'
1548  e_labourbalancetotal       'Labour balance equation'
1549  e_labourbalancecrop        'Labour balance equation for crops'
1550  e_labourbalancelives       'Labour balance equation for livestock'
1551  e_homelabour               'Home labour balance equation'
1552  e_credit_expenses          'Credit expenses in a given month (lc/household
      /month)'
1553  e_home_produce_demand      'Consumption of home produced food '
1554  e_home_food_demand         'Consumption of milk produced by the household'
1555  e_dairy_land_use           'Calculate sum of cropland, pastureland, and ra
      ngeland (ha)'
1556  e_cons                     'Calculate consumption of food and non-food goo
      ds'
1557  e_milk_marketed            'Total amount of milk marketed'
1558  e_feed_crop_land           'Total land dedicated to feed crops'
1559  e_feed_crop_land_on_farm   'Total land dedicated to feed crops on farm'
1560  e_feed_crop_land_off_farm  'Total land dedicated to feed crops off farm'
1561  ;
1562   
1563   
1564  *-- Cash constraint
1565   
1566  e_cash_flow(hh,y,m)..          v_cash(hh,y,m) =e= p_cash(hh)$((ord(y) eq 1
      ) and (ord(m) eq 1)) + v_cash(hh,y,m-1)$(ord(m) gt 1) + v_cash(hh,y-1,'m12
      ')$((ord(m) eq 1) and (ord(y) gt 1))  + (v_income(hh,y,m-1)$(ord(m) gt 1))
       + v_income(hh,y-1,'m12')$((ord(y) gt 1) and (ord(m) eq 1))- sum(good, v_c
      ons(hh,y,m,good)) ;
1567  *+  p_offFarmIncome(hh)*(1/12)
1568   
1569  e_cash_flow2(hh,y,m)..          v_cash(hh,y,m) =e= p_cash(hh)$((ord(y) eq 
      1) and (ord(m) eq 1)) + v_cash(hh,y,m-1)$(ord(m) gt 1) + v_cash(hh,y-1,'m1
      2')$((ord(m) eq 1) and (ord(y) gt 1)) + (v_income(hh,y,m-1)$(ord(m) gt 1))
       + (v_income(hh,y-1,'m12')$((ord(y) gt 1) and (ord(m) eq 1)))  - sum(good,
       v_cons(hh,y,m,good)) - (v_tot_credit_expenses(hh,y-1,'m12'))$((ord(m) eq 
      1) and (ord(y) gt 1))
1570  - ((  v_tot_credit_expenses(hh,y,m-1))$(ord(m) gt 1) );
1571   
1572  e_credit_expenses(hh,y,m)..                   v_tot_credit_expenses(hh,y,m
      )  =e=   (1/12)*v_credit_interest(hh,y,m)$(ord(y) gt 1) + (1/12)*v_loan_in
      stallment(hh,y)$(ord(y) gt 1) + (1/12)*p_credit_interest(hh)$(ord(y) eq 1)
       + (1/12)*p_loan_installment(hh)$(ord(y) eq 1) ;
1573   
1574  e_labourbalancetotal(hh,y,m)..                  v_totallabourdemcrop(hh,y,
      m)   + v_totallabourdemlive(hh,y,m)    =e= p_labouravailablehome(hh,y,m) -
       v_leisure(hh,y,m) + v_labour_hired_crop(hh,y,m) + v_labour_hired_lives(hh
      ,y,m);
1575   
1576  e_labourbalancecrop(hh,y,m)..                   v_totallabourdemcrop(hh,y,
      m)      =e= v_labourcrophome(hh,y,m) + v_labour_hired_crop(hh,y,m) ;
1577   
1578  e_labourbalancelives(hh,y,m)..                  v_totallabourdemlive(hh,y,
      m)    =e= v_labourliveshome(hh,y,m) + v_labour_hired_lives(hh,y,m) ;
1579   
1580  e_cons(hh,y,m,good)$(ord(m) gt 1)..                           v_cons(hh,y,
      m,good) =e= 100000*(0.75 + 0.55*(v_income(hh,y,m) - sum(good2,v_cons(hh,y,
      m,good2))))/1;
1581   
1582   
1583  e_home_produce_demand(hh,food,y,m)..            v_prdCrop(hh,y,food,m)   =
      e= v_crp_cons(hh,y,food,m);
1584   
1585  e_home_food_demand(hh,y,m)..                    sum((type,inten,cow),v_pro
      dQmilk(hh,cow,type,inten,y,m)) =e= v_Qmilk_marketed(hh,y,m)  + v_Qmilk_hco
      ns(hh,y,m);
1586   
1587  e_milk_marketed(hh,y,m)..                       v_Qmilk_marketed_contract(
      hh,y,m)  + v_Qmilk_marketed_informal(hh,y,m) =e= v_Qmilk_marketed(hh,y,m) 
      ;
1588   
1589  e_homelabour(hh,y,m)..                          p_labouravailablehome(hh,y
      ,m)   =e=   v_labourcrophome(hh,y,m) +  v_labourliveshome(hh,y,m) + v_leis
      ure(hh,y,m)  ;
1590   
1591  e_dairy_land_use(hh,y)..                        v_Land_use(hh,y) =e= sum(f
      odder,v_areaCrop(hh,y,fodder)) +  v_pasture_land(hh,y) +   v_graze_dmd(hh,
      y)   + sum((m,feed_off_farm),(1/1000)*v_feedbuy(hh,feed_off_farm,y,m)*1);
1592   
1593  e_feed_crop_land(hh,y)..                        v_feed_crop_land(hh,y)  =e
      =   Sum(fodder,v_areaCrop(hh,y,fodder))   +  Sum((feed_off_farm,m), (1/100
      0)*v_feedbuy(hh,feed_off_farm,y,m)/p_yield_feed_crop(feed_off_farm));
1594   
1595  e_feed_crop_land_on_farm(hh,y)..                v_feed_crop_land_on_farm(h
      h,y)  =e=   Sum(fodder,v_areaCrop(hh,y,fodder))   ;
1596   
1597  e_feed_crop_land_off_farm(hh,y)..               v_feed_crop_land_off_farm(
      hh,y)  =e=    Sum((feed_off_farm,m), (1/1000)*v_feedbuy(hh,feed_off_farm,y
      ,m)/p_yield_feed_crop(feed_off_farm));
1598   
1599   
1600   
1601  Model Householdmod
1602  /
1603  e_cash_flow
1605  e_labourbalancetotal
1606  e_labourbalancecrop
1607  e_labourbalancelives
1608  e_dairy_land_use
1609  e_cons
1611  e_homelabour
1612  e_home_produce_demand
1613  e_home_food_demand
1614  *e_dairy_crop_land_use
1615  e_milk_marketed
1616  e_feed_crop_land
1617  e_feed_crop_land_on_farm
1618  e_feed_crop_land_off_farm
1619  /
1620   
1621   
1622  * Risk module
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\risk_module.gms
      This module has the purpose of calculating the standard deviation in net p
      resent value based on random input and output prices.
      The standard deviations for dairy outputs (milk and meat), inputs (feeds a
      nd replacment animals), and on cash crops is based on the the distribution
      s of the variables
      obtained fromt the survey. The standard deviation of NPV is then calculate
      d using a monte carlo type method as described in the paper. This involves
       calculating
      the NPV over 100 different iterations, drawing randomly from the distbribu
      tions of the four random variables, and then calculating the random NPV th
      ese 100 different random NPVs.
1630   
1631   
1632   
1633   
1634  Set i /i1*i100/
1635   
1636  Parameters
1637  sigma_output(outputs)   'Standard deviation of output prices'
1638  /
1639  milk 15
1640  meat 45
1641  /
1642   
1643  sigma_feed(feed_off_farm)  'Standard deviation of feed prices'
1644  /
1645  maize_bran            40
1646  sunflower_seed_cake   20
1647  /
1648   
1649  sigma_animals(aaact)     'Standard deviation of replacement animal prices'
1650  /
1651  adultf_imp 25
1652  adultf_loc 25
1653  reprod_loc 25
1654  reprod_imp 25
1655  /
1656   
1657  sigma_cash_crop(cash)  'Standard deviation of cash crop prices'
1658  /
1659  banana 30
1660  /
1661   
1662  OPV(i,outputs)                  'Output price variability'
1663  FPV(i,feed_off_farm)            'Feed price variability'
1664  APV(i,aaact)                    'Animal price variability'
1665  CCPV(i,*)                       'Cash crop price variability'
1666  ;
1667   
1668  *Specify distributions of cash crop prices, input prices (feeds and animal
      s), and milk and meat prices
1669  CCPV(i,'banana')=normal(1,sigma_cash_crop('banana'));
1670  FPV(i,feed_off_farm)=normal(1,sigma_feed(feed_off_farm));
1671  APV(i,aaact)=normal(1,sigma_animals(aaact));
1672  OPV(i,'milk')= normal(1,sigma_output('milk'));
1673  OPV(i,'meat')= normal(1,sigma_output('meat'));
1674   
1675   
1676   
1677  Variables
1678  v_off_farm_income(hh,y)                     'Off farm income (TSh/hh/year)
      '
1679  v_income_lives_rd(hh,i,y,m)                 'Income from livestock activit
      ies (TSh/hh/year)'
1680  v_lives_expenses_rd(hh,i,y,m)               'Random livestock expenses in 
      ith iteration (TSh/hh/month)'
1681  v_income_crop_rd(hh,i,y,m)                  'Income from cropping activiti
      es (Tsh/hh/year)'
1682  v_income_rd(hh,i,y,m)                       'Random income in ith iteratio
      n (TSh/hh/month)'
1683  v_npv                                       'Net present value (lc/hh)'
1684  v_dev(i,hh,y,m)                             'Standard deviation of net pre
      sent value'
1685  v_stddev_income(hh,y,m)                     'Standard deviation of income'
1686  ;
1687   
1688   
1689  Equations
1690           e_offfarm_income_wo_loan_rd         'Off farm income (lc/hh/year)
      '
1691           e_offfarm_income_w_loan_rd          'Off farm income (lc/hh/year)
      '
1692           e_farm_income_lives_rd              'Livestock income income defi
      nition (lc/hh/year)'
1693           e_farm_income_crop_rd               'Crop enterprise income defin
      ition (lc/hh/year)'
1694           e_crop_expenses_rd                  'Annual expenses on crop prod
      uction (lc/hh/year)'
1695           e_livestock_expenses_rd             'Annual expenses on livestock
       production (lc/hh/year)'
1696           e_total_income_rd                   'Total household income (farm
       plus off farm) in a given year (lc/hh/year)'
1697           e_milk_contract_rd                  'Specify terms of milk contra
      ct'
1698           e_milk_no_contract_rd               'Specify no milk is marketed 
      under purchase agreement'
1699           e_dev                               'Specify deviation of income 
      for ith iteration'
1700           e_stdddev                           'Specify standard deviation o
      f income'
1701           e_objective2                        'Net present value'
1702  ;
1703   
1704  e_offfarm_income_w_loan_rd (hh,y)..        v_off_farm_income(hh,y) =e=   p
      _offFarmIncome(hh) -p_r_loan(hh)*v_loan_principle(hh,y)   - v_loan_install
      ment(hh,y)    ;
1705   
1706  e_offfarm_income_wo_loan_rd (hh,y)..       v_off_farm_income(hh,y) =e=   p
      _offFarmIncome(hh)    ;
1707   
1708  e_crop_expenses_rd (hh,y,m)..              v_crop_expenses(hh,y,m)  =e=  v
      _labour_hired_crop(hh,y,m)*p_labourPrice(hh) + Sum(c,v_areaCrop(hh,y,c)*p_
      cropcosts(hh,c)/12);
1709   
1710  e_livestock_expenses_rd(hh,i,y,m)..        v_lives_expenses_rd(hh,i,y,m) =
      e=
1711                                                sum((aaact,type,inten,minten
      ),v_aactLevbuy(hh,aaact,type,inten,minten,y,m)*p_purchPrice(hh,aaact)*APV(
      i,aaact))
1712                                             +  v_labour_hired_lives(hh,y,m)
      *p_labourPrice(hh)
1713                                             +  sum((feed_off_farm),v_feedbu
      y(hh,feed_off_farm,y,m)*p_feedprice(feed_off_farm)*FPV(i,feed_off_farm))
1714                                             +  sum((aaact,type,inten,minten
      ),v_aactLev(hh,aaact,type,inten,minten,y,m)*p_maintExpense(hh,aaact,type,m
      inten)/12);
1715   
1716  e_farm_income_crop_rd (hh,i,y,m)..         v_income_crop_rd(hh,i,y,m) =e= 
       Sum((cash), v_prdCrop(hh,y,cash,m)*p_crop_sell_price(hh,y,cash)*CCPV(i,'b
      anana'))  - v_crop_expenses(hh,y,m);
1717   
1718  e_farm_income_lives_rd(hh,i,y,m)..         v_income_lives_rd(hh,i,y,m) =e=
       sum((type,inten,aaact),v_prodQmeat(hh,aaact,type,inten,y,m)*p_meatPrice*O
      PV(i,'meat'))+ v_Qmilk_marketed_contract(hh,y,m) * p_milkPrice_contract + 
      v_Qmilk_marketed_informal(hh,y,m) * p_milkPrice * OPV(i,'milk') - v_lives_
      expenses_rd(hh,i,y,m);
1719   
1720  e_milk_contract_rd (hh,y,m)..              v_Qmilk_marketed_contract(hh,y,
      m) =l= 10000/12 ;
1721   
1722  e_milk_no_contract_rd (hh,y,m)..           v_Qmilk_marketed_contract(hh,y,
      m)  =e= 0;
1723   
1724  e_total_income_rd(hh,i,y,m)..              v_income_rd(hh,i,y,m) =e=  v_of
      f_farm_income(hh,y)/12 + v_income_crop_rd(hh,i,y,m) + v_income_lives_rd(hh
      ,i,y,m)  ;
1725   
1726  e_dev(i,hh,y,m)..                          v_dev(i,hh,y,m) =e= v_income(hh
      ,y,m) - v_income_rd(hh,i,y,m)   ;
1727   
1728  e_stdddev(hh,y,m)..                        v_stddev_income(hh,y,m) =e=  SQ
      RT{ SUM(i,power(v_dev(i,hh,y,m),2))/CARD(i)}   ;
1729   
1730  e_objective2..                             v_npv =e= sum( (hh,y,m) ,((v_in
      come(hh,y,m) - 0.25*v_stddev_income(hh,y,m)) / ( 1 + power(p_r,ord(y))) ) 
      )   ;
1731   
1732   
1733   
1734  Model risk_module
1735  /
1736  e_offfarm_income_wo_loan_rd
1738   e_farm_income_lives_rd
1739   e_farm_income_crop_rd
1740   e_total_income_rd
1741   e_livestock_expenses_rd
1742   e_crop_expenses_rd
1743   e_dev
1744   e_stdddev
1746  e_milk_no_contract_rd
1747  /
1748   
1749  * simulation model
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\simulation_model.gms
      This module has the purpose of defining the objective function of the glob
      al model. Note that the objective function that gets executed is dependent
       on whether risk is turned on/off
      in 'gen_baseline.gms'
       
1756   
1757   
1758   
1759  Variables
1760  v_off_farm_income(hh,y)           'Off farm income (lc/hh/year)'
1761  v_income_lives(hh,y,m)            'Income from livestock activities (lc/hh
      /year)'
1762  v_income_crop(hh,y,m)             'Income from cropping activities (lc/hh/
      year)'
1763  v_npv                             'Net present value (lc/hh)'
1764  v_milk_revenue_contract(hh,y,m)
1765  v_milk_revenue_informal(hh,y,m)
1766  ;
1767   
1768   
1769  Equations
1770           e_objective1                     'Objective function when credit 
      is turned off'
1771           e_objective2                     'Objective function when credit 
      is turned on'
1772           e_offfarm_income_wo_loan         'Off farm income (lc/hh/year)'
1773           e_offfarm_income_w_loan          'Off farm income (lc/hh/year)'
1774           e_farm_income_lives              'Livestock income income definit
      ion (lc/hh/year)'
1775           e_farm_income_crop               'Crop enterprise income definiti
      on (lc/hh/year)'
1776           e_crop_expenses                  'Annual expenses on crop product
      ion (lc/hh/year)'
1777           e_livestock_expenses             'Annual expenses on livestock pr
      oduction (lc/hh/year)'
1778           e_total_income                   'Total household income (farm pl
      us off farm) in a given year (lc/hh/year)'
1779           e_milk_revenue_contract
1780           e_milk_revenue_informal
1781           e_minimum_nutrient               'Specify minimum required nutrie
      nt intake from farm produce (crops)'
1782           e_milk_contract                  'Specify terms of milk contract'
1783           e_milk_no_contract               'Constraint on milk for when the
      re is no option of a contract'
1784  ;
1785   
1786  e_offfarm_income_w_loan(hh,y)..                 v_off_farm_income(hh,y) =e
      =   p_offFarmIncome(hh) -p_r_loan(hh)*v_loan_principle(hh,y)   - v_loan_in
      stallment(hh,y)    ;
1787   
1788  e_offfarm_income_wo_loan(hh,y)..                v_off_farm_income(hh,y) =e
      =   p_offFarmIncome(hh)    ;
1789   
1790  e_crop_expenses(hh,y,m)..                       v_crop_expenses(hh,y,m)  =
      e=  v_labour_hired_crop(hh,y,m)*p_labourPrice(hh) + Sum(c,v_areaCrop(hh,y,
      c)*p_cropcosts(hh,c)/12);
1791   
1792  e_livestock_expenses(hh,y,m)..                  v_lives_expenses(hh,y,m) =
      e=
1793  (
1794  sum((aaact,type,inten,minten),v_aactLevbuy(hh,aaact,type,inten,minten,y,m)
      *p_purchPrice(hh,aaact))
1795  +v_labour_hired_lives(hh,y,m)*p_labourPrice(hh)
1796  +sum((feed_off_farm),v_feedbuy(hh,feed_off_farm,y,m)*p_feedprice(feed_off_
      farm))
1797  +sum((aaact,type,inten,minten),v_aactLev(hh,aaact,type,inten,minten,y,m)*p
      _maintExpense(hh,aaact,type,minten)/12)
1798  );
1799   
1800  e_minimum_nutrient(hh,y,nut)..                  Sum((m,food),v_prdCrop(hh,
      y,food,m)*p_nutrientproperty(food,nut)) =g= p_hhold_adult_equivalents(hh)*
      p_nutrientrequirement(hh,nut)*p_FRAC_farmproduce(nut);
1801   
1802  e_farm_income_crop(hh,y,m)..                    v_income_crop(hh,y,m) =e= 
       Sum((cash), v_prdCrop(hh,y,cash,m)*p_crop_sell_price(hh,y,cash))  - v_cro
      p_expenses(hh,y,m);
1803  *Sum(cash,v_crop_sales_cash(hh,y,cash)*p_crop_sell_price(hh,y,cash))
1804   
1805  e_farm_income_lives(hh,y,m)..                   v_income_lives(hh,y,m) =e=
       sum((type,inten,aaact),v_prodQmeat(hh,aaact,type,inten,y,m)*p_meatPrice)+
         v_milk_revenue_contract(hh,y,m)  + v_milk_revenue_informal(hh,y,m)  - v
      _lives_expenses(hh,y,m);
1806   
1807  e_milk_revenue_contract(hh,y,m)..                v_milk_revenue_contract(h
      h,y,m) =e=  v_Qmilk_marketed_contract(hh,y,m) * p_milkPrice_contract ;
1808   
1809  e_milk_revenue_informal(hh,y,m)..                v_milk_revenue_informal(h
      h,y,m)  =e=  v_Qmilk_marketed_informal(hh,y,m) * p_milkPrice;
1810   
1811   
1812  e_milk_contract(hh,y,m)..                       v_Qmilk_marketed_contract(
      hh,y,m) =l= 10000/12 ;
1813   
1814  e_milk_no_contract(hh,y,m)..                    v_Qmilk_marketed_contract(
      hh,y,m)  =e= 0;
1815   
1816  e_total_income(hh,y,m)..                        v_income(hh,y,m) =e=   v_i
      ncome_lives(hh,y,m)  +  v_income_crop(hh,y,m)  +v_off_farm_income(hh,y)/12
       ;    !! revise this to take into account credit expenses
1817  *- v_tot_credit_expenses(hh,y,m)      ;
1818  *
1819  * v_off_farm_income(hh,y)/12
1820  e_objective1..                                  v_npv =e= sum( (hh,y,m) ,v
      _income(hh,y,m) + v_leisure(hh,y,m)*p_offFarm_wage(hh)*8*.02 / ( 1 + power
      (p_r,ord(y)) ) )   ;
1821   
1822  *e_objective2.. v_npv =e= sum( (hh,y,m) ,(v_income(hh,y,m)- v_stddev_incom
      e(hh,y,m)) / ( 1 + power(p_r,ord(y)) ) )   ;
1823   
1824   
1825   
1826   
1827  Model simulation_model
1828  /
1830  e_objective2
1831  e_offfarm_income_wo_loan
1833   e_farm_income_lives
1834   e_farm_income_crop
1835   e_total_income
1836  *$ifi %CREDIT%==OFF e_total_income1
1837  *$ifi %CREDIT%==ON  e_total_income2
1838   e_milk_revenue_contract
1839   e_milk_revenue_informal
1840   e_livestock_expenses
1841   e_crop_expenses
1842   e_minimum_nutrient
1843  *$ifi %output_SCEN%==ON e_milk_contract
1844  e_milk_no_contract
1845  /
1846   
1847   
1848  * MODEL DEFINITION
1849   
1850  Model  DairyClimateModel
1851  /
1852     livesmod
1853     demogmod
1854     cropmod
1855     Householdmod
1856     simulation_model
1857  risk_module
1860  /
1861  ;
1862  *DairyClimateModel.SCALEOPT = 10000 ;
1863   
1864   
1865  * results storage parameters
1866  Parameter
1867  hh1_animals(*,*,*)
1868  ghg_summary(*,*,*)
1869  Model_status(*,*)
1870  credit(*,*,*)
1871  consumption(*,*,*,*,*)
1872  biomass(*,*,*,*,*)
1873  animal_numbers_monthly(*,*,*,*,*)
1874  animal_numbers_annual(*,*,*,*)
1875  financials(*,*,*)
1876  financials_crop(*,*,*)
1877  financials_livestock(*,*,*)
1878  herd_changes(*,*,*,*,*,*,*,*)
1879  herd(*,*,*,*,*,*)
1880  herd2(*,*,*)
1881  diet1(*,*,*,*,*,*)
1882  diet_annual(*,*,*,*,*,*)
1883  labour(*,*,*,*)
1884  diet(*,*,*,*,*,*,*)
1885  GHG_emissions(*,*,*)
1886  GHG_emissions_parameters(*,*,*,*,*,*,*,*)
1887  crops(*,*,*,*)
1888  production(*,*,*)
1889  land(*,*,*)
1890  dry_matter_intake(*,*,*,*,*,*)
1891  total_feed_consumed1(*,*,*,*)
1892  total_feed_consumed2(*,*,*,*,*)
1893  cash_balance(*,*,*)
1894  ;
1895   
1896   
1897   
1898  *-- recursive loop
1899   
1900  Loop(y2,
1901   
1902  *v_aactLevsell.fx(hh,'adultf_imp',type,inten,minten,'y01','m01') = v_aactL
      ev.l(hh,'adultf_imp',type,inten,minten,'y01','m12')*p_grad('adultf_imp',ty
      pe,inten)*(1-p_mort('adultf_imp',type,minten));
1903  v_aactLevsell.fx(hh,'adultf_loc',type,inten,minten,'y01','m01')= v_aactLev
      .l(hh,'adultf_loc',type,inten,minten,'y01','m12')*p_grad('adultf_loc',type
      ,inten)*(1-p_mort('adultf_loc',type,minten));
1904   
1905   
1906  ** these inititial variable values are specified to reduce the solve time 
      of the model.
1907  v_fdcons.l(hh,aaact,type,inten,y,m,feed_off_farm)=0;
1908  v_fdcons.l(hh,aaact,type,inten,y,m,'grass')=20;
1909   
1910   
1911   
1912  SOLVE DairyClimateModel maximizing v_npv using DNLP;  !! best solved with 
      SNOPT
1913  *$include productivity_module.gms
1914   
1915  *----- save results from current year
1916  Model_status('Model Status',y2)=DairyClimateModel.modelstat;
1917  animal_numbers_monthly('Animal Activity Levels (head)',hh,aaact,y2,m)=Sum(
      (inten,minten),v_aactLev.l(hh,aaact,'dairy',inten,minten,'y01',m));
1918  animal_numbers_annual('Animal Activity Levels (head)',hh,aaact,y2)=Sum((in
      ten,minten,m),v_aactLev.l(hh,aaact,'dairy',inten,minten,'y01',m))/12;
1919   
1920   
1921  herd_changes('Animal Sales (hd)',hh,aaact,type,inten,minten,y2,m)=v_aactLe
      vSell.l(hh,aaact,type,inten,minten,'y01',m);
1922  herd_changes('Animal Purchases (hd)',hh,aaact,type,inten,minten,y2,m)=v_aa
      ctLevbuy.l(hh,aaact,type,inten,minten,'y01',m);
1923  *herd_changes('Animal Deaths (hd)',hh,aaact,type,inten,minten,y2,m)=;
1924   
1925  biomass('Total feed consumption (kg/hh/month)',hh,feed,y2,m)=v_feedons.l(h
      h,feed,'y01',m);
1926  biomass('Feed Balance (kg/month)',hh,feed,y2,m)=v_feedbalance.l(hh,feed,'y
      01',m);
1927  biomass('Residues as Feed (Mg)',hh,residues,y2,m)=v_residuesfeedm.l(hh,res
      idues,'y01',m);
1928  biomass('Residues on field (Mg)',hh,y2,residues,m)=v_residuesfieldm.l(hh,r
      esidues,'y01',m);
1929  biomass('Feeds purchased (kg/hh/month)',hh,y2,feed_off_farm,m)= v_feedbuy.
      l(hh,feed_off_farm,'y01',m);
1930   
1931   
1932  diet1('Diet (kg/hd/day)',hh,aaact,y2,m,feed)=Sum(inten,v_fdcons.l(hh,aaact
      ,'dairy',inten,'y01',m,feed));
1933  diet('Feed intake (kg/hd/day)',hh,aaact,y2,m,inten,feed)=v_fdcons.l(hh,aaa
      ct,'dairy',inten,'y01',m,feed);
1934  diet_annual('Diet as percentage(% DMI)',hh,aaact,y2,inten,feed)=100*sum((m
      ),p_dryMatter(feed)*v_fdcons.l(hh,aaact,'dairy',inten,'y01',m,feed))/Sum(m
      ,.0001+v_dryMatterIntake.l(hh,'y01',m,aaact,'dairy',inten));
1935  diet('Gross Energy (MJ/hd/d)',hh,aaact,type,inten,y2,m)=Sum((feed),v_fdcon
      s.l(hh,aaact,type,inten,'y01',m,feed)*p_dryMatter(feed)*p_grossEnergy(feed
      ));
1936  diet('Digestible Energy (MJ/hd/d)',hh,aaact,type,inten,y2,m)=Sum((feed),v_
      fdcons.l(hh,aaact,type,inten,'y01',m,feed)*p_dryMatter(feed)*p_digestibleE
      nergy(feed));
1937   
1938  dry_matter_intake('Dry matter intake (kg/hd/d)',hh,aaact,inten,y2,m)=v_dry
      MatterIntake.l(hh,'y01',m,aaact,'dairy',inten) ;
1939  total_feed_consumed1('Total of all feeds consumed (kg)',hh,y2,m)=sum(feed,
      biomass('Total feed consumption (kg/hh/month)',hh,feed,'y01',m));
1940  total_feed_consumed2('Total of an individual feed consumed (%)',hh,feed,y2
      ,m)=100*v_feedons.l(hh,feed,'y01',m)/(.0001+total_feed_consumed1('Total of
       all feeds consumed (kg)',hh,y2,m));
1941   
1942  *- Financials
1943  financials('Net present value (objective function) (lc)',hh,y2)=v_npv.l;
1944  financials('Household Income (lc/yr)',hh,y2)=sum(m,v_income.l(hh,'y01',m))
      ;
1945  financials('Farm Income (lc/yr)',hh,y2)=sum(m,v_income_lives.l(hh,'y01',m)
      +v_income_crop.l(hh,'y01',m));
1946  financials('Off farm Income (lc/yr)',hh,y2)=v_off_farm_income.l(hh,'y01');
1947  financials('Farm Expenses (lc/yr)',hh,y2)=sum(m,v_crop_expenses.l(hh,'y01'
      ,m)+v_lives_expenses.l(hh,'y01',m));
1948  financials('Cash balance (lc/hh)',hh,y2)=0.35*sum(m,v_income.l(hh,'y01',m)
      ) ;
1949   
1950  financials_livestock('Livestock Income(lc/hh/y)',hh,y2)= sum(m,v_income_li
      ves.l(hh,'y01',m));
1951  financials_livestock('Milk Revenue total(lc/hh/y)',hh,y2)=sum((m),v_milk_r
      evenue_contract.l(hh,'y01',m)+v_milk_revenue_informal.l(hh,'y01',m));
1952  financials_livestock('Milk Revenue informal(lc/hh/y)',hh,y2)=sum(m,v_milk_
      revenue_informal.l(hh,'y01',m));
1953  financials_livestock('Milk Revenue formal(lc/hh/y)',hh,y2)=sum(m,v_milk_re
      venue_contract.l(hh,'y01',m));
1954  financials_livestock('Meat Revenue (lc/hh/y)',hh,y2)=Sum((aaact,type,inten
      ,m),v_prodQmeat.l(hh,aaact,type,inten,'y01',m)*p_meatPrice);
1955  financials_livestock('Livestock Expenses (lc/yr)',hh,y2)=sum(m,v_lives_exp
      enses.l(hh,'y01',m));
1956  financials_livestock('Replacement Costs(lc/yr)',hh,y2)=sum((aaact,type,int
      en,minten,m),v_aactLevbuy.l(hh,aaact,type,inten,minten,'y01',m)*p_purchPri
      ce(hh,aaact));
1957  financials_livestock('Livestock labour expenses(lc/yr)',hh,y2)=sum(m,v_lab
      our_hired_lives.l(hh,'y01',m)*p_labourPrice(hh)) ;
1958  financials_livestock('Maintenance Expenses(lc/yr)',hh,y2)= sum((aaact,type
      ,m,inten,minten),v_aactLev.l(hh,aaact,type,inten,minten,'y01',m)*p_maintEx
      pense(hh,aaact,type,minten)/12);
1959  financials_livestock('Feed Expenses(lc/yr)',hh,y2)= sum((m,feed_off_farm),
      v_feedbuy.l(hh,feed_off_farm,'y01',m)*p_feedprice(feed_off_farm));
1960  financials_livestock('Milk marketed informally (lc/yr)',hh,y2)=sum(m,v_Qmi
      lk_marketed_informal.l(hh,'y01',m));
1961  financials_livestock('Milk marketed contract(lc/yr)',hh,y2)=sum(m,v_Qmilk_
      marketed_contract.l(hh,'y01',m));
1962   
1963  financials_crop('Crop income (lc/yr)',hh,y2)=sum(m,v_income_crop.l(hh,'y01
      ',m));
1964  financials_crop('Crop revenue (lc/yr)',hh,y2)=Sum((cash,m), v_prdCrop.l(hh
      ,'y01',cash,m)*p_crop_sell_price(hh,'y01',cash));
1965  financials_crop('Crop Expenses (lc/yr)',hh,y2)=sum(m,v_crop_expenses.l(hh,
      'y01',m));
1966  financials_crop('General crop expenses(lc/yr)',hh,y2)=Sum(c,v_areaCrop.l(h
      h,'y01',c)*p_cropcosts(hh,c))    ;
1967  financials_crop('Crop labour expenses(lc/yr)',hh,y2)=Sum(m,v_labour_hired_
      crop.l(hh,'y01',m)*p_labourPrice(hh)) ;
1968   
1969   
1970   
1971   
1972  * milk and meat production
1973  production('Milk produced (kg/hh/y)',hh,y2)=sum((adultf,type,inten,m),v_pr
      odQmilk.l(hh,adultf,type,inten,'y01',m));
1974  production('Meat produced (kg/hh/y)',hh,y2)=Sum((aaact,type,inten,m),v_pro
      dQmeat.l(hh,aaact,type,inten,'y01',m));
1975   
1976  * consumption
1977  consumption(hh,y2,m,good,'Household consumption (kg/hh/m)')=v_cons.l(hh,'y
      01',m,good);
1978   
1979   
1980  * labour
1981  labour('Total livestock labour (person-days/m)',hh,y2,m)=v_totallabourdeml
      ive.l(hh,'y01',m);
1982  labour('Total crop labour (person-days/m)',hh,y2,m)=v_totallabourdemcrop.l
      (hh,'y01',m);
1983  labour('Livestock labour hired (person-days/m)',hh,y2,m)=v_labour_hired_li
      ves.l(hh,'y01',m);
1984  labour('Crop labour hired (person-days/m)',hh,y2,m)=v_labour_hired_crop.l(
      hh,'y01',m) ;
1985  labour('Home labour available (person-days/m)',hh,y2,m)=p_labouravailableh
      ome(hh,'y01',m);
1986  labour('Leisure time (person-days/m)',hh,y2,m)=v_leisure.l(hh,'y01',m);
1987   
1988  * Crops
1989  crops('Crop area (ha)',hh,y2,c)=v_areaCrop.l(hh,'y01',c);
1990  crops('Crop production (Mg)',hh,y2,c)=Sum(m,v_prdCrop.l(hh,'y01',c,m)) ;
1991  crops('Crop residues produced (Mg)',hh,y2,residues)=Sum(m,v_residues.l(hh,
      'y01',residues,m));
1992   
1993   
1994   
1995  * These two lines calculate GHG emissions at a post-model optimization out
      put (based on the results from the model run in each iteration)
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\GHG_params.gms
1997   
1998  v_aactLev.fx(hh,aaact,type,inten,minten,'y01',m)=v_aactLev.l(hh,aaact,type
      ,inten,minten,'y01',m) ;
1999  v_grossEnergy.fx(hh,aaact,type,inten,minten,'y01',m)=v_grossEnergy.l(hh,aa
      act,type,inten,minten,'y01',m);
2000  v_digestibleEnergy.fx(hh,aaact,type,inten,minten,'y01',m)=v_digestibleEner
      gy.l(hh,aaact,type,inten,minten,'y01',m);
2001  v_fdcons.fx(hh,aaact,type,inten,'y01',m,feed)=v_fdcons.l(hh,aaact,type,int
      en,'y01',m,feed);
2002  v_graze_dmd.fx(hh,'y01')=v_graze_dmd.l(hh,'y01');
2003  v_dryMatterIntake.fx(hh,'y01',m,aaact,type,inten)=v_dryMatterIntake.l(hh,'
      y01',m,aaact,type,inten);
2004  v_areaCrop.fx(hh,'y01',c)=v_areaCrop.l(hh,'y01',c);
2005  v_feed_crop_land.fx(hh,'y01')=v_feed_crop_land.l(hh,'y01');
2006  v_ADF.fx(hh,'y01',m,aaact,type,inten,minten)=v_ADF.l(hh,'y01',m,aaact,type
      ,inten,minten);
2007  v_NDF.fx(hh,'y01',m,aaact,type,inten,minten)=v_NDF.l(hh,'y01',m,aaact,type
      ,inten,minten);
2008  v_dmd.fx(hh,'y01',m,aaact,type,inten,minten)=v_dmd.l(hh,'y01',m,aaact,type
      ,inten,minten);
2009  Solve Emissionsmod using nlp maximizing dummy;
2010   
2011  GHG_emissions('Emissions -- Enteric CH4 (kg/yr)',hh,y2)=v_enteric_methane.
      l(hh,'y01');
2012  GHG_emissions('Emissions -- Manure CH4 (kg/yr)',hh,y2)=v_manure_methane.l(
      hh,'y01');
2013  GHG_emissions('Emissions -- Manure N2O (direct) (kg/yr)',hh,y2)=v_manure_n
      itrous_oxide_direct.l(hh,'y01');
2014  GHG_emissions('Emissions -- Manure N2O (vol) (kg/yr)',hh,y2)=v_manure_nitr
      ous_oxide_vol.l(hh,'y01');
2015  GHG_emissions('Emissions -- Manure N2O (leach) (kg/yr)',hh,y2)=v_manure_ni
      trous_oxide_leach.l(hh,'y01');
2016  GHG_emissions('Emissions -- Soil N2O (kg/yr)',hh,y2)=v_soil_nitrous_oxide.
      l(hh,'y01');
2017  GHG_emissions('Emissions -- Fossil Fuel CO2 (kg CO2eq/kg milk)',hh,y2)=v_f
      ossil_fuel_CO2.l(hh,'y01');
2018  GHG_emissions('Emissions -- cropland conversion (kg/yr)',hh,y2)=(44/12)*p_
      land_C*(1-exp((-.02)*(ord(y2)-1)))*(v_feed_crop_land.l(hh,'y01') -  p0_fee
      d_crop_land(hh,y2)) ;
2019  GHG_emissions('Emissions -- Total(kg CO2eq)',hh,y2)=v_enteric_methane.l(hh
      ,'y01')+v_manure_methane.l(hh,'y01')+v_manure_nitrous_oxide_direct.l(hh,'y
      01')+v_manure_nitrous_oxide_vol.l(hh,'y01')+v_manure_nitrous_oxide_leach.l
      (hh,'y01')+v_soil_nitrous_oxide.l(hh,'y01')+v_fossil_fuel_CO2.l(hh,'y01')+
      GHG_emissions('Emissions -- cropland conversion (kg/yr)',hh,y2);
2020   
2021  GHG_emissions('Emissions intensity -- Enteric CH4 (kg CO2eq/kg milk)',hh,y
      2)=v_enteric_methane.l(hh,'y01')/(production('Meat produced (kg/hh/y)',hh,
      y2)+production('Milk produced (kg/hh/y)',hh,y2));
2022  GHG_emissions('Emissions intensity -- Manure CH4 (kg CO2eq/kg milk)',hh,y2
      )=v_manure_methane.l(hh,'y01')/(production('Meat produced (kg/hh/y)',hh,y2
      )+production('Milk produced (kg/hh/y)',hh,y2));
2023  GHG_emissions('Emissions intensity -- Manure N2O (direct) (kg CO2eq/kg mil
      k)',hh,y2)=v_manure_nitrous_oxide_direct.l(hh,'y01')/(production('Meat pro
      duced (kg/hh/y)',hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
2024  GHG_emissions('Emissions intensity -- Manure N2O (leach)(kg CO2eq/kg milk)
      ',hh,y2)=v_manure_nitrous_oxide_leach.l(hh,'y01')/(production('Meat produc
      ed (kg/hh/y)',hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
2025  GHG_emissions('Emissions intensity -- Manure N2O (vol) (kg CO2eq/kg milk)'
      ,hh,y2)=v_manure_nitrous_oxide_vol.l(hh,'y01')/(production('Meat produced 
      (kg/hh/y)',hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
2026  GHG_emissions('Emissions intensity -- Soil N2O (kg CO2eq/kg milk)',hh,y2)=
      v_soil_nitrous_oxide.l(hh,'y01')/(production('Meat produced (kg/hh/y)',hh,
      y2)+production('Milk produced (kg/hh/y)',hh,y2));
2027  GHG_emissions('Emissions intensity -- Fossil Fuel CO2 (kg CO2eq/kg milk)',
      hh,y2)=v_fossil_fuel_CO2.l(hh,'y01')/(production('Meat produced (kg/hh/y)'
      ,hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
2028  GHG_emissions('Emissions intensity -- Cropland conversion (kg CO2eq/kg mil
      k)',hh,y2)=GHG_emissions('Emissions -- cropland conversion (kg/yr)',hh,y2)
      /(production('Meat produced (kg/hh/y)',hh,y2)+production('Milk produced (k
      g/hh/y)',hh,y2));
2029  GHG_emissions('Emissions intensity -- total(kg CO2eq/kg milk)',hh,y2)=GHG_
      emissions('Emissions -- Total(kg CO2eq)',hh,y2)/(production('Meat produced
       (kg/hh/y)',hh,y2)+production('Milk produced (kg/hh/y)',hh,y2));
2030   
INCLUDE    C:\Users\Gaming\Documents\Github\household_ghg_model\dairyclimatemode
           l2\GHG_params2.gms
2032  *v_aactLev.l(hh,aaact,type,inten,minten,y,m)=0 ;
2033  *v_grossEnergy.l(hh,aaact,type,inten,minten,y,m)=0;
2034  *v_digestibleEnergy.l(hh,aaact,type,inten,minten,y,m)=0;
2035  *v_fdcons.l(hh,aaact,type,inten,y,m,feed)=0;
2036  *v_graze_dmd.l(hh,y,m)=0;
2037  *v_dryMatterIntake.l(hh,y,m,aaact,type,inten)=0;
2038  *v_areaCrop.l(hh,y,c)=0;
2039   
2040  v_aactLev.lo(hh,aaact,type,inten,minten,y,m)=0 ;
2041  v_aactLev.up(hh,aaact,type,inten,minten,y,m)=+inf ;
2042   
2043  v_grossEnergy.lo(hh,aaact,type,inten,minten,y,m)=0;
2044  v_grossEnergy.up(hh,aaact,type,inten,minten,y,m)=+inf;
2045   
2046  v_digestibleEnergy.lo(hh,aaact,type,inten,minten,y,m)=0;
2047  v_digestibleEnergy.up(hh,aaact,type,inten,minten,y,m)=+inf;
2048   
2049  v_fdcons.lo(hh,aaact,type,inten,y,m,feed)=0;
2050  v_fdcons.up(hh,aaact,type,inten,y,m,feed)=+inf;
2051   
2052  v_graze_dmd.lo(hh,y)=0;
2053  v_graze_dmd.up(hh,y)=+inf;
2054   
2055  v_dryMatterIntake.lo(hh,y,m,aaact,type,inten)=0;
2056  v_dryMatterIntake.up(hh,y,m,aaact,type,inten)=+inf;
2057   
2058  v_areaCrop.lo(hh,y,c)=0;
2059  v_areaCrop.up(hh,y,c)=+inf;
2060   
2061   
2062  *Credit
2063  credit('Loan (initial value) (lc/yr)',hh,y2)=v_loan.l(hh) ;
2064  credit('Loan payment (lc/yr)',hh,y2)=p_loan_installment(hh);
2065  credit('Loan principle (lc)',hh,y2)=p_loan_principle(hh,y2)   ;
2066  credit('Credit interest (lc/yr)',hh,y2)=p_credit_interest(hh)  ;
2067   
2068  cash_balance(hh,y2,m)=v_cash.l(hh,'y01',m);
2069   
2070  land('Total land use for dairy production (ha/hh/yr)',hh,y2)=v_Land_use.l(
      hh,'y01');
2071  land('Total crop land use for dairy production (ha/hh/yr)',hh,y2)=v_feed_c
      rop_land.l(hh,'y01');
2072  land('Total crop land use for dairy production on farm (ha/hh/yr)',hh,y2)=
      v_feed_crop_land_on_farm.l(hh,'y01') ;
2073  land('Total crop land use for dairy production off farm (ha/hh/yr)',hh,y2)
      =v_feed_crop_land_off_farm.l(hh,'y01') ;
2074  land('Total rangeland use for dairy production (ha/hh/yr)',hh,y2)=v_graze_
      dmd.l(hh,'y01');
2075  land('Total pasture land use for dairy production (ha/hh/yr)',hh,y2)=v_pas
      ture_land.l(hh,'y01') ;
2076   
2077   
2078  herd2('Percentage local (%)',hh,y2)=100*sum((m,local),animal_numbers_month
      ly('Animal Activity Levels (head)',hh,local,y2,m))/sum((m,aaact),.0001+ani
      mal_numbers_monthly('Animal Activity Levels (head)',hh,aaact,y2,m));
2079   
2080   
2081  *--------        Re-initialize variables
2082  *---------------------------------------
2083  * update loan related parameters based on decisions in year y2 == 1
2084  p_loan_value(hh)$(ord(y2) eq 1)=v_loan.l(hh);
2085  p_loan_installment(hh)=p_loan_value(hh)*.1;
2086  p_loan_principle(hh,y2)= p_loan_value(hh) - (ord(y2)*p_loan_installment(hh
      ))   ;
2087  p_credit_interest(hh)=p_loan_principle(hh,y2)*p_r_loan(hh);
2088  p_loan_value(hh)$(ord(y2) gt 1)=p_loan_value(hh);
2089   
2090  * set loan related variables to zero in every period after y2 == 1
2091  v_loan.fx(hh)=0;
2092  v_loan_principle.fx(hh,y)=0;
2093  v_credit_interest.fx(hh,y,m)=0;
2094  v_loan_installment.fx(hh,y)=0;
2095   
2096  * specify fraction of total income available to be re-invested in the farm
      .
2097  p_cash(hh)=0.35*sum(m,v_income.l(hh,'y01',m));
2098   
2099  *update feed balance
2100  p_s(hh,feed)=v_feedbalance.l(hh,feed,'y01','m12')*(p_transferrate);
2101   
2102  ** re initialize month 1 animal numbers here from month 12 of 'y01'
2103  ** note: to allow transitions between intensity levels, sum rhs of below e
      quations over all 'type'
2104  v0_aactLev(hh,young_imp,type,inten,minten)=
2105  v_aactLev.l(hh,'adultf_imp',type,inten,minten,'y01','m12')*p_rateFert('adu
      ltf_imp',type,inten)*p_sexratio(young_imp,type,inten)+
2106  v_aactLev.l(hh,young_imp,type,inten,minten,'y01','m12')*(1-p_grad(young_im
      p,type,inten))*(1-p_mort(young_imp,type,minten))
2107  ;
2108   
2109  v0_aactLev(hh,young_loc,type,inten,minten)=
2110  v_aactLev.l(hh,'adultf_loc',type,inten,minten,'y01','m12')*p_rateFert('adu
      ltf_loc',type,inten)*p_sexratio(young_loc,type,inten)+
2111  v_aactLev.l(hh,young_loc,type,inten,minten,'y01','m12')*(1-p_grad(young_lo
      c,type,inten))*(1-p_mort(young_loc,type,minten))
2112  ;
2113   
2114  v0_aactLev(hh,'weanerf_imp',type,inten,minten)=
2115  v_aactLev.l(hh,'youngf_imp',type,inten,minten,'y01','m12')*p_grad('youngf_
      imp',type,inten)
2116  +v_aactLev.l(hh,'weanerf_imp',type,inten,minten,'y01','m12')*(1-p_grad('we
      anerf_imp',type,inten))*(1-p_mort('weanerf_imp',type,minten))
2117  ;
2118   
2119  v0_aactLev(hh,'weanerf_loc',type,inten,minten)=
2120  v_aactLev.l(hh,'youngf_loc',type,inten,minten,'y01','m12')*p_grad('youngf_
      loc',type,inten)
2121  +v_aactLev.l(hh,'weanerf_loc',type,inten,minten,'y01','m12')*(1-p_grad('we
      anerf_loc',type,inten))*(1-p_mort('weanerf_loc',type,minten))
2122  ;
2123   
2124  v0_aactLev(hh,'weanerm_imp',type,inten,minten)=
2125  v_aactLev.l(hh,'youngm_imp',type,inten,minten,'y01','m12')*p_grad('youngm_
      imp',type,inten)
2126  +v_aactLev.l(hh,'weanerm_imp',type,inten,minten,'y01','m12')*(1-p_grad('we
      anerm_imp',type,inten))*(1-p_mort('weanerf_imp',type,minten))
2127  ;
2128   
2129  v0_aactLev(hh,'weanerm_loc',type,inten,minten)=
2130  v_aactLev.l(hh,'youngm_loc',type,inten,minten,'y01','m12')*p_grad('youngm_
      loc',type,inten)
2131  +v_aactLev.l(hh,'weanerm_loc',type,inten,minten,'y01','m12')*(1-p_grad('we
      anerm_loc',type,inten))*(1-p_mort('weanerf_loc',type,minten))
2132  -v_aactLevsell.l(hh,'weanerm_loc',type,inten,minten,'y01','m12')
2133  ;
2134   
2135  v0_aactLev(hh,'adultf_loc',type,inten,minten)=
2136  v_aactLev.l(hh,'weanerf_loc',type,inten,minten,'y01','m12')*p_grad('weaner
      f_loc',type,inten)
2137  +v_aactLev.l(hh,'adultf_loc',type,inten,minten,'y01','m12')*(1-p_grad('adu
      ltf_loc',type,inten))*(1-p_mort('adultf_loc',type,minten))
2138  -v_aactLevsell.l(hh,'adultf_loc',type,inten,minten,'y01','m12')
2139  +v_aactLevbuy.l(hh,'adultf_loc',type,inten,minten,'y01','m12');
2140   
2141  v0_aactLev(hh,'adultf_imp',type,inten,minten)=
2142  v_aactLev.l(hh,'weanerf_imp',type,inten,minten,'y01','m12')*p_grad('weaner
      f_imp',type,inten)
2143  +v_aactLev.l(hh,'adultf_imp',type,inten,minten,'y01','m12')*(1-p_grad('adu
      ltf_imp',type,inten))*(1-p_mort('adultf_imp',type,minten))
2144  -v_aactLevsell.l(hh,'adultf_imp',type,inten,minten,'y01','m12')
2145  +v_aactLevbuy.l(hh,'adultf_imp',type,inten,minten,'y01','m12')
2146  ;
2147   
2148  v_aactLev.fx(hh,aaact,type,inten,minten,'y01','m01')=v0_aactLev(hh,aaact,t
      ype,inten,minten);
2149   
2150  );
2151   
2152  *$exit
2153   
2154  herd('Animal Activity Levels (head)',hh,aaact,type,inten,minten)=Sum((y2,m
      ),animal_numbers_monthly('Animal Activity Levels (head)',hh,aaact,y2,m))/(
      card(m)*card(y2));
2155   
2156   
2157   
2158   
2159   
2160  execute_unload "results/results.gdx"
2161  land,
2162  Model_Status,
2163  herd,
2164  total_feed_consumed1,
2165  total_feed_consumed2,
2166  herd_changes,
2167  dry_matter_intake,
2168  labour, financials,
2169  financials_livestock,
2170  financials_crop,
2171  GHG_emissions,
2172  crops,
2173  credit,
2174  production,
2175  consumption,
2176  biomass,
2177  animal_numbers_monthly
2178  animal_numbers_annual,
2179  diet_annual
2180  cash_balance
2181  ;
2182   
2183  *$exit
2184  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=Model_St
      atus       rng=Model_Status!'
2185  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=financia
      ls         rng=financials!'
2186  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=financia
      ls_crop    rng=financials_crop!'
2187  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=financia
      ls_livestock         rng=financials_livestock!'
2188  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=labour  
                 rng=labour!'
2189  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=producti
      on         rng=production!'
2190  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=credit  
                 rng=credit!'
2191  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=consumpt
      ion    rng=consumption!'
2192  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=land    
       rng=land!'
2193  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=cash_bal
      ance    rng=cash_balance!'
2194  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=biomass 
                 rng=biomass!'
2195  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=crops   
                 rng=crops!'
2196  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=herd    
                 rng=herd!'
2197  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=herd_cha
      nges       rng=herd_changes!'
2198  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=animal_n
      umbers_monthly     rng=animal_numbers_monthly!'
2199  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=animal_n
      umbers_annual     rng=animal_numbers_annual!'
2200  *execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=total_f
      eed_consumed rng=total_feed_consumed !'
2201  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=dry_matt
      er_intake      rng=dry_matter_intake!'
2202  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=diet_ann
      ual     rng=diet_annual!'
2203  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=total_fe
      ed_consumed1    rng=total_feed_consumed1!'
2204  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=total_fe
      ed_consumed2    rng=total_feed_consumed2!'
2205  execute 'gdxxrw.exe results/results.gdx o=results/results.xls par=GHG_emis
      sions      rng=GHG_emissions!'
2206   
GAMS Rev 235  WEX-VS8 23.5.1 x86/MS Windows             10/16/18 06:45:11 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\Gaming\Documents\Github\house
                                          hold_ghg_model\dairyclimatemodel2\gen_
                                          baseline.gms
     2       33 INCLUDE        1      33  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\se
                                           t_definitions.gms
     3      148 INCLUDE        1      36  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\da
                                           ta\parameters.gms
     4      186 CALL           3      38  .gdxxrw.exe data/household_data.xlsx o
                                           =data/household_data.gdx index=index!
                                           A3
     5      187 GDXIN          3      39  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\da
                                           ta/household_data.gdx
     6      208 CALL           3      60  .gdxxrw.exe data/model_data.xlsx o=dat
                                           a/model_data.gdx index=index!A3
     7      209 GDXIN          3      61  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\da
                                           ta/model_data.gdx
     8      419 INCLUDE        1      38  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\da
                                           ta\ghg_parameters.gms
     9      461 CALL           8      42  .gdxxrw.exe data/ghg_params.xlsx o=dat
                                           a/ghg_params.gdx index=index!A3
    10      462 GDXIN          8      43  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\da
                                           ta/ghg_params.gdx
    11      493 INCLUDE        1      40  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\da
                                           ta\nutr_parameters.gms
    12      507 CALL          11      14  .gdxxrw.exe data/nutrient_requirements
                                           .xlsx o=data/nutrient_requirements.gd
                                           x index=index!A3
    13      508 GDXIN         11      15  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\da
                                           ta/nutrient_requirements.gdx
    14      520 INCLUDE        1      42  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\da
                                           ta\scenario_parameters.gms
    15      602 INCLUDE        1      95  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\cr
                                           op_module.gms
    16      688 INCLUDE        1      98  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\li
                                           vestock_module.gms
    17      883 INCLUDE        1     101  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\de
                                           mographic_module.gms
    18     1323 INCLUDE        1     104  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\em
                                           issions_module.gms
    19     1435 INCLUDE        1     107  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\lo
                                           an_module.gms
    20     1494 INCLUDE        1     110  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\ho
                                           usehold_module.gms
    21     1623 INCLUDE        1     113  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\ri
                                           sk_module.gms
    22     1750 INCLUDE        1     116  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\si
                                           mulation_model.gms
    23     1996 INCLUDE        1     267  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\GH
                                           G_params.gms
    24     2031 INCLUDE        1     290  .C:\Users\Gaming\Documents\Github\hous
                                           ehold_ghg_model\dairyclimatemodel2\GH
                                           G_params2.gms


COMPILATION TIME     =        1.610 SECONDS      3 Mb  WIN235-235 Jul  2, 2010
GAMS Rev 235  WEX-VS8 23.5.1 x86/MS Windows             10/16/18 06:45:11 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


----    395 PARAMETER p_NDF  

napier              0.715,    maize_residue       0.655
cpea_residue        0.655,    grnut_residue       0.655
bean_residue        0.655,    sorgh_residue       0.655
maize_silage        0.270,    sunflower_seed_cake 0.450
maize_bran          0.442,    grass               0.394
grass_hay           0.538


----    395 PARAMETER p_ADF  

napier              0.425,    maize_residue       0.359
cpea_residue        0.386,    grnut_residue       0.439
bean_residue        0.076,    sorgh_residue       0.350
maize_silage        0.270,    sunflower_seed_cake 0.320
maize_bran          0.145,    grass               0.394
grass_hay           0.538


----    554 PARAMETER v0_aactLev  parameter used to specify livestock numbers in
                                  1st period of each iteration

INDEX 1 = hh2  INDEX 2 = youngf_imp

                  ext

dairy.ext       0.600

INDEX 1 = hh2  INDEX 2 = youngm_imp

                  ext

dairy.ext       0.600

INDEX 1 = hh2  INDEX 2 = weanerf_imp

                  ext

dairy.ext       0.960

INDEX 1 = hh2  INDEX 2 = weanerm_imp

                  ext

dairy.ext       0.120

INDEX 1 = hh2  INDEX 2 = adultf_imp

                  ext

dairy.ext       2.400


----    554 PARAMETER p_B0                 =        0.240  Methane producing cap
                                                           acity
            PARAMETER p_FRAC_leach         =        0.100  Fraction of manure N 
                                                           that is leached (frac
                                                           tion)
            PARAMETER p_FRAC_vol           =        0.100  Fraction of manure N 
                                                           that is volatilized (
                                                           fraction)
            PARAMETER p_EF_5               =        0.007  Emission factor for i
                                                           ndirect manure nitrou
                                                           s oxide (leaching) (f
                                                           raction)
            PARAMETER p_EF_4               =        0.010  Emission factor for i
                                                           ndirect manure nitrou
                                                           s oxide (volatilizati
                                                           on) (fraction)

----    554 PARAMETER p_MCF  Methane conversion factor

local    0.010,    improved 0.010


----    554 PARAMETER p_ADF  

napier              0.425,    maize_residue       0.359
cpea_residue        0.386,    grnut_residue       0.439
bean_residue        0.076,    sorgh_residue       0.350
maize_silage        0.270,    sunflower_seed_cake 0.320
maize_bran          0.145,    grass               0.394
grass_hay           0.538


----    554 PARAMETER p_crudeProtein  

napier              0.097,    maize_residue       0.120
cpea_residue        0.200,    grnut_residue       0.175
bean_residue        0.248,    sorgh_residue       0.082
maize_silage        0.080,    sunflower_seed_cake 0.324
maize_bran          0.119,    grass               0.045
grass_hay           0.045


----    554 PARAMETER p_Energy_req  energy requirement  (MJ/head/day)

INDEX 1 = youngf_loc

                  ext

dairy.ext      26.100
dairy.med      26.100
dairy.int      26.100

INDEX 1 = youngm_loc

                  ext

dairy.ext      26.800
dairy.med      26.800
dairy.int      26.800

INDEX 1 = weanerf_loc

                  ext

dairy.ext      26.100
dairy.med      26.100
dairy.int      26.100

INDEX 1 = weanerm_loc

                  ext

dairy.ext      26.800
dairy.med      26.800
dairy.int      26.800

INDEX 1 = adultf_loc

                  ext

dairy.ext      40.500
dairy.med      35.300
dairy.int      35.300

INDEX 1 = reprod_loc

                  ext

dairy.ext      36.270
dairy.med      36.270
dairy.int      36.270

INDEX 1 = youngf_imp

                  ext

dairy.ext      26.300
dairy.med      26.300
dairy.int      26.300

INDEX 1 = youngm_imp

                  ext

dairy.ext      26.500
dairy.med      26.500
dairy.int      26.500

INDEX 1 = weanerf_imp

                  ext

dairy.ext      26.300
dairy.med      26.300
dairy.int      26.300

INDEX 1 = weanerm_imp

                  ext

dairy.ext      38.800
dairy.med      38.800
dairy.int      38.800

INDEX 1 = adultf_imp

                  ext

dairy.ext      38.300
dairy.med      38.300
dairy.int      38.300

INDEX 1 = reprod_imp

                  ext

dairy.ext      35.500
dairy.med      35.500
dairy.int      35.500


----    554 PARAMETER p_digestibleEnergy  

napier              10.684,    maize_residue        7.800
cpea_residue        10.800,    grnut_residue       10.860
bean_residue        11.160,    sorgh_residue       10.860
maize_silage        11.340,    sunflower_seed_cake 11.853
maize_bran          13.838,    grass               11.340
grass_hay           11.340


----    554 PARAMETER p_grossEnergy  

napier              17.400,    maize_residue       13.000
cpea_residue        18.000,    grnut_residue       18.100
bean_residue        18.600,    sorgh_residue       18.100
maize_silage        18.900,    sunflower_seed_cake 19.400
maize_bran          18.500,    grass               18.900
grass_hay           18.900


----    554 PARAMETER p_crop_sell_price  Sell price of crops (lc/kg)

              beans       maize     sorghum      millet   groundnut      cowpea

hh2.y01 1297071.380  509990.520  693064.040  741988.860  900036.320  994053.140

      +      banana

hh2.y01  865090.020


----    554 PARAMETER offfarm_income  Annual off farm income (lc/hh/year)

hh2 2500000.000,    hh1 2500000.000,    hh3 2500000.000,    hh4 2500000.000


----    554 PARAMETER p_offFarmIncome  Annual off farm income (lc/hh/yr)

hh2 2500000.000


----    554 PARAMETER p_forage_yield  yield of forage (tons DM/ha/yr)

m01 0.125,    m02 0.125,    m03 0.125,    m04 0.125,    m05 0.125,    m06 0.125
m07 0.125,    m08 0.125,    m09 0.125,    m10 0.125,    m11 0.125,    m12 0.125


----    554 PARAMETER rangeland_yield  Yield of rangeland (Mg DM/ha/m)

m01 0.125,    m02 0.125,    m03 0.125,    m04 0.125,    m05 0.125,    m06 0.125
m07 0.125,    m08 0.125,    m09 0.125,    m10 0.125,    m11 0.125,    m12 0.125


----    554 PARAMETER p_yldCrop  Crop yields (kg/ha/year)

                      m01         m05         m06         m07         m11

hh2.beans        2552.000
hh2.maize                                1787.000    1787.000
hh2.sorghum                                                       967.000
hh2.cowpea                    200.000     200.000     200.000
hh2.banana                                           7598.000
hh2.napier                                          15500.000
hh2.pasture                                          1500.000

            +         m12

hh2.beans        2552.000
hh2.millet        917.000
hh2.groundnut     705.000


----    554 PARAMETER p_s  starting feed balance in kg

     maize_res~  cpea_resi~  grnut_res~  bean_resi~  sorgh_res~  sunflower~

hh2    1000.000     300.000     300.000     300.000     300.000     300.000

  +  maize_bran       grass   grass_hay

hh2     300.000     300.000   15000.000


----    554 PARAMETER startfeed  Starting feed balance

                                p_s

hh2.maize_residue          1000.000
hh2.cpea_residue            300.000
hh2.grnut_residue           300.000
hh2.bean_residue            300.000
hh2.sorgh_residue           300.000
hh2.sunflower_seed_cake     300.000
hh2.maize_bran              300.000
hh2.grass                   300.000
hh2.grass_hay             15000.000
hh2.soyb_residue            300.000
hh2.cotton_seed_cake        300.000
hh1.maize_residue          1000.000
hh1.cpea_residue            300.000
hh1.grnut_residue           300.000
hh1.bean_residue            300.000
hh1.sorgh_residue           300.000
hh1.sunflower_seed_cake     300.000
hh1.maize_bran              300.000
hh1.grass                   300.000
hh1.grass_hay             15000.000
hh1.soyb_residue            300.000
hh1.cotton_seed_cake        300.000
hh3.maize_residue          1000.000
hh3.cpea_residue            300.000
hh3.grnut_residue           300.000
hh3.bean_residue            300.000
hh3.sorgh_residue           300.000
hh3.sunflower_seed_cake     300.000
hh3.maize_bran              300.000
hh3.grass                   300.000
hh3.grass_hay             15000.000
hh3.soyb_residue            300.000
hh3.cotton_seed_cake        300.000
hh4.maize_residue          1000.000
hh4.cpea_residue            300.000
hh4.grnut_residue           300.000
hh4.bean_residue            300.000
hh4.sorgh_residue           300.000
hh4.sunflower_seed_cake     300.000
hh4.maize_bran              300.000
hh4.grass                   300.000
hh4.grass_hay             15000.000
hh4.soyb_residue            300.000
hh4.cotton_seed_cake        300.000


----    554 PARAMETER p_netEnergy  

napier               9.200,    maize_residue       11.300
cpea_residue        15.646,    grnut_residue       15.733
bean_residue        16.168,    sorgh_residue       15.733
maize_silage        16.428,    sunflower_seed_cake 11.800
maize_bran          12.000,    grass                9.600
grass_hay            9.600


----    554 PARAMETER p_dryMatter  

napier              0.179,    maize_residue       0.290
cpea_residue        0.209,    grnut_residue       0.269
bean_residue        0.269,    sorgh_residue       0.281
maize_silage        0.235,    sunflower_seed_cake 0.890
maize_bran          0.887,    grass               0.300
grass_hay           0.300


----    554 PARAMETER p_transferrate       =        1.000  transfer rate of feed
                                                           biomass

----    554 PARAMETER p_fossil_fuel_emissions  Embodied emissions from feed prod
                                               uction (kg CO2eq/Mg feed)

sunflower_seed_cake 78.600,    maize_bran          78.600


----    554 PARAMETER p_meatPrice          =      315.000  Price of meat (lc/kg)

----    554 PARAMETER p_purchPrice  Purchase price of a given animal (lc/head)

     youngf_loc  youngm_loc  weanerf_l~  weanerm_l~  adultf_loc  reprod_loc

hh2   50000.000   50000.000  135560.000  135560.000  135560.000  135560.000

  +  youngf_imp  youngm_imp  weanerf_i~  weanerm_i~  adultf_imp  reprod_imp

hh2   40000.000   40000.000  130137.600  104110.080  104110.080   91096.320


----    554 PARAMETER p_labourPrice  Hired labour price (lc/hour)

hh2 3000.000

GAMS Rev 235  WEX-VS8 23.5.1 x86/MS Windows             10/16/18 06:45:11 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Model Statistics    SOLVE DairyClimateModel Using DNLP From line 1912


LOOPS                                   y2   1


MODEL STATISTICS

BLOCKS OF EQUATIONS          98     SINGLE EQUATIONS       11,955
BLOCKS OF VARIABLES          59     SINGLE VARIABLES       17,915
NON ZERO ELEMENTS       212,025     NON LINEAR N-Z         35,724
DERIVATIVE POOL             870     CONSTANT POOL              77
CODE LENGTH             302,453


GENERATION TIME      =        0.296 SECONDS     18 Mb  WIN235-235 Jul  2, 2010


EXECUTION TIME       =        0.390 SECONDS     18 Mb  WIN235-235 Jul  2, 2010
